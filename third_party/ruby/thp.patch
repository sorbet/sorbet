diff --git eval.c eval.c
index 844c537cc4..0fd751650a 100644
--- eval.c
+++ eval.c
@@ -77,7 +77,9 @@ ruby_setup(void)
      * affect as many future pages as possible for CoW-friendliness
      */
 #if defined(__linux__) && defined(PR_SET_THP_DISABLE)
+  if (strncmp(getenv("STRIPE_RUBY_ENABLE_THP"), "true", 4) != 0) {
     prctl(PR_SET_THP_DISABLE, 1, 0, 0, 0);
+  }
 #endif
     Init_BareVM();
     Init_heap();
