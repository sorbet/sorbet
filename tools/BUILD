load("//tools:clang.bzl", "clang_tool")
load("@compdb//:aspects.bzl", "compilation_database")

clang_tool("clang-format")

clang_tool("clang-tidy")

compilation_database(
    name = "compdb",
    testonly = True,
    targets = [
        # BEGIN compile_commands targets
        "//third_party/licenses:generate_licenses",
        "//test/lsp:watchman_test_corpus",
        "//test/lsp:protocol_test_corpus",
        "//test/lsp:multithreaded_protocol_test_corpus",
        "//test/lsp:cache_protocol_test_corpus",
        "//test/fuzz:fuzz_hover",
        "//test/fuzz:proto",
        "//test/fuzz:fuzz_doc_symbols",
        "//test/fuzz:fuzz_dash_e",
        "//test/fuzz:fuzz_dash_e_impl",
        "//test:print_document_symbols",
        "//test:pipeline_test_runner",
        "//test:parser_test_runner",
        "//test:lsp_test_runner",
        "//test:hello-test",
        "//test:error-check-test",
        "//test:backtrace-test-raise",
        "//test:backtrace-test-error",
        "//test:autocorrect-test",
        "//rbi:generate_procs",
        "//payload/text:generate_payload",
        "//payload/binary:gen_state_payload",
        "//parser:parser_test",
        "//parser:generate_ast",
        "//packager:packager",
        "//namer:namer_test",
        "//main/options:options_test",
        "//main/lsp:lsp_test",
        "//main/lsp:lsp_preprocessor_test",
        "//main/lsp:lsp_file_updates_test",
        "//main/lsp:generate_lsp_messages_test",
        "//main/lsp:generate_lsp_messages",
        "//main/lsp:error_reporter_test",
        "//test/helpers:helpers",
        "//main:sorbet-orig",
        "//payload:text",
        "//payload/text:some",
        "//payload/binary:empty",
        "//main:sorbet",
        "//payload:payload",
        "//main:realmain-orig",
        "//main/pipeline:pipeline-orig",
        "//main/cache:cache-orig",
        "//infer:infer_test",
        "//emscripten:main",
        "//payload/text:empty",
        "//payload/binary:some",
        "//main/pipeline/semantic_extension:none",
        "//main:realmain",
        "//main/lsp:lsp",
        "//main/cache:cache",
        "//payload:interface",
        "//main/pipeline:pipeline",
        "//rewriter:rewriter",
        "//resolver:resolver",
        "//plugin:plugin",
        "//payload/text:text",
        "//payload/binary:binary",
        "//namer/configatron:configatron",
        "//namer:namer",
        "//local_vars:local_vars",
        "//infer:infer",
        "//main/autogen:autogen",
        "//main/options:options",
        "//third_party/licenses:licenses",
        "//definition_validator:definition_validator",
        "//core/serialize:serialize_test",
        "//core/serialize:serialize",
        "//core/proto:proto",
        "//proto/pay-server:pay-server",
        "//proto:proto",
        "//core:generate_names",
        "//core:core_test",
        "//common/web_tracer_framework:tracing",
        "//common/statsd:statsd",
        "//common/kvstore:kvstore_test",
        "//common/kvstore:kvstore",
        "//common/crypto_hashing:crypto_hashing",
        "//common:common_test",
        "//class_flatten:class_flatten",
        "//cfg/builder:builder",
        "//cfg:cfg",
        "//ast/substitute:substitute",
        "//ast/desugar:desugar_test",
        "//ast/desugar:desugar",
        "//parser:parser",
        "//third_party/parser:parser",
        "//third_party/parser:generate_diagnostics",
        "//ast/verifier:verifier",
        "//ast/treemap:treemap",
        "//ast:ast",
        "//core:core",
        "//main/pipeline/semantic_extension:interface",
        "//common/concurrency:concurrency",
        "//common:common",
        "//third_party/progressbar:progressbar",
        "//sorbet_version:sorbet_version",
        # END compile_commands targets
    ],
)
