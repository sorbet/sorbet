<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Flow-Sensitive Typing · Sorbet</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Sorbet implements a **control flow-sensitive** type system. It models control flow through a program and uses it to track the program&#x27;s types more accurately.[^control]"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Flow-Sensitive Typing · Sorbet"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sorbet.org/"/><meta property="og:description" content="Sorbet implements a **control flow-sensitive** type system. It models control flow through a program and uses it to track the program&#x27;s types more accurately.[^control]"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://sorbet.org/blog/atom.xml" title="Sorbet Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://sorbet.org/blog/feed.xml" title="Sorbet Blog RSS Feed"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5H7PQ9Z8KF"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'G-5H7PQ9Z8KF');
            </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/sorbet-logo-white-sparkles.svg" alt="Sorbet"/><h2 class="headerTitleWithLogo">Sorbet</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/adopting" target="_self">Get started</a></li><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Docs</a></li><li class=""><a href="https://sorbet.run" target="_self">Try</a></li><li class=""><a href="/en/community" target="_self">Community</a></li><li class=""><a href="https://github.com/sorbet/sorbet" target="_self">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Type System</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/adopting">Adopting Sorbet</a></li><li class="navListItem"><a class="navItem" href="/docs/metrics">Tracking Adoption</a></li><li class="navListItem"><a class="navItem" href="/docs/quickref">Quick Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/vscode">Visual Studio Code</a></li><li class="navListItem"><a class="navItem" href="/docs/from-typescript">TypeScript ↔ Sorbet</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Static &amp; Runtime</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/gradual">Gradual Type Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/static">Enabling Static Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/runtime">Enabling Runtime Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/rbi">RBI Files</a></li><li class="navListItem"><a class="navItem" href="/docs/cli">CLI Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/cli-ref">CLI Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/tconfiguration">Runtime Configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Troubleshooting</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/why-type-annotations">Why type annotations?</a></li><li class="navListItem"><a class="navItem" href="/docs/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/error-reference">Error Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/unsupported">Unsupported Ruby Features</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Type System</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/sigs">sig</a></li><li class="navListItem"><a class="navItem" href="/docs/type-annotations">Type Annotations (non-sig)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-assertions">T.let, T.cast, T.must, T.bind</a></li><li class="navListItem"><a class="navItem" href="/docs/class-types">Class Types (Integer, String)</a></li><li class="navListItem"><a class="navItem" href="/docs/stdlib-generics">Arrays &amp; Hashes</a></li><li class="navListItem"><a class="navItem" href="/docs/nilable-types">Nilable Types (T.nilable)</a></li><li class="navListItem"><a class="navItem" href="/docs/union-types">Union Types (T.any)</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/flow-sensitive">Flow-Sensitivity (is_a?, nil?)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-aliases">T.type_alias</a></li><li class="navListItem"><a class="navItem" href="/docs/exhaustiveness">Exhaustiveness (T.absurd)</a></li><li class="navListItem"><a class="navItem" href="/docs/tstruct">T::Struct</a></li><li class="navListItem"><a class="navItem" href="/docs/tenum">T::Enum</a></li><li class="navListItem"><a class="navItem" href="/docs/untyped">T.untyped</a></li><li class="navListItem"><a class="navItem" href="/docs/procs">Blocks, Procs, &amp; Lambdas</a></li><li class="navListItem"><a class="navItem" href="/docs/abstract">Abstract Classes &amp; Interfaces</a></li><li class="navListItem"><a class="navItem" href="/docs/final">Final Methods &amp; Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/override-checking">Override Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/sealed">Sealed Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/class-of">T.class_of</a></li><li class="navListItem"><a class="navItem" href="/docs/self-type">T.self_type</a></li><li class="navListItem"><a class="navItem" href="/docs/noreturn">T.noreturn</a></li><li class="navListItem"><a class="navItem" href="/docs/anything">T.anything</a></li><li class="navListItem"><a class="navItem" href="/docs/attached-class">T.attached_class</a></li><li class="navListItem"><a class="navItem" href="/docs/intersection-types">Intersection Types (T.all)</a></li><li class="navListItem"><a class="navItem" href="/docs/generics">Generics</a></li><li class="navListItem"><a class="navItem" href="/docs/non-forcing-constants">T::NonForcingConstants</a></li><li class="navListItem"><a class="navItem" href="/docs/strong">Banning untyped</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Editor Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/lsp">Language Server (LSP)</a></li><li class="navListItem"><a class="navItem" href="/docs/server-status">Server Status</a></li><li class="navListItem"><a class="navItem" href="/docs/lsp-typed-level">LSP &amp; Typed Level</a></li><li class="navListItem"><a class="navItem" href="/docs/go-to-def">Go to Definition</a></li><li class="navListItem"><a class="navItem" href="/docs/hover">Hover</a></li><li class="navListItem"><a class="navItem" href="/docs/autocompletion">Autocompletion</a></li><li class="navListItem"><a class="navItem" href="/docs/references">Find All References</a></li><li class="navListItem"><a class="navItem" href="/docs/code-actions">Code Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/outline">Outline &amp; Document Symbols</a></li><li class="navListItem"><a class="navItem" href="/docs/doc-comments">Documentation Comments</a></li><li class="navListItem"><a class="navItem" href="/docs/sig-suggestion">Suggesting sigs</a></li><li class="navListItem"><a class="navItem" href="/docs/highlight-untyped">Highlighting untyped</a></li><li class="navListItem"><a class="navItem" href="/docs/sorbet-uris">sorbet: URIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Experimental Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/tuples">Tuples</a></li><li class="navListItem"><a class="navItem" href="/docs/shapes">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/overloads">Overloads</a></li><li class="navListItem"><a class="navItem" href="/docs/requires-ancestor">Requiring Ancestors</a></li><li class="navListItem"><a class="navItem" href="/docs/rbs-support">RBS Comments</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/sorbet/sorbet/edit/master/website/docs/flow-sensitive.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Flow-Sensitive Typing</h1></header><article><div><span><p>Sorbet implements a <strong>control flow-sensitive</strong> type system. It models control flow through a program and uses it to track the program’s types more accurately.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end -->
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<pre><code class="hljs css language-ruby">extend T::Sig

sig { params(<span class="hljs-symbol">x:</span> T.nilable(String), <span class="hljs-symbol">default:</span> String).returns(String) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maybe</span><span class="hljs-params">(x, default)</span></span>
  <span class="hljs-comment"># (1) Outside the if, x is either nil or a String</span>
  T.reveal_type(x) <span class="hljs-comment"># =&gt; Revealed type: `T.nilable(String)`</span>

  <span class="hljs-keyword">if</span> x
    <span class="hljs-comment"># (2) At this point, Sorbet knows `x` is not nil</span>
    T.reveal_type(x) <span class="hljs-comment"># =&gt; Revealed type: `String`</span>

    x
  <span class="hljs-keyword">else</span>
    <span class="hljs-comment"># (3) In the else branch, Sorbet knows `x` must be nil</span>
    T.reveal_type(x) <span class="hljs-comment"># =&gt; Revealed type: `NilClass`</span>

    default
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, we ask Sorbet (<a href="/docs/troubleshooting">using T.reveal_type</a>) what the type of <code>x</code> is at three places, and get different answers each time:</p>
<ul>
<li>Outside the <code>if</code>, Sorbet only knows what the <code>sig</code> said about <code>x</code>.</li>
<li>In the <code>if</code> branch, Sorbet knows <code>x</code> is <strong>not</strong> <code>nil</code>.</li>
<li>In the <code>else</code> branch, Sorbet knows <code>x</code> <strong>must</strong> be <code>nil</code>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="predicates"></a><a href="#predicates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Predicates</h2>
<p>Sorbet bakes in knowledge of a bunch of Ruby constructs out of the box:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
extend T::Sig

sig { params(<span class="hljs-symbol">x:</span> Object).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">flow_sensitivity</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-comment"># (1) is_a?</span>
  <span class="hljs-keyword">if</span> x.is_a?(Integer)
    T.reveal_type(x) <span class="hljs-comment"># =&gt; Integer</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># (2) case expressions with Class#===</span>
  <span class="hljs-keyword">case</span> x
  <span class="hljs-keyword">when</span> Symbol
    T.reveal_type(x) <span class="hljs-comment"># =&gt; Symbol</span>
  <span class="hljs-keyword">when</span> String
    T.reveal_type(x) <span class="hljs-comment"># =&gt; String</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># (3) comparison on Class objects (&lt;)</span>
  <span class="hljs-keyword">if</span> x.is_a?(Class) &amp;&amp; x &lt; Integer
    T.reveal_type(x) <span class="hljs-comment"># =&gt; T.class_of(Integer)</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The complete list of constructs that affect Sorbet’s flow-sensitive typing:</p>
<ul>
<li><code>if</code> expressions / <code>case</code> expressions</li>
<li><code>is_a?</code> / <code>kind_of?</code> / <code>instance_of?</code> (check if an object is an instance of a specific class. Note that <code>instance_of?</code> checks that the class matches exactly while the others consult the inheritance chain)</li>
<li><code>nil?</code></li>
<li><code>blank?</code> / <code>present?</code> (these assume a Rails-compatible monkey patch on both <code>NilClass</code> and <code>Object</code>)</li>
<li><code>Module#===</code> (this is how <code>case</code> on a class object works)</li>
<li><code>Module#&lt;</code>, <code>Module#&lt;=</code> (like <code>is_a?</code>, but for class objects instead of instances of classes)</li>
<li>Negated conditions (including both <code>!</code> and <code>unless</code>)</li>
<li>Truthiness (everything but <code>nil</code> and <code>false</code> is truthy in Ruby)</li>
<li><code>block_given?</code> (internally, this is a special case of truthiness)</li>
</ul>
<blockquote>
<p><strong>Warning</strong>: Sorbet’s analysis for these constructs hinges on them not being overridden! For example, Sorbet can behave unpredictably when overriding <code>is_a?</code> in weird ways.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="what-about-respond_to"></a><a href="#what-about-respond_to" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What about <code>respond_to?</code>?</h2>
<p>Sorbet cannot support flow sensitivity for <code>respond_to?</code> in the way that most people expect.</p>
<p>For example:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">x:</span> Object).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">flow_sensitivity</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-comment"># Does not work:</span>
  <span class="hljs-keyword">if</span> x.respond_to?(<span class="hljs-symbol">:foo</span>)
    T.reveal_type(x) <span class="hljs-comment"># =&gt; Object</span>
    x.foo <span class="hljs-comment"># Method `foo` does not exist</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, knowing that <code>x</code> responds to a method with the name <code>foo</code> does not tell Sorbet anything more specific about the type for <code>x</code>. Sorbet does not have any sort of duck-typed interfaces that let Sorbet update its knowledge of the type of <code>x</code> to &quot;<code>Object</code> plus responds to <code>foo</code>&quot;, so it must keep the type of <code>x</code> at <code>Object</code>, which does not allow calling <code>foo</code>.</p>
<p>Note that even if Sorbet did support such a type, it’s likely that flow-sensitive type updates for <code>respond_to?</code> would <em>still</em> not be supported, because knowing that the method <code>foo</code> exists says nothing about what parameters that method expects, what their types are, or what the return type of that function is.</p>
<p>It’s possible that someday Sorbet could support a limited form of <code>x.respond_to?(:foo)</code> when one of the component types of <code>x</code> is a type which has a known method called <code>foo</code>. There is more information <a href="https://github.com/sorbet/sorbet/issues/3469">in this issue</a>, which details the implementation complexity and limitations involved in supporting such a feature.</p>
<p>Code making the most of Sorbet is best written to avoid needing to use <code>respond_to?</code>. Some alternatives include:</p>
<ul>
<li>Use <a href="/docs/union-types">union types</a> alongside one of the flow-sensitivity mechanisms that Sorbet already understands, like <code>is_a?</code> or <code>case</code></li>
<li>Use <a href="/docs/abstract">interface types</a> to require that a given interface method must exist.</li>
</ul>
<p>If using <code>respond_to?</code> is absolutely necessary, use <a href="/docs/troubleshooting#escape-hatches"><code>T.unsafe</code></a> to call the method after checking for its existence:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">x:</span> Object).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">flow_sensitivity</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-keyword">if</span> x.respond_to?(<span class="hljs-symbol">:foo</span>)
    <span class="hljs-comment"># T.unsafe silences all errors from this call site</span>
    T.unsafe(x).foo
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="flow-sensitivity-and-the-singleton-module"></a><a href="#flow-sensitivity-and-the-singleton-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Flow-sensitivity and the <code>Singleton</code> module</h2>
<p>Ruby has a module in the standard library called <a href="https://ruby-doc.org/stdlib-3.1.2/libdoc/singleton/rdoc/Singleton.html"><code>'singleton'</code></a>, which can be used to create a class that has exactly one instance. Sorbet has special support for flow-sensitivity on classes that include <code>Singleton</code> and also are marked <a href="/docs/final"><code>final!</code></a>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
extend T::Sig
<span class="hljs-keyword">require</span> <span class="hljs-string">'singleton'</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Unset</span></span>
  <span class="hljs-keyword">include</span> Singleton
  extend T::Helpers
  final!
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">x:</span> T.nilable(T.any(Unset, Integer))).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example1</span><span class="hljs-params">(<span class="hljs-symbol">x:</span> Unset.instance)</span></span>
  T.reveal_type(x) <span class="hljs-comment"># =&gt; `T.nilable(T.any(Unset, Integer))</span>

  <span class="hljs-comment"># `==` comparisons on Singleton types update the type in</span>
  <span class="hljs-comment"># both the `if` and the `else` case:</span>

  <span class="hljs-keyword">if</span> x == Unset.instance
    T.reveal_type(x) <span class="hljs-comment"># =&gt; `Unset`</span>
  <span class="hljs-keyword">else</span>
    T.reveal_type(x) <span class="hljs-comment"># =&gt; `T.nilable(Integer)`</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">x:</span> T.nilable(Integer)).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example2</span><span class="hljs-params">(<span class="hljs-symbol">x:</span> <span class="hljs-literal">nil</span>)</span></span>
  T.reveal_type(x) <span class="hljs-comment"># =&gt; `T.nilable(Integer)</span>
  <span class="hljs-keyword">if</span> x == <span class="hljs-number">0</span>
    <span class="hljs-comment"># All `==` comparisons on non-Singleton types only update</span>
    <span class="hljs-comment"># the type if the type test is true.</span>
    T.reveal_type(x) <span class="hljs-comment"># =&gt; `Integer`</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-comment"># When the `==` comparison above is false, the type of `x`</span>
    <span class="hljs-comment"># remains identical to what it was outside the `if`.</span>
    T.reveal_type(x) <span class="hljs-comment"># =&gt; `T.nilable(Integer)`</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0Arequire%20'singleton'%0A%0Aclass%20Unset%0A%20%20include%20Singleton%0A%20%20extend%20T%3A%3AHelpers%0A%20%20final!%0Aend%0A%0Asig%20%7Bparams%28x%3A%20T.nilable%28T.any%28Unset%2C%20Integer%29%29%29.void%7D%0Adef%20example1%28x%3A%20Unset.instance%29%0A%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28T.any%28Unset%2C%20Integer%29%29%0A%0A%20%20%23%20%60%3D%3D%60%20comparisons%20on%20Singleton%20types%20update%20the%20type%20in%0A%20%20%23%20both%20the%20%60if%60%20and%20the%20%60else%60%20case%3A%0A%0A%20%20if%20x%20%3D%3D%20Unset.instance%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60Unset%60%0A%20%20else%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28Integer%29%60%0A%20%20end%0Aend%0A%0Asig%20%7Bparams%28x%3A%20T.nilable%28Integer%29%29.void%7D%0Adef%20example2%28x%3A%20nil%29%0A%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28Integer%29%0A%20%20if%20x%20%3D%3D%200%0A%20%20%20%20%23%20All%20%60%3D%3D%60%20comparisons%20on%20non-Singleton%20types%20only%20update%0A%20%20%20%20%23%20the%20type%20if%20the%20type%20test%20is%20true.%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60Integer%60%0A%20%20else%0A%20%20%20%20%23%20When%20the%20%60%3D%3D%60%20comparison%20above%20is%20false%2C%20the%20type%20of%20%60x%60%0A%20%20%20%20%23%20remains%20identical%20to%20what%20it%20was%20outside%20the%20%60if%60.%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28Integer%29%60%0A%20%20end%0Aend">→ View on sorbet.run</a></p>
<p>As mentioned in the example above, normally <code>==</code> only gives additional, flow-sensitive information about the type of a variable in the case that the type test was truthy.</p>
<p>But as we see within the <code>example1</code> method above, using <code>==</code> on a <code>Singleton</code> value will allow Sorbet to update its knowledge about the type of <code>x</code> both when the <code>==</code> comparison is true and when it is false.</p>
<p>As seen shown in the example above, this technique can be useful to distinguish between cases when a possibly-<code>nil</code>, optional argument was explicitly passed at the call site and set to <code>nil</code>, or when a value was omitted at the call site and the default value of <code>Unset.instance</code> was used.</p>
<p>Note that using <code>final!</code> is required, as without it, the <code>==</code> comparison could return <code>true</code> in the presence of subclasses of <code>Singleton</code> classes.</p>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0Arequire%20'singleton'%0A%0Aclass%20Unset%0A%20%20include%20Singleton%0A%20%20extend%20T%3A%3AHelpers%0Aend%0A%0Aclass%20UnsetChild%20%3C%20Unset%3B%20end%0A%0Asig%20%7Bparams%28x%3A%20T.nilable%28T.any%28Unset%2C%20Integer%29%29%29.void%7D%0Adef%20example1%28x%3A%20Unset.instance%29%0A%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28T.any%28Unset%2C%20Integer%29%29%0A%0A%20%20if%20x%20%3D%3D%20Unset.instance%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60Unset%60%0A%20%20else%0A%20%20%20%20%23%20Can%20still%20reach%20here%20because%20any%20number%20of%20child%20classes%0A%20%20%20%20%23%20of%20%60Unset%60%20could%20also%20exist%2C%20so%20Sorbet%20has%20to%20think%20that%0A%20%20%20%20%23%20the%20type%20could%20still%20include%20%60Unset%60%0A%20%20%20%20T.reveal_type%28x%29%20%23%20%3D%3E%20%60T.nilable%28T.any%28Unset%2C%20Integer%29%29%0A%20%20end%0Aend%0A%0Aexample1%28x%3A%20UnsetChild.instance%29">→ Example of <code>Singleton</code> but not <code>final!</code></a></p>
<h2><a class="anchor" aria-hidden="true" id="limitations-of-flow-sensitivity"></a><a href="#limitations-of-flow-sensitivity" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations of flow-sensitivity</h2>
<p>An alternative title for this section: &quot;<em>Why does Sorbet think this is nil? I just checked that it’s not!</em>&quot;</p>
<p>Flow-sensitive type checking only works for local variables, not for values returned from method calls. Why? Sorbet can’t know that if a method is called twice in a row that it returns the same thing each time. Put another way, Sorbet never assumes that a method call is <strong>pure</strong>.</p>
<p>For example, consider that we have some method <code>maybe_int</code> which when called either returns an Integer or <code>nil</code>. This code doesn’t typecheck:</p>
<pre><code class="hljs css language-ruby">x = !maybe_int.<span class="hljs-literal">nil</span>? &amp;&amp; (<span class="hljs-number">2</span> * maybe_int)
</code></pre>
<p>This problem is subtle because <code>maybe_int</code> looks like a variable when it’s actually a method! Things become more clear if we rewrite that last line like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># This is the same as above:</span>
x = !maybe_int().<span class="hljs-literal">nil</span>? &amp;&amp; (<span class="hljs-number">2</span> * maybe_int())
</code></pre>
<p>Sorbet can’t know that two calls to <code>maybe_int</code> return identical things because, in general, methods are not pure. The solution is to store the result of the method call in a <strong>temporary variable</strong>:</p>
<pre><code class="hljs css language-ruby">tmp = maybe_int
y = !tmp.<span class="hljs-literal">nil</span>? &amp;&amp; (<span class="hljs-number">2</span> * tmp)
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7Breturns(T.nilable(Integer))%7D%0Adef%20maybe_int%3B%201%3B%20end%0A%0A%23%20Problem%3A%0Ax%20%3D%20!maybe_int.nil%3F%20%26%26%20(2%20*%20maybe_int)%0A%0A%23%20%5E%20this%20is%20essentially%3A%0A%23%20x%20%3D%20!maybe_int().nil%3F%20%26%26%20(2%20*%20maybe_int())%0A%0A%23%20Solution%3A%0Atmp%20%3D%20maybe_int%0Ay%20%3D%20!tmp.nil%3F%20%26%26%20(2%20*%20tmp)">→ View full example on sorbet.run</a></p>
<blockquote>
<p><strong>Note</strong>: Many Ruby constructs that look like local variables are actually method calls without parens! Specifically, watch out for <code>attr_reader</code> and zero-argument method definitions.</p>
</blockquote>
<p>Note that given Sorbet’s architecture, it’s not possible to implement some sort of annotation that would mark a method as “pure” or “constant,” declaring that a method always returns the same value across consecutive calls to the method (this also precludes special support for methods defined via <code>const</code> or <code>attr_reader</code>). For more information on why, see <a href="https://blog.jez.io/syntactic-control-flow/">this blog post</a> which explains that control flow in Sorbet is a syntactic property, not a semantic property (which could be influenced by semantic annotations like this).</p>
<h2><a class="anchor" aria-hidden="true" id="tips"></a><a href="#tips" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips</h2>
<p>These are some helpful tips for helping Sorbet track the types of expressions throughout a program.</p>
<h3><a class="anchor" aria-hidden="true" id="prefer-xscompact-to-xsrejectnil"></a><a href="#prefer-xscompact-to-xsrejectnil" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prefer <code>xs.compact</code> to <code>xs.reject(&amp;:nil?)</code></h3>
<p>Sorbet does not use the boolean predicate accepted by methods like <code>Array#select</code>, <code>Array#filter</code>, or <code>Array#reject</code> to infer a more narrow type about the element of the list.</p>
<p>To remove the <code>nil</code> values from an Array and have Sorbet understand that they are gone, use <code>Array#compact</code> instead:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">xs:</span> T::Array[T.nilable(Integer)]).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(xs)</span></span>
  ys = xs.reject(&amp;<span class="hljs-symbol">:nil?</span>)
  T.reveal_type(ys) <span class="hljs-comment"># &lt;- still nilable ❌</span>

  ys = xs.compact <span class="hljs-comment"># &lt;- non-nil ✅</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><a
href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7B%20params%28xs%3A%20T%3A%3AArray%5BT.nilable%28Integer%29%5D%29.void%20%7D%0Adef%20example%28xs%29%0A%20%20ys%20%3D%20xs.reject%28%26%3Anil%3F%29%0A%20%20T.reveal_type%28ys%29%20%23%20%3C-%20still%20nilable%20%E2%9D%8C%0A%0A%20%20ys%20%3D%20xs.compact%20%23%20%3C-%20non-nil%20%E2%9C%85%0Aend">View on sorbet.run</a></p>
<h3><a class="anchor" aria-hidden="true" id="prefer-xsgrepa-to-xsfilter--x-xis_aa-"></a><a href="#prefer-xsgrepa-to-xsfilter--x-xis_aa-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prefer <code>xs.grep(A)</code> to <code>xs.filter { |x| x.is_a?(A) }</code></h3>
<p>Sorbet does not use the boolean predicate accepted by methods like <code>Array#select</code>, <code>Array#filter</code>, or <code>Array#reject</code> to infer a more narrow type about the element of the list.</p>
<p>For the specific case of filtering a list using <code>is_a?</code>, prefer using <code>Enumerable#grep</code>:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">xs:</span> T::Array[T.any(Integer, String)]).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(xs)</span></span>
  ys = xs.select { <span class="hljs-params">|x|</span> x.is_a?(Integer) }
  T.reveal_type(ys) <span class="hljs-comment"># &lt;- not just Integer ❌</span>

  ys = xs.grep(Integer)
  T.reveal_type(ys) <span class="hljs-comment"># &lt;- only Integers ✅</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7B%20params%28xs%3A%20T%3A%3AArray%5BT.any%28Integer%2C%20String%29%5D%29.void%20%7D%0Adef%20example%28xs%29%0A%20%20ys%20%3D%20xs.select%20%7B%20%7Cx%7C%20x.is_a%3F%28Integer%29%20%7D%0A%20%20T.reveal_type%28ys%29%20%23%20%3C-%20not%20just%20Integer%20%E2%9D%8C%0A%0A%20%20ys%20%3D%20xs.grep%28Integer%29%0A%20%20T.reveal_type%28ys%29%20%23%20%3C-%20only%20Integers%20%E2%9C%85%0Aend">View on sorbet.run</a></p>
<p>Two gotchas:</p>
<ul>
<li>This requires the RBI definitions inside Sorbet 0.5.11388 or higher.</li>
<li>This only works for classes, not modules.</li>
</ul>
<p>If either of these gotchas apply, see the <code>filter_map</code> tip below.</p>
<h3><a class="anchor" aria-hidden="true" id="prefer-xsfilter_map----to-xsfilter---"></a><a href="#prefer-xsfilter_map----to-xsfilter---" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prefer <code>xs.filter_map { ... }</code> to <code>xs.filter { ... }</code></h3>
<p>Sorbet does not use the boolean predicate accepted by methods like <code>Array#select</code>, <code>Array#filter</code>, or <code>Array#reject</code> to infer a more narrow type about the element of the list.</p>
<p>For complicated flow-sensitive predicates (i.e., more than just checking for <code>nil?</code> or <code>is_a?</code>), use <code>Array#filter_map</code>. For example:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">xs:</span> T::Array[T.any(Integer, String)]).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(xs)</span></span>
  ys = xs.select { <span class="hljs-params">|x|</span> x.is_a?(Integer) &amp;&amp; x.even? }
  T.reveal_type(ys) <span class="hljs-comment"># &lt;- not just Integer ❌</span>

  ys = xs.filter_map { <span class="hljs-params">|x|</span> x <span class="hljs-keyword">if</span> x.is_a?(Integer) &amp;&amp; x.even? }
  T.reveal_type(ys) <span class="hljs-comment"># &lt;- only Integers ✅</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><a
href="https://sorbet.run/#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7B%20params%28xs%3A%20T%3A%3AArray%5BT.any%28Integer%2C%20String%29%5D%29.void%20%7D%0Adef%20example%28xs%29%0A%20%20ys%20%3D%20xs.select%20%7B%20%7Cx%7C%20x.is_a%3F%28Integer%29%20%7D%0A%20%20T.reveal_type%28ys%29%20%23%20%3C-%20not%20just%20Integer%20%E2%9D%8C%0A%0A%20%20ys%20%3D%20xs.filter_map%20%7B%20%7Cx%7C%20x%20if%20x.is_a%3F%28Integer%29%20%7D%0A%20%20T.reveal_type%28ys%29%20%23%20%3C-%20only%20integers%20%E2%9C%85%0Aend">View on sorbet.run</a></p>
<p><code>Array#filter_map</code> removes any element for which the filter returns a falsy value. If the value is truthy, the value at that index is mapped to the new, truthy value. The <code>x if x.is_a?(Integer)</code> evaluates to <code>x</code> (an <code>Integer</code>, thus always truthy) if it’s an Integer, or implicitly returns <code>nil</code> (which is falsy) if it’s a String.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1"  class="footnote-item"><p>We abbreviate “control flow-sensitive” to “flow-sensitive”
throughout these docs, because Sorbet does little to no <em>data flow analysis</em>.
(Data flow analysis is a separate family of techniques that models the way data
flows between variables in a program.) <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/union-types"><span class="arrow-prev">← </span><span>Union Types (T.any)</span></a><a class="docs-next button" href="/docs/type-aliases"><span>T.type_alias</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#example">Example</a></li><li><a href="#predicates">Predicates</a></li><li><a href="#what-about-respond_to">What about <code>respond_to?</code>?</a></li><li><a href="#flow-sensitivity-and-the-singleton-module">Flow-sensitivity and the <code>Singleton</code> module</a></li><li><a href="#limitations-of-flow-sensitivity">Limitations of flow-sensitivity</a></li><li><a href="#tips">Tips</a><ul class="toc-headings"><li><a href="#prefer-xscompact-to-xsrejectnil">Prefer <code>xs.compact</code> to <code>xs.reject(&amp;:nil?)</code></a></li><li><a href="#prefer-xsgrepa-to-xsfilter--x-xis_aa-">Prefer <code>xs.grep(A)</code> to <code>xs.filter { |x| x.is_a?(A) }</code></a></li><li><a href="#prefer-xsfilter_map----to-xsfilter---">Prefer <code>xs.filter_map { ... }</code> to <code>xs.filter { ... }</code></a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="wrapper"><p class="footer"><svg width="99" height="28" viewBox="0 0 99 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.98432 20H6.27432C8.44932 20 9.81432 18.905 9.81432 17.03C9.81432 15.665 9.00432 14.72 7.78932 14.39C8.61432 14.105 9.45432 13.415 9.45432 12.035C9.45432 10.235 8.23932 9.23 5.95932 9.23H1.98432V20ZM3.37932 13.85V10.445H5.83932C7.27932 10.445 8.07432 11 8.07432 12.155C8.07432 13.295 7.27932 13.85 5.83932 13.85H3.37932ZM3.37932 15.08H6.21432C7.65432 15.08 8.43432 15.83 8.43432 16.925C8.43432 18.035 7.65432 18.785 6.21432 18.785H3.37932V15.08ZM18.0294 12.155H16.6794V16.88C16.6794 18.185 15.6894 18.92 14.7144 18.92C13.5594 18.92 13.0794 18.17 13.0794 17.06V12.155H11.7294V17.345C11.7294 19.01 12.6744 20.165 14.3544 20.165C15.4644 20.165 16.2294 19.58 16.6794 18.92V20H18.0294V12.155ZM20.5112 10.79H21.9812V9.23H20.5112V10.79ZM21.9212 12.155H20.5712V20H21.9212V12.155ZM25.8247 9.23H24.4747V20H25.8247V9.23ZM28.5882 18.125C28.5882 19.625 29.3532 20.075 30.6882 20.075C31.1382 20.075 31.5282 20.03 31.8732 19.955V18.8C31.5582 18.875 31.3332 18.89 31.0182 18.89C30.3282 18.89 29.9232 18.74 29.9232 17.915V13.31H31.7082V12.155H29.9232V9.86H28.5882V12.155H27.3732V13.31H28.5882V18.125ZM41.0199 20.165C43.1949 20.165 44.4399 18.305 44.4399 16.085C44.4399 13.85 43.1949 12.005 41.0199 12.005C39.9249 12.005 39.0549 12.53 38.5899 13.295V9.23H37.2399V20H38.5899V18.86C39.0549 19.64 39.9249 20.165 41.0199 20.165ZM38.5599 15.815C38.5599 13.985 39.6699 13.19 40.7799 13.19C42.2499 13.19 43.0749 14.39 43.0749 16.085C43.0749 17.765 42.2499 18.98 40.7799 18.98C39.6699 18.98 38.5599 18.17 38.5599 16.37V15.815ZM49.1804 20.855L52.5554 12.155H51.1454L48.9704 18.155L46.7654 12.155H45.3404L48.2504 19.715L47.8754 20.645C47.5604 21.425 47.2454 21.635 46.6604 21.635C46.4354 21.635 46.2704 21.62 46.0154 21.56V22.73C46.2554 22.775 46.4204 22.79 46.7504 22.79C48.1154 22.79 48.7304 22.04 49.1804 20.855Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M98.7993 15.7838C98.7993 12.8786 97.3871 10.5862 94.688 10.5862C91.9774 10.5862 90.3374 12.8786 90.3374 15.7611C90.3374 19.177 92.2735 20.9019 95.0524 20.9019C96.4077 20.9019 97.4327 20.5955 98.2071 20.1643V17.8946C97.4327 18.2804 96.5443 18.5188 95.4168 18.5188C94.3121 18.5188 93.3327 18.1329 93.2074 16.7938H98.7766C98.7766 16.6463 98.7993 16.0561 98.7993 15.7838ZM93.1732 14.7057C93.1732 13.4233 93.9591 12.8899 94.6766 12.8899C95.3713 12.8899 96.1116 13.4233 96.1116 14.7057H93.1732Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M85.9413 10.5862C84.8251 10.5862 84.1076 11.1082 83.709 11.4714L83.561 10.7678H81.0554V24.0001L83.9026 23.3986L83.914 20.187C84.324 20.482 84.9276 20.9019 85.9299 20.9019C87.9685 20.9019 89.8249 19.2678 89.8249 15.6703C89.8135 12.3792 87.9343 10.5862 85.9413 10.5862ZM85.2579 18.4053C84.586 18.4053 84.1874 18.167 83.914 17.8719L83.9026 13.6616C84.1988 13.3325 84.6088 13.1055 85.2579 13.1055C86.2943 13.1055 87.0118 14.2631 87.0118 15.7497C87.0118 17.2704 86.3057 18.4053 85.2579 18.4053Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M77.1377 9.91656L79.9963 9.30374V7L77.1377 7.60147V9.91656Z" fill="white"></path><path d="M79.9963 10.7791H77.1377V20.709H79.9963V10.7791Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M74.074 11.6187L73.8918 10.7789H71.4318V20.7088H74.279V13.9792C74.9509 13.1054 76.0898 13.2642 76.4429 13.3891V10.7789C76.0784 10.6427 74.7459 10.3931 74.074 11.6187Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M68.3796 8.31641L65.6007 8.90653L65.5894 17.9966C65.5894 19.6762 66.8535 20.9132 68.5391 20.9132C69.473 20.9132 70.1563 20.743 70.5321 20.5387V18.235C70.1677 18.3825 68.3682 18.9045 68.3682 17.225V13.1962H70.5321V10.779H68.3682L68.3796 8.31641Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M60.6807 13.6616C60.6807 13.219 61.0452 13.0488 61.6488 13.0488C62.5143 13.0488 63.6076 13.3098 64.4732 13.7751V11.1082C63.5279 10.7337 62.594 10.5862 61.6488 10.5862C59.3368 10.5862 57.7993 11.7891 57.7993 13.7978C57.7993 16.93 62.1271 16.4306 62.1271 17.7811C62.1271 18.3031 61.6715 18.4734 61.0338 18.4734C60.0885 18.4734 58.8813 18.0875 57.9246 17.5655V20.2664C58.9838 20.7204 60.0543 20.9133 61.0338 20.9133C63.4026 20.9133 65.0313 19.7444 65.0313 17.713C65.0199 14.3312 60.6807 14.9326 60.6807 13.6616Z" fill="white"></path></svg><a href="/docs/adopting">Get started</a> · <a href="/docs/overview">Docs</a> · <a href="https://sorbet.run">Try</a> · <a href="/en/community">Community</a> · <a href="/blog">Blog</a> · <a href="https://twitter.com/sorbet_ruby">Twitter</a></p></div><div id="csat-extension-config" data-notify="#sorbet-team"></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'ZYWC6Z01G8',
                apiKey: 'b05a65e9f8d9f50dc4ec3241db8836c4',
                indexName: 'stripe_sorbet',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>