<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Sorbet Error Reference · Sorbet</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;style&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Sorbet Error Reference · Sorbet"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sorbet.org/"/><meta property="og:description" content="&lt;style&gt;"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://sorbet.org/blog/atom.xml" title="Sorbet Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://sorbet.org/blog/feed.xml" title="Sorbet Blog RSS Feed"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5H7PQ9Z8KF"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'G-5H7PQ9Z8KF');
            </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/sorbet-logo-white-sparkles.svg" alt="Sorbet"/><h2 class="headerTitleWithLogo">Sorbet</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/adopting" target="_self">Get started</a></li><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Docs</a></li><li class=""><a href="https://sorbet.run" target="_self">Try</a></li><li class=""><a href="/en/community" target="_self">Community</a></li><li class=""><a href="https://github.com/sorbet/sorbet" target="_self">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Troubleshooting</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/adopting">Adopting Sorbet</a></li><li class="navListItem"><a class="navItem" href="/docs/metrics">Tracking Adoption</a></li><li class="navListItem"><a class="navItem" href="/docs/quickref">Quick Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/vscode">Visual Studio Code</a></li><li class="navListItem"><a class="navItem" href="/docs/from-typescript">TypeScript ↔ Sorbet</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Static &amp; Runtime</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/gradual">Gradual Type Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/static">Enabling Static Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/runtime">Enabling Runtime Checks</a></li><li class="navListItem"><a class="navItem" href="/docs/rbi">RBI Files</a></li><li class="navListItem"><a class="navItem" href="/docs/cli">CLI Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/cli-ref">CLI Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/tconfiguration">Runtime Configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Troubleshooting</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/why-type-annotations">Why type annotations?</a></li><li class="navListItem"><a class="navItem" href="/docs/faq">FAQ</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/error-reference">Error Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/unsupported">Unsupported Ruby Features</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Type System</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/sigs">sig</a></li><li class="navListItem"><a class="navItem" href="/docs/type-annotations">Type Annotations (non-sig)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-assertions">T.let, T.cast, T.must, T.bind</a></li><li class="navListItem"><a class="navItem" href="/docs/class-types">Class Types (Integer, String)</a></li><li class="navListItem"><a class="navItem" href="/docs/stdlib-generics">Arrays &amp; Hashes</a></li><li class="navListItem"><a class="navItem" href="/docs/nilable-types">Nilable Types (T.nilable)</a></li><li class="navListItem"><a class="navItem" href="/docs/union-types">Union Types (T.any)</a></li><li class="navListItem"><a class="navItem" href="/docs/flow-sensitive">Flow-Sensitivity (is_a?, nil?)</a></li><li class="navListItem"><a class="navItem" href="/docs/type-aliases">T.type_alias</a></li><li class="navListItem"><a class="navItem" href="/docs/exhaustiveness">Exhaustiveness (T.absurd)</a></li><li class="navListItem"><a class="navItem" href="/docs/tstruct">T::Struct</a></li><li class="navListItem"><a class="navItem" href="/docs/tenum">T::Enum</a></li><li class="navListItem"><a class="navItem" href="/docs/untyped">T.untyped</a></li><li class="navListItem"><a class="navItem" href="/docs/procs">Blocks, Procs, &amp; Lambdas</a></li><li class="navListItem"><a class="navItem" href="/docs/abstract">Abstract Classes &amp; Interfaces</a></li><li class="navListItem"><a class="navItem" href="/docs/final">Final Methods &amp; Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/override-checking">Override Checking</a></li><li class="navListItem"><a class="navItem" href="/docs/sealed">Sealed Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/class-of">T.class_of</a></li><li class="navListItem"><a class="navItem" href="/docs/self-type">T.self_type</a></li><li class="navListItem"><a class="navItem" href="/docs/noreturn">T.noreturn</a></li><li class="navListItem"><a class="navItem" href="/docs/anything">T.anything</a></li><li class="navListItem"><a class="navItem" href="/docs/attached-class">T.attached_class</a></li><li class="navListItem"><a class="navItem" href="/docs/intersection-types">Intersection Types (T.all)</a></li><li class="navListItem"><a class="navItem" href="/docs/generics">Generics</a></li><li class="navListItem"><a class="navItem" href="/docs/non-forcing-constants">T::NonForcingConstants</a></li><li class="navListItem"><a class="navItem" href="/docs/strong">Banning untyped</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ruby &amp; DSL Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/attr_reader">attr_reader</a></li><li class="navListItem"><a class="navItem" href="/docs/minitest">minitest</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Editor Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/lsp">Language Server (LSP)</a></li><li class="navListItem"><a class="navItem" href="/docs/server-status">Server Status</a></li><li class="navListItem"><a class="navItem" href="/docs/lsp-typed-level">LSP &amp; Typed Level</a></li><li class="navListItem"><a class="navItem" href="/docs/go-to-def">Go to Definition</a></li><li class="navListItem"><a class="navItem" href="/docs/hover">Hover</a></li><li class="navListItem"><a class="navItem" href="/docs/autocompletion">Autocompletion</a></li><li class="navListItem"><a class="navItem" href="/docs/references">Find All References</a></li><li class="navListItem"><a class="navItem" href="/docs/code-actions">Code Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/outline">Outline &amp; Document Symbols</a></li><li class="navListItem"><a class="navItem" href="/docs/doc-comments">Documentation Comments</a></li><li class="navListItem"><a class="navItem" href="/docs/sig-suggestion">Suggesting sigs</a></li><li class="navListItem"><a class="navItem" href="/docs/highlight-untyped">Highlighting untyped</a></li><li class="navListItem"><a class="navItem" href="/docs/sorbet-uris">sorbet: URIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Experimental Features</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/tuples">Tuples</a></li><li class="navListItem"><a class="navItem" href="/docs/shapes">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/overloads">Overloads</a></li><li class="navListItem"><a class="navItem" href="/docs/requires-ancestor">Requiring Ancestors</a></li><li class="navListItem"><a class="navItem" href="/docs/rbs-support">RBS Comments</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/sorbet/sorbet/edit/master/website/docs/error-reference.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Sorbet Error Reference</h1></header><article><div><span><style>
#missing-doc-for-error-code-box.is-hidden {
  display: none;
}
</style>
<div class="is-hidden red" id="missing-doc-for-error-code-box">
<p><a class="anchor" aria-hidden="true" id="missing-doc-for-error-code-scroll"></a></p>
<blockquote>
<p><strong>Heads up</strong>: There aren’t any docs yet for <span id="missing-error-code">this error code</span>. If you have suggestions for what would have helped you solve this problem, click the “Edit” button above to contribute! Otherwise, try using the search above to find an answer.</p>
</blockquote>
</div>
<p>This is one of three docs aimed at helping answer common questions about Sorbet:</p>
<ol>
<li><a href="/docs/troubleshooting">Troubleshooting</a></li>
<li><a href="/docs/faq">Frequently Asked Questions</a></li>
<li><a href="/docs/error-reference">Sorbet Error Reference</a> (this doc)</li>
</ol>
<p>This page contains tips and tricks for common errors from Sorbet.</p>
<h2><a class="anchor" aria-hidden="true" id="1001"></a><a href="#1001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1001</h2>
<p>Sorbet has crashed. Please <a href="https://github.com/sorbet/sorbet/issues">report an issue</a>!</p>
<h2><a class="anchor" aria-hidden="true" id="1003"></a><a href="#1003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1003</h2>
<p>Sorbet has an internal limitation on how deep a chain of class aliases can be:</p>
<pre><code class="hljs css language-ruby">A1 = Integer
A2 = A1
<span class="hljs-comment"># ...</span>
A42 = A41
A43 = A42 <span class="hljs-comment"># error: Too many alias expansions</span>
</code></pre>
<p>It’s meant to guard against cases where Sorbet might get stuck in an infinite loop attempting to dealias these class aliases.</p>
<p>If you encounter this bug in the wild (i.e., not just for a contrived example, but a real-world use case), please share with the Sorbet team. We’d like to see what mode of use triggered this behavior, and either add a test to Sorbet or tweak how Sorbet works to support the use case.</p>
<h2><a class="anchor" aria-hidden="true" id="1004"></a><a href="#1004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1004</h2>
<p>Sorbet couldn’t find a file.</p>
<h2><a class="anchor" aria-hidden="true" id="2001"></a><a href="#2001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2001</h2>
<p>There was a Ruby syntax error. Sorbet was unable to parse the source code. If you encounter this error but your code is accepted by Ruby itself, this is a bug in our parser; please <a href="https://github.com/sorbet/sorbet/issues">report an issue</a> to us so we can address it.</p>
<p>The only intentional break with the Ruby grammar is that method names that are keywords have some limitations with multi-line code, as explained in <a href="/docs/unsupported#multi-line-calls-to-to-keyword-named-methods-with-trailing-">Unsupported Ruby Features</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="2002"></a><a href="#2002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2002</h2>
<p>Starting in Ruby 3.0, Ruby uses the <code>_1</code>, <code>_2</code>, etc. syntax for block arguments:</p>
<pre><code class="hljs css language-ruby">xs.map {_1.to_s}

<span class="hljs-comment"># ^ this is equivalent to:</span>

xs.map { <span class="hljs-params">|x|</span> x.to_s }
</code></pre>
<p>Because of this, <code>_1</code> and similar variables are not allowed as normal variable names. Pick another variable name, for example: <code>_x1</code> or <code>_arg1</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="2003"></a><a href="#2003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2003</h2>
<p>If you’re seeing this error code, it means that Sorbet already emitted a parse error for the file, but found some extra information that might help point out the root cause of a syntax error. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    <span class="hljs-keyword">if</span> x
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This Ruby snippet does not parse, but the reason why is confusing. Because Ruby does not care about indentation, it will try to consune <code>end</code> keywords eagerly if there is something available to match. In this example, the first <code>end</code> matches with <code>if</code> and the second matches with <code>def</code> and so Sorbet will report <code>unexpected token &quot;end of file&quot;</code> because the <code>class A</code> definition was not matched with an <code>end</code> token.</p>
<p>But given the indentation structure present in the original program, it’s more likely that the <code>if x</code> statement is unclosed. Thus, in some cases, Sorbet will provide extra “Hint:” diagnostics that point out things that might be the root cause.</p>
<p>It’s important to note that <strong>these hints are imperfect</strong>—fixing them might not actually fix the real parse error. Instead, they’re provided as a way to help recover from the real parse error.</p>
<p>As with all Sorbet error messages, if one of these hint error messages is confusing or misleading, please <a href="https://github.com/sorbet/sorbet/issues">report an issue</a> to let us know.</p>
<h2><a class="anchor" aria-hidden="true" id="2004"></a><a href="#2004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2004</h2>
<p>Starting in Ruby 3.0, Ruby uses the <code>_1</code>, <code>_2</code>, etc. syntax for block arguments:</p>
<pre><code class="hljs css language-ruby">xs.map {_1.to_s}

<span class="hljs-comment"># ^ this is equivalent to:</span>

xs.map { <span class="hljs-params">|x|</span> x.to_s }
</code></pre>
<p>Because of this, <code>_1</code> and similar variables are not allowed as normal variable names. Pick another variable name, for example: <code>_x1</code> or <code>_arg1</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3001"></a><a href="#3001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3001</h2>
<p>Sorbet doesn’t support singleton definitions outside of the class itself:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> &lt;&lt; MyClass <span class="hljs-comment"># error: `class &lt;&lt; EXPRESSION` is only supported for `class &lt;&lt; self`</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The workaround is to move the definition inside the <code>MyClass</code> class itself:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> &lt;&lt; self</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
      <span class="hljs-comment"># ...</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Sometimes, <code>EXPRESSION</code> is not a constant literal like in what follows:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> &lt;&lt; some_variable</span>
  <span class="hljs-keyword">include</span> Foo
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case, it is possible to directly call <code>include</code> on the the singleton class of <code>EXPRESSION</code>, but it should be done with <strong>utmost caution</strong>, as Sorbet will not consider the include and provide a less accurate analysis (see also <a href="#4002">#4002</a>):</p>
<pre><code class="hljs css language-rb">some_variable.singleton_class.<span class="hljs-keyword">include</span>(Foo)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3002"></a><a href="#3002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3002</h2>
<p>Sorbet is limited to C++ <code>INT_MAX</code>:</p>
<pre><code class="hljs css language-rb">puts <span class="hljs-number">11377327221391349843</span> + <span class="hljs-number">1</span> <span class="hljs-comment"># error: Unsupported integer literal: 11377327221391349843</span>
</code></pre>
<p>A possible workaround is to use a string and <code>to_i</code>:</p>
<pre><code class="hljs css language-rb">puts <span class="hljs-string">"11377327221391349843"</span>.to_i + <span class="hljs-number">1</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3003"></a><a href="#3003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3003</h2>
<p>Sorbet does not support certain Ruby features, like the flip flop operator and the <code>redo</code> keyword. If you feel strongly that Sorbet support these features, please open an issue.</p>
<p>Unfortunately, there is no workaround for this issue other than asking Sorbet to ignore the file (which forces the <em>entire</em> file to be ignored, including any methods and constants defined in it), or rewriting the file to not use the unsupported Ruby feature.</p>
<p>If you do decide to ignore the file entirely, you will likely need to use an <a href="/docs/rbi">RBI file</a> to let Sorbet know about any classes and methods defined in the ignored file.</p>
<h2><a class="anchor" aria-hidden="true" id="3004"></a><a href="#3004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3004</h2>
<p>There was an error parsing a float literal in Sorbet. Specifically, we asked a C++ library to parse a Ruby float literal string to a float, and it returned a <code>NaN</code> value.</p>
<p>If you are seeing this error, it likely represents a bug in Sorbet. Please report an issue at <a href="https://github.com/sorbet/sorbet/issues">https://github.com/sorbet/sorbet/issues</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="3005"></a><a href="#3005" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3005</h2>
<p>Sorbet does not support using operators like <code>&amp;&amp;=</code> or <code>||=</code> when the target of the operator is a constant literal.</p>
<p>Note that Ruby itself will report a warning for such usage:</p>
<pre><code class="hljs css language-ruby">A = <span class="hljs-literal">nil</span>
A <span class="hljs-params">||</span>= <span class="hljs-number">1</span>
<span class="hljs-comment"># =&gt; warning: already initialized constant A</span>
</code></pre>
<p>If you absolutely must reassign a constant using the current value of the constant, rewrite the code to use <code>const_defined?</code> and <code>const_set</code>:</p>
<pre><code class="hljs css language-ruby">A = <span class="hljs-literal">nil</span>
<span class="hljs-keyword">unless</span> Object.const_defined?(<span class="hljs-symbol">:A</span>) &amp;&amp; A
  Object.const_set(<span class="hljs-symbol">:A</span>, <span class="hljs-number">1</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3007"></a><a href="#3007" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3007</h2>
<p>Using <code>yield</code> in a method body means that a method implicitly takes a block argument. In <code># typed: strict</code> files, such methods are required to explicitly name the block argument to make the contract clear:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(&amp;blk)</span></span>
  <span class="hljs-keyword">yield</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This is required even if the block is only ever used by way of <code>yield</code>, and never with something like <code>blk.call</code>.</p>
<p><strong>Why?</strong> The distinguishing factor of <code># typed: strict</code> is that every method has an explicit interface with a signature. It’s equally important to be explicit about the block argument, if present. For more, see the docs on <a href="/docs/static#file-level-granularity-strictness-levels">strictness levels</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="3008"></a><a href="#3008" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3008</h2>
<p>Sorbet does not support the <code>undef</code> keyword. Sorbet assumes that the set of all classes, modules, methods, and constants is static throughout the lifetime of a program. It does not attempt to model the way that a Ruby program might mutate itself by deleting constants or methods at runtime.</p>
<p>For this reason, the <code>undef</code> node is not supported.</p>
<p>Currently, this error is only reported at <code># typed: strict</code> or higher, though in the future this might move to lower strictness levels. It does mean that currently it’s possible to silence this error by downgrading the file containing the <code>undef</code> to <code># typed: true</code> or lower.</p>
<p>Note that regardless of whether Sorbet reports an error for using <code>undef</code>, it has no meaning on what Sorbet considers to be defined or not defined. Sorbet will not report errors for calls to a method that doesn’t exist because it has been undefined.</p>
<h2><a class="anchor" aria-hidden="true" id="3009"></a><a href="#3009" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3009</h2>
<p>Sorbet does not support certain kinds of complicated block parameter destructuring patterns. In most cases, it is possible to rewrite these to use destructuring assignments inside the block itself:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ----- BAD -----</span>

xs = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">42</span>]
xs.<span class="hljs-keyword">then</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|(x, *args), y|</span>
  <span class="hljs-comment">#             ^^^^^ error: Unsupported rest args in destructure</span>
  p x    <span class="hljs-comment"># =&gt; 0</span>
  p args <span class="hljs-comment"># =&gt; [1, 2, 3]</span>
  p y    <span class="hljs-comment"># =&gt; 42</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># ----- Use this instead -----</span>

xs.<span class="hljs-keyword">then</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|arg0, y|</span>
  x, *args = arg<span class="hljs-number">0</span>

  p x     <span class="hljs-comment"># =&gt; 0</span>
  p args  <span class="hljs-comment"># =&gt; [1, 2, 3]</span>
  p y     <span class="hljs-comment"># =&gt; 42</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3010"></a><a href="#3010" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3010</h2>
<p>Methods defined in <a href="/docs/rbi">RBI files</a> are not allowed to have code in their bodies.</p>
<p>The only exception is for instance variable assignments (like <code>@x = ...</code>), which are allowed so that RBI files may declare the existence of instance variables and their types.</p>
<h2><a class="anchor" aria-hidden="true" id="3011"></a><a href="#3011" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3011</h2>
<p>There was a Hash literal with duplicated keys.</p>
<pre><code class="hljs css language-ruby">{<span class="hljs-symbol">my_key:</span> <span class="hljs-number">1</span>, <span class="hljs-symbol">my_key:</span> <span class="hljs-number">2</span>} <span class="hljs-comment"># error: `my_key` is duplicated</span>
</code></pre>
<p>This error can also be caused when trying to write a <code>sig</code> for a method with duplicated parameter names:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">_:</span> String, <span class="hljs-symbol">_:</span> Integer).void } <span class="hljs-comment"># error: `_` is duplicated</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-number">_</span>, <span class="hljs-number">_</span>)</span></span>; <span class="hljs-keyword">end</span>
</code></pre>
<p>To write a <code>sig</code> for this method, rename the method’s parameters to have unique names:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">_a:</span> String, <span class="hljs-symbol">_b:</span> Integer).void } <span class="hljs-comment"># ok</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(_a, _b)</span></span>; <span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3012"></a><a href="#3012" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3012</h2>
<p>There was an anonymous rest argument defined in the block parameter list.</p>
<pre><code class="hljs css language-ruby">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].each <span class="hljs-keyword">do</span> <span class="hljs-params">|*|</span>
  T.unsafe(<span class="hljs-keyword">self</span>).p(*)
<span class="hljs-keyword">end</span>
</code></pre>
<p>The anonymous rest argument may only refer to method parameters, and uses of it will generate runtime syntax errors if it’s used in the context of a block that defines it. This can be resolved by naming the rest argument parameter in the block:</p>
<pre><code class="hljs css language-ruby">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].each <span class="hljs-keyword">do</span> <span class="hljs-params">|*args|</span>
  T.unsafe(<span class="hljs-keyword">self</span>).p(*args)
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3501"></a><a href="#3501" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3501</h2>
<p>Sorbet has special support for understanding Ruby’s <code>attr_reader</code>, <code>attr_writer</code>, and <code>attr_accessor</code> methods. For this support to work, it must be able to see the name of the attribute <strong>syntactically</strong>, which means that the argument must be a <code>String</code> or <code>Symbol</code> literal.</p>
<p>If you are attempting to dynamically compute the name of an <code>attr_*</code> method, you must either:</p>
<ol>
<li>Downgrade the file to <code># typed: false</code>, or</li>
<li>Hide <code>attr_*</code> method call from Sorbet by using something like <code>public_send(:attr_reader, name)</code> (instead of <code>attr_reader name</code>)</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="3502"></a><a href="#3502" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3502</h2>
<p><code>T::InterfaceWrapper</code> is deprecated and should not be used.</p>
<h2><a class="anchor" aria-hidden="true" id="3503"></a><a href="#3503" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3503</h2>
<p>Ruby has separate syntax for marking instance methods and singleton class methods private:</p>
<pre><code class="hljs css language-ruby">private <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_instance_method</span>;</span> <span class="hljs-keyword">end</span>
private_class_method <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">some_singleton_class_method</span>;</span> <span class="hljs-keyword">end</span>
</code></pre>
<p>Note that the <code>self.</code> keyword in the method declaration changes the method from being an instance method to being a class method. In Ruby this <code>self.</code> prefix is similar to the <code>static</code> keyword on method definitions in languages like C++ or Java.</p>
<h2><a class="anchor" aria-hidden="true" id="3504"></a><a href="#3504" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3504</h2>
<p>The signature of an <code>attr_reader</code>, <code>attr_writer</code>, or <code>attr_accessor</code> method cannot have any <code>T.type_parameter</code> in it.</p>
<p>These methods get and set instance variables on the underlying class, while the <code>T.type_parameter</code> in the signature would only be in method scope.</p>
<h2><a class="anchor" aria-hidden="true" id="3505"></a><a href="#3505" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3505</h2>
<p>The <code>module_function</code> helper declares that an instance method on a module should be duplicated onto the class’s singleton class.</p>
<p>The <code>module_function</code> must be given an argument that is <strong>syntactically</strong> either:</p>
<ul>
<li>a method def</li>
<li>a <code>String</code> or <code>Symbol</code> literal with the name of a method</li>
</ul>
<p>This argument must be provided syntactically because Sorbet has special handling for <code>module_function</code>, and this special logic must be able to see the exact name of the method that is being defined via <code>module_function</code>.</p>
<p>To silence this error, either:</p>
<ul>
<li>Refactor the code to use <code>module_function</code> with only calls to method definitions or literals, or</li>
<li>Downgrade the file to <code># typed: false</code> or lower, or</li>
<li>Use <code>send(:module_function, ...)</code> to hide the call to <code>module_function</code> from Sorbet.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="3506"></a><a href="#3506" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3506</h2>
<p>Enums declared with <code>T::Enum</code> are special. A <code>T::Enum</code> must have all of its enum values defined in the <code>enums do</code> block inside an enum, and it’s not allowed to have any extra constants defined on the class (i.e., constants that don’t hold values of the enum).</p>
<p><strong>Why?</strong> Consistency, readability, and simplicity of implementation at runtime.</p>
<p>This includes type aliases. If you’d like to define a type alias consisting of a set of enum values, the type alias must be declared outside of the <code>T::Enum</code> subclass itself.</p>
<p>Note that enums can still have instance variables and methods defined on them. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Direction</span> &lt; T::Enum</span>
  enums <span class="hljs-keyword">do</span>
    Up = new
    Down = new
    Left = new
    Right = new
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">vertical</span></span>
    @vertical <span class="hljs-params">||</span>= [Up, Down].freeze
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3507"></a><a href="#3507" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3507</h2>
<p>The syntax for <code>test_each</code> looks like this:</p>
<pre><code class="hljs css language-ruby">test_each([<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>]) <span class="hljs-keyword">do</span> <span class="hljs-params">|x|</span>
  it <span class="hljs-string">'test'</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>For more examples of valid syntax, <a href="https://github.com/sorbet/sorbet/blob/master/test/testdata/rewriter/minitest_tables.rb">see the tests</a>, and <a href="https://github.com/sorbet/sorbet/blob/master/test/testdata/rewriter/test_each_describe.rb">another test, with describe</a>.</p>
<p>There are some limitations on how <code>test_each</code> can be used:</p>
<p>The block given to <code>test_each</code> must accept at least one argument (except when using <code>test_each_hash</code>, it must be able to take exactly two arguments).</p>
<p>The body of the <code>test_each</code>'s block must contain only <code>it</code>, <code>before</code>, <code>after</code>, and <code>describe</code> blocks, because of limitations in Sorbet. Sorbet models <code>it</code>, <code>before</code>, and <code>after</code> blocks by translating them to method definitions under the hood, and method definitions do not have access to variables outside of their scope.</p>
<p>Usually this comes up with variable destructuring:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- BAD EXAMPLE --</span>
test_each(values) <span class="hljs-keyword">do</span> <span class="hljs-params">|value|</span>
  x, y = compute_x_y(value)
  it <span class="hljs-string">'example 1'</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">end</span>
  it <span class="hljs-string">'example 2'</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This can be fixed by worked around by writing the assignment into each <code>it</code> block directly, or by computing it ahead of time:</p>
<pre><code class="hljs css language-ruby">test_each(values) <span class="hljs-keyword">do</span> <span class="hljs-params">|value|</span>
  it <span class="hljs-string">'example 1'</span> <span class="hljs-keyword">do</span>
    x, y = compute_x_y(value)
  <span class="hljs-keyword">end</span>
  it <span class="hljs-string">'example 2'</span> <span class="hljs-keyword">do</span>
    x, y = compute_x_y(value)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<pre><code class="hljs css language-ruby">new_values = values.map <span class="hljs-keyword">do</span> <span class="hljs-params">|value|</span>
  x, y = compute_x_y(value)
  [value, x, y]
<span class="hljs-keyword">end</span>
test_each(new_values) <span class="hljs-keyword">do</span> <span class="hljs-params">|value, x, y|</span>
  it <span class="hljs-string">'example 1'</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">end</span>
  it <span class="hljs-string">'example 2'</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3508"></a><a href="#3508" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3508</h2>
<p>The argument to the <code>foreign:</code> attribute on a <code>prop</code> declaration must be a lambda function. This prevents the other model class from needing to be loaded eagerly. Use the autocorrect to fix the error.</p>
<h2><a class="anchor" aria-hidden="true" id="3509"></a><a href="#3509" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3509</h2>
<p>The argument to the <code>computed_by</code> argument on a prop must be a <code>Symbol</code> literal (i.e., syntactically, so that Sorbet can analyze it without performing any inference).</p>
<h2><a class="anchor" aria-hidden="true" id="3510"></a><a href="#3510" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3510</h2>
<p>The return type of the <code>initialize</code> method in Ruby is never used. Under the hood, a call to <code>new</code> on a class in Ruby looks something like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">new</span><span class="hljs-params">(...)</span></span>
  instance = alloc
  _discarded = instance.initialize(...)
  instance
<span class="hljs-keyword">end</span>
</code></pre>
<p>If you’d like to make a custom factory method for your class, define a custom singleton class method.</p>
<h2><a class="anchor" aria-hidden="true" id="3511"></a><a href="#3511" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3511</h2>
<p>Accessor methods defined with <code>Struct.new</code> must not end with <code>=</code>, because the generated setter method will then be given an invalid name ending with <code>==</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3512"></a><a href="#3512" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3512</h2>
<p><code>T.nilable(T.untyped)</code> is just <code>T.untyped</code>, because <code>nil</code> is a valid value of type <code>T.untyped</code> (along with all other values).</p>
<h2><a class="anchor" aria-hidden="true" id="3513"></a><a href="#3513" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3513</h2>
<p>This error code is from an old Sorbet version. It’s equivalent to error 5080:</p>
<p><a href="#5080">→ 5080</a></p>
<h2><a class="anchor" aria-hidden="true" id="3514"></a><a href="#3514" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3514</h2>
<p>The <code>has_attached_class!</code> annotation cannot be given a contravariant <code>:in</code> annotation because <code>T.attached_class</code> is only allowed in output positions.</p>
<h2><a class="anchor" aria-hidden="true" id="3515"></a><a href="#3515" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3515</h2>
<p>This error indicates that a <code>prop</code> or <code>const</code> has already been defined with the name provided. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Info</span> &lt; T::Struct</span>
  const <span class="hljs-symbol">:name</span>, String
  const <span class="hljs-symbol">:age</span>, Integer
  prop <span class="hljs-symbol">:age</span>, Float
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case, the <code>:age</code> prop has been defined twice on lines 3 and 4, and this error will be raised on the occurrence on line 4.</p>
<p>While these errors exist, the first occurrence of the conflicting name will be used when computing a typed initializer for static typechecking purposes. For the example above, the initializer would look as though it was defined with the following signature:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Info</span> &lt; T::struct</span>
  ...
  sig { params(<span class="hljs-symbol">name:</span> String, <span class="hljs-symbol">age:</span> Integer).void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(<span class="hljs-symbol">name:</span>, <span class="hljs-symbol">age:</span>)</span></span>
    ...
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3516"></a><a href="#3516" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3516</h2>
<p><code>attr_reader</code> and <code>attr_accessor</code> may not be given a signature of <code>void</code>, as these accessor methods correspond to instance variables which cannot be assigned type <code>void</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3517"></a><a href="#3517" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3517</h2>
<p>This error indicates that the <code>override</code> argument passed to a <code>prop</code> or <code>const</code> is ill-formed. See <a href="/docs/override-checking#overrides-and-the-prop-dsl">prop overrides</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="3550"></a><a href="#3550" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3550</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when a RBS signature comment contains a syntax error. See the <a href="https://github.com/ruby/rbs/blob/master/docs/syntax.md">RBS syntax reference</a> for more details on the RBS syntax.</p>
<h2><a class="anchor" aria-hidden="true" id="3551"></a><a href="#3551" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3551</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when a RBS signature comment contains a feature not supported by Sorbet. See the page on <a href="/docs/rbs-support">RBS comments support</a> for a list of supported features.</p>
<h2><a class="anchor" aria-hidden="true" id="3552"></a><a href="#3552" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3552</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when a RBS signature comment has more parameters than the method definition it represents.</p>
<h2><a class="anchor" aria-hidden="true" id="3553"></a><a href="#3553" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3553</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when a RBS assertion comment is found in a place where it is not allowed.</p>
<p>For example this snippet will raise this error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-comment">#: as String</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3554"></a><a href="#3554" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3554</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when Sorbet couldn’t match a RBS comment with a method definition or a type assertion.</p>
<h2><a class="anchor" aria-hidden="true" id="3555"></a><a href="#3555" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3555</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when Sorbet encounters an incorrect ordering of signature comment prefixes, (<code>#:</code> and <code>#|</code>). First line of your signature comment should start with <code>#:</code> and subsequent lines should start with a <code>#|</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3556"></a><a href="#3556" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3556</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when the kind of parameter in the method definition does not match the kind of parameter in the RBS signature.</p>
<p>For example, this method expect the parameter to be defined as a keyword parameter, while the RBS signature declares it as a positional parameter:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment">#: (Integer) -&gt; void</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">method</span><span class="hljs-params">(<span class="hljs-symbol">param:</span>)</span></span>; <span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3557"></a><a href="#3557" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3557</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>This error is raised when a class or module is annotated with multiple RBS generic type parameters comments:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment">#: [U]</span>
<span class="hljs-comment">#: [V]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Only one signature is allowed:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment">#: [U, V]</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3558"></a><a href="#3558" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3558</h2>
<blockquote>
<p>This error is specific to RBS support when using the <code>--enable-experimental-rbs-comments</code> flag.</p>
</blockquote>
<p>Methods annotated with <code>@abstract</code> must always raise an error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># <span class="hljs-doctag">@abstract</span></span>
<span class="hljs-comment">#: -&gt; void</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">baz</span></span>
  raise <span class="hljs-string">"not implemented"</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3702"></a><a href="#3702" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3702</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Package definitions must be formatted like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Opus::Foo</span> &lt; PackageSpec</span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, <code>Opus::Foo</code> is the name of the package, and <code>PackageSpec</code> explicitly declares that this class definition is a package spec.</p>
<h2><a class="anchor" aria-hidden="true" id="3703"></a><a href="#3703" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3703</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Each package must have only one definition. A package definition is the place where there is a line like <code>class Opus::Foo &lt; PackageSpec</code> in a <code>__package.rb</code> file.</p>
<h2><a class="anchor" aria-hidden="true" id="3704"></a><a href="#3704" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3704</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Sorbet found an <code>import</code> in a <code>__package.rb</code> file, but the imported constant did not exist.</p>
<h2><a class="anchor" aria-hidden="true" id="3705"></a><a href="#3705" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3705</h2>
<blockquote>
<p><strong>TODO</strong> This error code is not yet documented.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="3706"></a><a href="#3706" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3706</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>All <code>import</code> and <code>export</code> lines in a <code>__package.rb</code> file must have constant literals as their argument. Doing arbitrary computation of imports and exports is not allowed in <code>__package.rb</code> files.</p>
<p>Also note that all <code>import</code> declarations must be unique, with no duplicated imports.</p>
<h2><a class="anchor" aria-hidden="true" id="3707"></a><a href="#3707" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3707</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p><code>__package.rb</code> files must declare exactly one package.</p>
<h2><a class="anchor" aria-hidden="true" id="3709"></a><a href="#3709" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3709</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>A package cannot import itself. Double check which files and/or packages you intended to modify, as you’ve likely made a typo.</p>
<h2><a class="anchor" aria-hidden="true" id="3710"></a><a href="#3710" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3710</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Even though <code>__package.rb</code> files use Ruby syntax, they do not allow arbitrary Ruby code. The fact that they use Ruby syntax is a convenience so that:</p>
<ul>
<li>package declarations get syntax highlighting in all Ruby editors</li>
<li>tooling like Sorbet and RuboCop work on <code>__package.rb</code> files out of the box</li>
<li>Sorbet can support things like jump-to-definition inside <code>__package.rb</code> files</li>
</ul>
<p>But despite that, <code>__package.rb</code> files must be completely statically analyzable, which means most forms of Ruby expressions are not allowed in these files.</p>
<h2><a class="anchor" aria-hidden="true" id="3711"></a><a href="#3711" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3711</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Package files must be <code># typed: strict</code>. If you are in the process of migrating a codebase to use the packager mode and want to sometimes ignore a <code>__package.rb</code> file, use the <code>--ignore=__package.rb</code> command line flag which will ignore all files whose name matches <code>__package.rb</code> exactly, in any folder.</p>
<h2><a class="anchor" aria-hidden="true" id="3712"></a><a href="#3712" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3712</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Package names must not contain underscores. Internally, the packager assumes it can use the underscore character to join components of a package name together. For example, internally the package uses names like <code>Opus_Foo</code> to represent the package <code>Opus::Foo</code>. If underscores were allowed in package names, <code>Opus_Foo_Bar</code> could represent a package called <code>Opus::Foo_Bar</code>, <code>Opus_Foo::Bar</code> or <code>Opus::Foo::Bar</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3713"></a><a href="#3713" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3713</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>All code inside a package must live within the namespace declared by it’s enclosing <code>__package.rb</code> file. Note that since packages are allowed to nest inside each other, sometimes you might have attempted to add code in a folder that you didn’t realize was actually managed by a nested package.</p>
<p>If you’re seeing this error and surprised, double check which folders have <code>__package.rb</code> files in them, and the names of the packages declared by them.</p>
<h2><a class="anchor" aria-hidden="true" id="3714"></a><a href="#3714" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3714</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>This error arises when it’s unclear which import actually provides a constant, which in turn usually happens with nested packages: given a constant <code>A::B::C</code> and a package that imports both the packages <code>A</code> and <code>A::B</code>, it’s difficult to tell without deep examination which actually exports <code>A::B::C</code>.</p>
<p>In these cases, it’s best to refactor the packages so they are clearly delineated: instead of <code>A</code> and <code>A::B</code>, it might be best to figure out what behavior lives in <code>A</code> but not <code>A::B</code> and move it to a new package entirely, like <code>A::X</code> (and then update the import structure as needed).</p>
<p>This error can also be produced when trying to import a name which is a prefix of the nested package: for example, importing <code>A</code> when your package name is <code>A::B</code>.</p>
<p>Again, this probably implies you should try to move away from the nested package structure, and move the contents of <code>A</code> that aren’t in a nested package into another less ambiguous package.</p>
<h2><a class="anchor" aria-hidden="true" id="3715"></a><a href="#3715" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3715</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>The <code>export_for_test</code> directive is used to say, “Make this constant from the non-test namespace available in the test namespace for the same package.” That means it only makes sense to <code>export_for_test</code> constants from the non-test namespace.</p>
<p>Trying to apply this directive to a constant defined in the <code>Test::</code> namespace will result in this error.</p>
<p>If you’re trying to export a constant from the test namespace to be used in other packages, then just use <code>export</code>. Otherwise, these lines can be safely deleted.</p>
<h2><a class="anchor" aria-hidden="true" id="3716"></a><a href="#3716" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3716</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>This error means that you’re exporting a constant redundantly. In Stripe Packages mode, exporting a constant <code>A::B</code> will export anything accessible underneath <code>A::B</code>. That means that if you try to export <code>A::B</code> and <code>A::B::C</code>, you’ll get this error—the latter export is redundant, as it’s implied by export <code>A::B</code>.</p>
<p>To fix this error, simply remove the more specific export.</p>
<h2><a class="anchor" aria-hidden="true" id="3717"></a><a href="#3717" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3717</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Referencing a constant defined in another package that has not been explicitly exported by that package is not allowed.</p>
<p>To fix this error, either change the upstream package to start exporting the constant, or change the code in the current package to depend on only public exports of the upstream package. When changing an upstream package to expose things that were not previously exposed, double check whether it’s intentional that the constant has not been exported.</p>
<h2><a class="anchor" aria-hidden="true" id="3718"></a><a href="#3718" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3718</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>To reference constants defined in other packages, the package must first be imported into the current package.</p>
<p>Fix the error by explicitly <code>import</code>'ing the upstream package into the <code>__package.rb</code> file for the package where this error was reported.</p>
<p>Note that sometimes it is not possible to import another package because doing so would make the dependency graph of packages have a dependency cycle. In these cases, a common solution is to factor the shared functionality to a new package, and import that new package wherever it’s needed. In some situations, there may be simpler ways to restructure the code that don’t involve making a new package.</p>
<h2><a class="anchor" aria-hidden="true" id="3720"></a><a href="#3720" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3720</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>The <code>--stripe-packages</code> mode draws a distinction between test and non-test code. For a package called <code>A::B</code></p>
<ul>
<li><p>Some of the constants defined outside of <code>A::B</code> but imported into <code>A::B</code> are <strong>test-only</strong> imports (created by writing <code>test_import</code> instead of <code>import</code> in a <code>__package.rb</code> file).</p>
<p>To fix this error, if the change is desired, replace <code>test_import</code> with <code>import</code> for the constant.</p></li>
<li><p>Some of the constants defined within <code>A::B</code> live in the test namespace of <code>Test::A::B</code>, meaning that those constants can only be referenced inside <code>T::A::B</code>, not inside the non-test <code>A::B</code> namespace.</p>
<p>To fix this error, avoid referencing test code from a non-test namespace. This means refactoring where code lives within <code>A::B</code> to satisfy the above rule.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="3721"></a><a href="#3721" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3721</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>A package may only export a constant defined within itself.</p>
<p>To re-export a constant defined by another package, make a constant alias to the other constant, and export that:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A::B</span></span>
  SomeOtherConstant = A::X::SomeOtherConstant
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- a/b/__package.rb --</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A::B</span> &lt; PackageSpec</span>
  import A::X

  <span class="hljs-comment"># BAD</span>
  export A::X::SomeOtherConstant

  <span class="hljs-comment"># CORRECT</span>
  export A::B::SomeOtherConstant
<span class="hljs-keyword">end</span>
</code></pre>
<p>Additional signatures of error 3721 include:</p>
<ul>
<li>A package exporting a constant only defined in .rbi files. RBI files are shims to enable typechecking in places where Ruby metaprogramming prevents Sorbet from statically interpreting the behavior of a class or module. Generally, these files declare additional methods on classes defined in Ruby source files, and should not define any new constants. However, there are some rare exceptions where these files can define net-new constants. For these cases, we enforce that these constants cannot be exported.</li>
<li>A package exporting an enum value:</li>
</ul>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyPackage</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &lt; T::Enum</span>
    enums <span class="hljs-keyword">do</span>
      Val1 = new
      Val2 = new
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- my_package/__package.rb --</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPackage</span> &lt; PackageSpec</span>
  export A::Val1 <span class="hljs-comment"># not allowed, instead the full enum should be exported with `export A`</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3722"></a><a href="#3722" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3722</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Sorbet’s package mode does not currently exporting type aliases. The workaround is to declare the type alias inside a module, and export the containing module instead:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A::B</span></span>
  BadTypeAlias = T.type_alias {T.any(Integer, String)}
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A::B::Types</span></span>
  GoodTypeAlias = T.type_alias {T.any(Integer, String)}
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A::B</span> &lt; PackageSpec</span>
  export A::B::BadTypeAlias <span class="hljs-comment"># error</span>

  export A::B::Types <span class="hljs-comment"># OK</span>
  <span class="hljs-comment"># ^ allows referencing `A::B::Types::GoodTypeAlias` in downstream packages</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="3723"></a><a href="#3723" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3723</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>The <code>--stripe-packages</code> mode allows packages to explicitly enumerate which other packages are allowed to import them by using the <code>visible_to</code> directive. If a package uses one or more <code>visible_to</code> lines, and is imported by a package <em>not</em> referenced by a <code>visible_to</code> line, then Sorbet will report an error pointing to that import.</p>
<p>Often, if you’re running across this error, it means that you’re trying to rely on an implementation detail that was deliberately made private. However, if you’re sure that it should be okay to import this package, then you can add an additional <code>visible_to</code> directive in order to allow the import you’re trying to add.</p>
<h2><a class="anchor" aria-hidden="true" id="3724"></a><a href="#3724" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3724</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> and <a href="http://go/strict-dependencies">go/strict-dependencies</a> for more.</p>
</blockquote>
<p>All packages have a <code>strict_dependencies</code> level, which controls what restrictions are applied on imported packages.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPackage</span> &lt; PackageSpec</span>
  strict_dependencies <span class="hljs-string">'false'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The 4 possible values are:</p>
<ul>
<li><code>'false'</code>: No restrictions are placed on dependencies.</li>
<li><code>'layered'</code></li>
<li><code>'layered_dag'</code></li>
<li><code>'dag'</code></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="3725"></a><a href="#3725" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3725</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> and <a href="http://go/layers">go/layers</a> for more.</p>
</blockquote>
<p>All packages have a <code>layer</code>, which is used when checking for layering violations. See <a href="#3726">3726</a>.</p>
<!-- TODO(neil): Replace [3726](#3726) with a link to layering/strict_deps documentation when we write that. -->
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPackage</span> &lt; PackageSpec</span>
  strict_dependencies <span class="hljs-string">'false'</span>
  layer <span class="hljs-string">'library'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You can choose the valid layers using the <code>--packager-layers</code> command line flag. For example, the following specifies that there are three valid layers: <code>util</code>, <code>lib</code> and <code>app</code>, ordered lowest to highest.</p>
<pre><code class="hljs css language-bash">srb tc --packager-layers util,lib,app
</code></pre>
<p>Note that the order matters here. Passing the option as above means that in <code>layered</code> (or stricter), packages in the <code>app</code> layer can import those in <code>util</code> or <code>lib</code>, but packages in the <code>util</code> layer cannot import those in <code>lib</code> or <code>app</code>.</p>
<p>If the flag is passed with no argument, then the default valid layers are <code>library</code> and <code>application</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3726"></a><a href="#3726" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3726</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> and <a href="http://go/layers">go/layers</a> for more.</p>
</blockquote>
<p>If a package is at <code>strict_dependencies 'layered'</code> or stricter, all packages it imports or references must have the same or lower layer. For example, given <code>--packager-layers util,lib,app</code>, all imports for a package with layer <code>lib</code> must either also have layer <code>lib</code>, or have layer <code>util</code> (but not layer <code>app</code>).</p>
<p>Note: <code>test_import</code>s are not checked for layering violations.</p>
<h2><a class="anchor" aria-hidden="true" id="3727"></a><a href="#3727" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3727</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> and <a href="http://go/strict-dependencies">go/strict-dependencies</a> for more.</p>
</blockquote>
<p>If a package is at <code>strict_dependencies 'layered'</code> or stricter, all packages it imports or references must also be <code>strict_dependencies 'layered'</code>.</p>
<p>If a package is at <code>strict_dependencies 'layered_dag'</code> or stricter, it cannot be part of a cycle of dependencies. For example, the following is invalid:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &lt; PackageSpec</span>
  strict_dependencies <span class="hljs-string">'layered_dag'</span>
  import B <span class="hljs-comment"># error: importing B will put A into a cycle, which is not valid at strict_dependencies level layered_dag</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> &lt; PackageSpec</span>
  strict_dependencies <span class="hljs-string">'layered'</span>
  import A
<span class="hljs-keyword">end</span>
</code></pre>
<p>Additionally, if a package is at <code>strict_dependencies 'dag'</code>, all packages it imports or references must also be <code>strict_dependencies 'dag'</code>.</p>
<p>Note: <code>test_import</code>s are not checked for strict dependency violations.</p>
<h2><a class="anchor" aria-hidden="true" id="3728"></a><a href="#3728" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3728</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>The following directives can only appear once per <code>__package.rb</code> file:</p>
<ul>
<li><code>layer</code></li>
<li><code>strict_dependencies</code></li>
<li><code>sorbet min_typed_level: ..., tests_min_typed_level: ...</code>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="3729"></a><a href="#3729" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3729</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>The <code>sorbet</code> directive in <code>__package.rb</code> specifies what the minimum sigil must be for source files in that package. It takes two keyword arguments: <code>min_typed_level</code> and <code>tests_min_typed_level</code>. For each, the valid options are: <code>'ignore'</code>, <code>'false'</code>, <code>'true'</code>, <code>'strict'</code>, and <code>'strong'</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="3731"></a><a href="#3731" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3731</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> and <a href="http://go/strict-dependencies">go/strict-dependencies</a> for more.</p>
</blockquote>
<p>If a package is marked with <code>prelude_package</code>, it is restricted to only importing other packages marked as <code>prelude_package</code>. This error indicates that a <code>prelude_package</code> is importing a non-prelude package.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &lt; PackageSpec</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> &lt; PackageSpec</span>
  prelude_package

  import A <span class="hljs-comment"># error: Importing A, which is not marked as `prelude_package`</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="4001"></a><a href="#4001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4001</h2>
<p>Sorbet parses the syntax of <code>include</code> and <code>extend</code> declarations, even in <code># typed: false</code> files. Recall from the <a href="/docs/static#file-level-granularity-strictness-levels">strictness levels</a> docs that all constants in a Sorbet codebase must resolve, even at <code># typed: false</code>. Parsing <code>include</code> blocks is required for this, so incorrect usages of <code>include</code> are reported when encountered.</p>
<p>To fix, ensure that the <code>include</code> or <code>extend</code> line is given at least one argument.</p>
<h2><a class="anchor" aria-hidden="true" id="4002"></a><a href="#4002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4002</h2>
<p>Sorbet requires seeing the complete inheritance hierarchy in a codebase. To do this, it must be able to statically resolve a class’s superclass and any mixins, declared with <code>include</code> or <code>extend</code>.</p>
<p>To make this possible, Sorbet requires that every superclass, <code>include</code>, and <code>extend</code> references a constant literal. It’s not possible to use an arbitrary expression (like a method call that produces a class or module) as an ancestor. This restriction holds even in <code># typed: false</code> files.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">B</span>;</span> <span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">x</span></span>
  rand.round == <span class="hljs-number">0</span> ? A : B
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span></span>
  <span class="hljs-keyword">include</span> x  <span class="hljs-comment"># error: `include` must be passed a constant literal</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>(For some intuition why this restriction is in place: Sorbet requires resolving the inheritance hierarchy before it can run inference. Inference is when it assigns types to every expression in the codebase. Therefore inheritance resolution cannot depend on inference, as otherwise there would be a logical cycle in the order Sorbet has to type check a codebase. Similar restrictions appear throughout Sorbet: see <a href="/docs/why-type-annotations">Why type annotations?</a> for more examples.)</p>
<p>For module mixins, it is possible to silence this error with <code>T.unsafe</code>, but it should be done with <strong>utmost caution</strong>, as Sorbet will not consider the include and provide a less accurate analysis:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">B</span>;</span> <span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">x</span></span>
  rand.round == <span class="hljs-number">0</span> ? A : B
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span></span>
  T.unsafe(<span class="hljs-keyword">self</span>).<span class="hljs-keyword">include</span> x
<span class="hljs-keyword">end</span>
</code></pre>
<p>Which might create unexpected errors:</p>
<pre><code class="hljs css language-ruby">c = C.new

c.a <span class="hljs-comment"># error: Method `a` does not exist on `C`</span>
c.b <span class="hljs-comment"># error: Method `b` does not exist on `C`</span>

T.let(C, A) <span class="hljs-comment"># error: Argument does not have asserted type `A`</span>
T.let(C, B) <span class="hljs-comment"># error: Argument does not have asserted type `B`</span>
</code></pre>
<p>There is no such workaround for superclasses.</p>
<h2><a class="anchor" aria-hidden="true" id="4003"></a><a href="#4003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4003</h2>
<p>Sorbet parses the syntax of <code>include</code> and <code>extend</code> declarations, even in <code># typed: false</code> files. Recall from the <a href="/docs/static#file-level-granularity-strictness-levels">strictness levels</a> docs that all constants in a Sorbet codebase must resolve, even at <code># typed: false</code>. Parsing <code>include</code> blocks is required for this, so incorrect usages of <code>include</code> are reported when encountered.</p>
<p>To fix, ensure that the <code>include</code> or <code>extend</code> line is not given a block.</p>
<h2><a class="anchor" aria-hidden="true" id="4006"></a><a href="#4006" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4006</h2>
<p>The <code>super</code> keyword in Ruby will call the method with the same name on the nearest ancestor (whether on a mixed-in module or the superclass).</p>
<p>This method only makes sense to call inside the body of a method, not inside a class or file top-level.</p>
<h2><a class="anchor" aria-hidden="true" id="4010"></a><a href="#4010" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4010</h2>
<p>When using Sorbet, try to avoid redefining a method. A method is redefined when a method of the same name is defined in the same class (note that Sorbet completely supports overriding methods, where two methods have the same name but one is in a parent class and one in a child class).</p>
<p>If redefining a method is unavoidable, the arity of the new method must match the previous method’s arity exactly. A method’s arity includes how many positional arguments a method has, which keyword arguments it takes, etc.</p>
<p>Determining the arity of the previous method can sometimes be tricky, especially when the previous method was defined dynamically by a DSL. In these cases, the easiest way to determine a method’s arity is to find a place where that method is <strong>called</strong>, hover over it using Sorbet’s <a href="/docs/vscode">editor integration</a>, and copy the displayed method definition.</p>
<p>It’s worth noting that this error occurs particularly frequently in RBI files, especially autogenerated RBI files. Consider a case like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- some_gem.rbi --</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomeGem</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(x = <span class="hljs-literal">nil</span>, y = <span class="hljs-literal">nil</span>)</span></span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- autogenerated/some_gem.rbi --</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomeGem</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(*args)</span></span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case, two RBIs define conflicting definitions for <code>SomeGem#foo</code> because the arity of <code>x, y</code> does not match the arity of <code>*args</code>. (This frequently happens because, say, the gem wants to do custom parameter checking so that in certain cases <code>x</code> or <code>y</code> is actually required.) The <code>autogenerated/</code> RBI file was generated by using Ruby’s reflection APIs to ask for the arity of the method as seen by the Ruby VM, while the other RBI was hand-written by the gem maintainer.</p>
<p>In cases like these, usually the solution is to remove the <code>foo</code> definition from <code>autogenerated/some_gem.rbi</code>, which can usually be accomplished by regenerating the RBI.</p>
<p><strong>Note</strong>: The arity of a method does not include types, only names and kinds of its parameters. For example:</p>
<pre><code class="hljs css language-ruby">sig { returns(Integer) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
sig { returns(String) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, both <code>foo</code> methods have the same arity (they take no arguments, or are “nullary”), so no error is raised about redefining a method.</p>
<p>But in this case, where their signatures specify different types, the behavior is unspecified. Sorbet <strong>usually</strong> takes the types from the “last” signature, but which signature is “last” is implementation defined when when the two method definitions happen in two separate files. This includes the case when both a Ruby source file (<code>*.rb</code>) and an RBI file (<code>*.rbi</code>) specify a signature for a method.</p>
<p>That Sorbet supports method redefinitions, including providing multiple signatures for a method definition across multiple files, and that this error is <strong>only</strong> reported at <code># typed: true</code> and above is an accident of history, and part of the reason why Sorbet strongly discourages using method redefinitions.</p>
<p>One alternative is to mark the original method <code>private</code> and define a new method with a new name, instead of redefining the old method. Another alternative is to use Sorbet’s <a href="/docs/vscode">editor integration</a> to rename the old method, declare that old method <code>private</code>, and define a new method with the original name.</p>
<h2><a class="anchor" aria-hidden="true" id="4011"></a><a href="#4011" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4011</h2>
<p>There are multiple definitions for the same type member within a given class or module.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span></span>
  extend T::Generic

  Elem = type_member
  Elem = type_member <span class="hljs-comment"># error: Duplicate type member</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You can fix this by removing the second definition of the type member:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span></span>
  extend T::Generic

  Elem = type_member <span class="hljs-comment"># ok</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>For more information, see the docs for <a href="/docs/generics">Generics</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="4012"></a><a href="#4012" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4012</h2>
<p>A <code>class</code> was redefined as a <code>module</code> or <em>vice versa</em> in two separate locations.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># file_a.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># file_b.rb</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Foo</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0A%0A%23%20file_a.rb%0Aclass%20Foo%0Aend%0A%0A%23%20file_b.rb%0Amodule%20Foo%0Aend">→ View on sorbet.run</a></p>
<p>You can fix this error by ensuring that both definitions are declared as <code>class</code>es, ensuring both definitions are declared as <code>module</code>s, or renaming either definition so they no longer conflict.</p>
<h2><a class="anchor" aria-hidden="true" id="4013"></a><a href="#4013" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4013</h2>
<p>The <code>interface!</code> annotation is reserved for modules. To include abstract methods in a class, mark the class <code>abstract!</code> instead.</p>
<h2><a class="anchor" aria-hidden="true" id="4014"></a><a href="#4014" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4014</h2>
<p>Sorbet does not support dynamic constant references. All constants must be plain constant literals.</p>
<p>If you are adopting Sorbet in your codebase and get stuck dealing with how to avoid using a particular dynamic constant reference, you might want to ask someone in <a href="/en/community">the Sorbet community</a> whether they have encountered the problem before. Members of the Sorbet community frequently answer questions either on Slack or Stack Overflow.</p>
<p><strong>Why is it this way?</strong> Sorbet has a simple architecture which has been chosen to optimize for performance in large codebases. Specifically, Sorbet only knows which method is being called during its inference phase. The inference phase requires that a complete symbol table (listing all classes, all the methods that class owns, and all the methods’ types) has been built already. Thus building this symbol table cannot depend on knowing which methods are defined.</p>
<p>This is also a philosophical belief that Ruby codebases are easier for programmers to understand when constant references are simple.</p>
<h2><a class="anchor" aria-hidden="true" id="4015"></a><a href="#4015" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4015</h2>
<p>This error usually comes when a class or module is dynamically defined and stored into a constant, like this:</p>
<pre><code class="hljs css language-ruby">A = ...
A::B = <span class="hljs-number">1</span>
</code></pre>
<p>where <code>...</code> is some expression which computes a class or module. Sorbet can’t know statically what this <code>...</code> code does (and for example even if could assume that it’s defining a class, Sorbet can’t know what methods or constants it has). Therefore, Sorbet does not support this pattern.</p>
<h2><a class="anchor" aria-hidden="true" id="4016"></a><a href="#4016" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4016</h2>
<p><code>type_member</code> and <code>type_template</code> cannot be used at the top-level of a file. Instead, they must be used inside a class or module definition.</p>
<h2><a class="anchor" aria-hidden="true" id="4019"></a><a href="#4019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4019</h2>
<p>This error is only reported when running Sorbet with the <code>--uniquely-defined-behavior</code> command line flag (formerly called <code>--stripe-mode</code>).</p>
<p>A class defines behavior in multiple files when at least two files would need to be run in order to completely load that class. A class definition that only serves as a namespace for inner definitions is not considered to have behavior. For example, in this example module <code>A</code> has behavior in two files, and thus produces an error in this mode:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- file1.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- file2.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>However, in this example, module <code>A</code> is defined in two files, but the second definition does not define any behavior (just an empty module body), and thus does not produce an error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- file1.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A::B</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- file2.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A::B</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The limitations around what constitutes “defining behavior” is intertwined with which files would have to be loaded for a class (like <code>A</code> above) to be fully loaded. When checking <code>--uniquely-defined-behavior</code>, it must be possible to require at most one file to fully load a class. This property is useful to check in Ruby codebases which use an autoloader, like <a href="https://github.com/fxn/zeitwerk">Zeitwerk</a>.</p>
<p><strong>What counts as behavior</strong>? Basically anything with side effects (any method calls) and any method definitions. It’s easier to describe what <strong>doesn’t</strong> count: empty class or module definitions, or those class/module definitions which only have constant assignments and/or literals.</p>
<h2><a class="anchor" aria-hidden="true" id="4021"></a><a href="#4021" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4021</h2>
<p>The syntax for specifying type bounds when using <code>type_member</code> and <code>type_template</code> has changed. The old syntax looked used a method call with keyword args:</p>
<pre><code class="hljs css language-ruby">type_member(<span class="hljs-symbol">fixed:</span> ...)
</code></pre>
<p>while the new syntax uses a block that returns a <code>Hash</code> literal:</p>
<pre><code class="hljs css language-ruby">type_member {{<span class="hljs-symbol">fixed:</span> ...}}
</code></pre>
<p>(Note that any variance annotation like <code>:in</code> or <code>:out</code> is still specified as the first positional argument.)</p>
<p>This new syntax mimics the syntax for <code>T.type_alias</code>, and shares the same motivation: generics in Sorbet are completely erased at runtime, so it’s silly to have to pay the runtime price of computing the runtime types passed to <code>:fixed</code>, <code>:upper</code>, and <code>:lower</code>. In codebases that heavily autoload constants, it’s also easy for <code>type_member</code> definitions to cause constants to be loaded earlier than they might have been otherwise (potentially introducing load-time cyclic references).</p>
<p>The first version of Sorbet on RubyGems to support the new syntax is 0.5.9889. It accepts both syntaxes side by side, so you can use it while incrementally migrating your codebase to the new syntax.</p>
<p>This error includes an autocorrect you can run to automatically migrate to the new syntax:</p>
<pre><code class="hljs css language-bash">srb tc --isolate-error-code=4021 --autocorrect
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="4022"></a><a href="#4022" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4022</h2>
<p>Sorbet does not model all Ruby constants using the same internal data structure. Instead, models constants differently depending on how the constant is defined. For example, all three of these constant definitions are treated differently in Sorbet:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>      <span class="hljs-comment"># a class or module constant</span>
B = <span class="hljs-number">1</span>             <span class="hljs-comment"># a "normal" constant, which Sorbet calls a "static field"</span>
C = type_member   <span class="hljs-comment"># a type member constant, used with generic classes</span>
</code></pre>
<p>Sorbet requires that a constant with a given name must have a unique constant “kind” throughout all its appearances in a codebase. For example, even though code like this is valid Ruby code, it’s not allowed in Sorbet:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">method_to_compute_a_Class_object</span></span>
  Class.new
<span class="hljs-keyword">end</span>

MyClass = method_to_compute_a_Class_object()

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span></span>
  <span class="hljs-comment"># ... re-open MyClass to add methods to it ...</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In the snippet above, Sorbet complains that it can see conflicting definitions of <code>MyClass</code>: one as a static field, and one as a class.</p>
<p>Sorbet imposes this limitation for performance—Sorbet does not do method-level type inference until it has a full view of all the constants defined in a program.</p>
<p>At the point where the <code>MyClass = ...</code> assignment happens, Sorbet must choose whether to treat <code>MyClass</code> as a class or module (which allows using it as a <a href="/docs/class-types">class or interface type</a>, grants it a singleton class which derives from <code>Module</code>, lets it own other constants and methods, and more) or whether to treat it as a “normal” static field constant, which does not allow any of those things.</p>
<p>To workaround issues like this, if you absolutely must have both a constant assignment and a class definition for a given constant, you can either:</p>
<ol>
<li><p>Use <code>const_set</code> to hide the constant assignment from Sorbet:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">method_to_compute_a_Class_object</span></span>
  Class.new
<span class="hljs-keyword">end</span>

const_set(<span class="hljs-symbol">:MyClass</span>, method_to_compute_a_Class_object())

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre></li>
<li><p>Factor the code such that the constant assignment is in a file all by itself, and mark that file <code># typed: ignore</code> (possibly also using an <code>RBI</code> file to declare anything that can’t be factored out of the ignored file but should still be visible to Sorbet).</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="4023"></a><a href="#4023" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4023</h2>
<p>This error code is from an old Sorbet version. It’s equivalent to error 5080:</p>
<p><a href="#5080">→ 5080</a></p>
<h2><a class="anchor" aria-hidden="true" id="4024"></a><a href="#4024" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4024</h2>
<p>Two keyword arguments to a method definition or block have been given the same name:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-symbol">x:</span>, <span class="hljs-symbol">x:</span>)</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You can resolve this error by giving a different name to one of the conflicting arguments.</p>
<h2><a class="anchor" aria-hidden="true" id="4025"></a><a href="#4025" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4025</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>A method can only be made package-private if the class it’s defined in has a package. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- lib/some_package/example.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomePackage::Example</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> ::<span class="hljs-title">SomeGlobalClass</span></span>
    package_private <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># 💥</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This file defines a global class called <code>::SomeGlobalClass</code> outside of the enclosing namespace of the current package. This means it will not be treated as belonging to the package <code>SomePackage</code>, and therefore cannot be made <code>package_private</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="4026"></a><a href="#4026" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4026</h2>
<blockquote>
<p>This error is specific to Stripe’s custom <code>--stripe-packages</code> mode. If you are at Stripe, please see <a href="http://go/modularity">go/modularity</a> for more.</p>
</blockquote>
<p>Package files can only share a name with class or module. For example, given a file like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Some::Namespace</span></span>
  MyConstant = [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>]
<span class="hljs-keyword">end</span>
</code></pre>
<p>Only <code>Some</code> and <code>Some::Namespace</code> are valid package names. <code>Some::Namespace::Constant</code> is not a valid package name.</p>
<p>To define a package that contains nothing except a single constant assignment, wrap that constant assignment in a class or module namespace (like <code>Some::Namespace</code> in the example above). If <code>Some::Namespace</code> is already a package, and <code>MyConstant</code> is meant to live in its own package, restructure the code so that there is an enclosing namespace:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Some::Namespace::MyConstant</span></span>
  Value = [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>]
<span class="hljs-keyword">end</span>
</code></pre>
<p>(<strong>Note</strong>: this requires updating references to point at the new <code>Value</code> constant.)</p>
<h2><a class="anchor" aria-hidden="true" id="5001"></a><a href="#5001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5001</h2>
<p>Sorbet cannot resolve references to dynamic constants. The common case occurs when a constant is dynamically referenced through the singleton class of <code>self</code>:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCachable</span> &lt; Cachable</span>
  CACHE_KEY_PREFIX = <span class="hljs-string">"my_cachable_"</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cache_key</span></span>
    <span class="hljs-keyword">self</span><span class="hljs-class">.<span class="hljs-keyword">class</span>::<span class="hljs-title">CACHE_KEY_PREFIX</span> + <span class="hljs-title">identifier</span></span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This code can by made statically analysable by using a singleton method to reference the constant:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCachable</span> &lt; Cachable</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cache_key</span></span>
    <span class="hljs-keyword">self</span><span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">cache_key_prefix</span> + <span class="hljs-title">identifier</span></span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-class"><span class="hljs-keyword">class</span> &lt;&lt; self</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cache_key_prefix</span></span>
      <span class="hljs-string">"my_cachable_"</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>See <a href="/docs/unsupported#dynamic-constant-references">Unsupported features: Dynamic constant references</a> for a more thorough explanation.</p>
<h2><a class="anchor" aria-hidden="true" id="5002"></a><a href="#5002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5002</h2>
<p>This means that the typechecker has been unable to resolve a reference to a constant (e.g., a Ruby class). Most commonly, this indicates that there’s a typo.</p>
<p>First, try confirming whether the code runs successfully. Does the code raise an “uninitialized constant” error when run? If so, Sorbet caught a bug! Try finding out why that constant is actually uninitialized.</p>
<p>If it isn’t a typo, then there are a few other things to look at. If it looks like the constant is related to a gem, maybe one of these helps:</p>
<ul>
<li><p>Is it coming from a gem? Sorbet does not look through the gem’s source code. Instead, there must be an <code>*.rbi</code> file for this gem. Try finding the <code>*.rbi</code> corresponding to this gem, and searching through it for the constant.</p>
<p>For more information, see <a href="/docs/rbi">RBI files</a>. If you are at Stripe, please instead see <a href="http://go/types/rbi">http://go/types/rbi</a>.</p></li>
<li><p>If the gem was recently updated, its <code>*.rbi</code> might need to be regenerated. Each RBI file has a line at the top which can be copy / pasted to re-generate the file when the underlying gem has changed.</p></li>
<li><p>When deleting constants, sometimes they are still referenced from an autogenerated <code>*.rbi</code> file. If that’s the case, consider deleting the constant or regenerating the file.</p></li>
</ul>
<p>Another thing it could be: Sorbet explicitly does not support resolving constants through ancestors (both mixins or superclasses).</p>
<p>Concretely, here’s an example of code rejected and accepted by Sorbet:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  MY_CONST = <span class="hljs-number">91</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent;</span> <span class="hljs-keyword">end</span>

Child::MY_CONST    <span class="hljs-comment"># error</span>
Parent::MY_CONST   <span class="hljs-comment"># ok</span>
</code></pre>
<p>Alternatively, if it’s much more preferable to access the constant on the child, we can set up an explicit alias:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  MY_CONST = <span class="hljs-number">91</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent</span>
  MY_CONST = Parent::MY_CONST
<span class="hljs-keyword">end</span>

Child::MY_CONST    <span class="hljs-comment"># ok</span>
Parent::MY_CONST   <span class="hljs-comment"># ok</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5003"></a><a href="#5003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5003</h2>
<p>Sorbet failed to parse a method signature. For more documentation on valid <code>sig</code> syntax, see <a href="/docs/sigs">Method Signatures</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5004"></a><a href="#5004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5004</h2>
<p>Sorbet failed to parse a Ruby expression as a valid Sorbet type annotation. Sorbet supports many type annotations—use the sidebar to find relevant docs on the kinds of valid Sorbet type annotations.</p>
<h2><a class="anchor" aria-hidden="true" id="5005"></a><a href="#5005" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5005</h2>
<p>A class or instance variable is defined in the wrong context.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Sig

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    @@class_var = T.let(<span class="hljs-number">10</span>, Integer)
    @x = T.let(<span class="hljs-number">10</span>, Integer)
  <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span>
</code></pre>
<p>There are two such errors in the above. In the first, <code>@@class_var</code> is declared outside of the class scope. In the second, <code>@x</code> is declared outside of the <code>initialize</code> method.</p>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5006"></a><a href="#5006" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5006</h2>
<p>An instance variable has been redeclared with another type.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Sig

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span></span>
    @x = T.let(<span class="hljs-number">10</span>, Integer)
    @x = T.let(<span class="hljs-string">"x"</span>, String)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5008"></a><a href="#5008" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5008</h2>
<p>A class was defined as the subclass of a <code>type_alias</code>. It also occurs if a <code>type_alias</code> mixin is used in a class.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
A = T.type_alias {Integer}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> &lt; A;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error: Superclasses and mixins may not be type aliases</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">M</span>;</span> <span class="hljs-keyword">end</span>

AliasModule = T.type_alias {M}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span></span>
  <span class="hljs-keyword">include</span> AliasModule <span class="hljs-comment"># error: Superclasses and mixins may not be type aliases</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5011"></a><a href="#5011" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5011</h2>
<p>A class inherits from itself either directly or through an inheritance chain.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &lt; A;</span> <span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> &lt; C;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> &lt; B;</span> <span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5012"></a><a href="#5012" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5012</h2>
<p>A class was changed to inherit from a different superclass.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span>;</span> <span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> RUBY_VERSION &lt; <span class="hljs-string">"3.0"</span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> &lt; A;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> &lt; B;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error: Parent of class C redefined from A to B</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Sorbet requires that a project have a single, unified inheritance hierarchy. A class cannot sometimes inherit from one class and sometimes inherit from another class depending on code at runtime.</p>
<p>If it’s simply not possible to refactor the codebase so that the given class always descends from one superclass, the next path forward is to hide all but one of the superclasses of this class. For example, using a trick like this with <code># typed: ignore</code> files:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- main.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span>;</span> <span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> RUBY_VERSION &lt; <span class="hljs-string">"3.0"</span>
  require_relative <span class="hljs-string">'./c_a.rb'</span>
<span class="hljs-keyword">else</span>
  require_relative <span class="hljs-string">'./c_b.rb'</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span></span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- c_a.rb --</span>
<span class="hljs-comment"># typed: ignore</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> &lt; A;</span> <span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- c_b.rb --</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> &lt; B;</span> <span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, Sorbet will think that <code>C</code> always descends from <code>B</code> statically, even though sometimes it may descend from <code>A</code>.</p>
<p>Another trick to hide the superclass involves using <code>Class.new</code> to hide the definition of <code>C</code> from Sorbet entirely.</p>
<p>Neither of these tricks work when one of the class definitions with a conflicting superclass definition comes from Sorbet’s definitions for standard library classes. For example, this happens when generating an RBI for a newer version of a gem which is also include in Sorbet’s stdlib RBI payload.</p>
<p>In these cases, Sorbet provides the <code>--suppress-payload-superclass-redefinition-for</code> command line flag, which suppresses the superclass redefinition error for that class. For example, if the class <code>C</code> above were a class defined in Sorbet’s payload, this would silence the errors:</p>
<pre><code class="hljs css language-bash">srb tc --suppress-payload-superclass-redefinition-for=C
</code></pre>
<p>This flag can be repeated once per payload class with a superclass redefinition error.</p>
<h2><a class="anchor" aria-hidden="true" id="5013"></a><a href="#5013" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5013</h2>
<p>A class or instance variable declaration used <code>T.cast</code> when it should use <code>T.let</code>.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  @@x = T.cast(<span class="hljs-number">10</span>, Integer)
<span class="hljs-keyword">end</span>
</code></pre>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>.</p>
<p>To instead use <code>T.cast</code> as a runtime-only type check (that is, neither as a statically-checked assertion nor as an instance variable declaration), assign the cast result to an intermediate variable:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  x = T.cast(<span class="hljs-number">10</span>, Integer)
  @@x = x
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5014"></a><a href="#5014" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5014</h2>
<p>Given code like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  extend T::Generic
  X = type_member
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>We need to change our code to redeclare the type member in the child class too:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  extend T::Generic
  X = type_member
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent</span>
  X = type_member
<span class="hljs-keyword">end</span>
</code></pre>
<p>The same thing holds for type templates.</p>
<p>Note that when the ancestor is a <code>module</code> that has added to a child class using <code>extend</code>, the child class will need to use <code>type_template</code> to redeclare the module’s type members</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">IFoo</span></span>
  extend T::Generic
  X = type_member
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Generic
  extend IFoo
  X = type_template
<span class="hljs-keyword">end</span>
</code></pre>
<p>The intuition here is similar to how using <code>extend</code> on an interface requires implementing its abstract methods as singleton class methods (<code>def self.foo</code>) instead of instance methods (<code>def foo</code>).</p>
<p>For more information, see the docs for <a href="/docs/generics">Generics</a>.</p>
<p><a class="anchor" aria-hidden="true" id="redeclare-fixed"></a></p>
<p><strong>Why does this apply even to <code>fixed</code> types?</strong> Sorbet requires redeclaring even <code>fixed</code> type members and templates. This differs from many other typed, object-oriented languages that support generic classes. This choice is an implementation detail which simplifies some logic inside Sorbet, specifically around responding incrementally to file edits in an editor. It’s <em>not</em> fundamental to Ruby or the type system semantics Sorbet chooses to implement, which means that one day we could consider changing Sorbet to support this (which would require adjusting Sorbet’s algorithm for handling incremental updates).</p>
<p>For a more technical explanation, see <a href="https://github.com/sorbet/sorbet/blob/233b47bb46fcedb60982fd7f70148f07a147468f/resolver/GlobalPass.cc#L54-L63">the Sorbet source code</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5015"></a><a href="#5015" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5015</h2>
<p><a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">Variance</a> is a type system concept that controls how generics interact with subtyping.</p>
<p>If a <code>type_member</code> is declared as covariant (<code>:out</code>) in a parent class or module, it must be declared as either covariant or invariant in any children of that class or module. (A <code>type_member</code> with no variance annotation is invariant.)</p>
<p>Similarly if a <code>type_member</code> is declared as contravariant (<code>:in</code>) in a parent class or module, it must be declared as either contravariant or invariant in any children.</p>
<p>To see why, consider this example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Parent</span></span>
  extend T::Generic
  X = type_member(<span class="hljs-symbol">:out</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Child</span></span>
  extend T::Generic
  <span class="hljs-keyword">include</span> Parent

  X = type_member(<span class="hljs-symbol">:in</span>) <span class="hljs-comment"># error: variance mismatch</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If Sorbet were to allow this, Sorbet would fail to catch type errors that it would need to be able to catch. To see why, consider this chain of <code>T.let</code> statements, all of which have no error:</p>
<pre><code class="hljs css language-ruby">x1 = Child[T.any(String, Symbol)].new

<span class="hljs-comment"># `Child::X` is contravariant, so "String &lt;: T.any(String, Symbol)"</span>
<span class="hljs-comment"># implies "Child[T.any(String, Symbol)] &lt;: Child[String]"</span>
x2 = T.let(x1, Child[String])

<span class="hljs-comment"># `String` is equivalent to `String`, so Child[String] &lt;: Parent[String]</span>
x3 = T.let(x2, Parent[String])

<span class="hljs-comment"># `Parent::X` is covariant, so "String &lt;: T.any(String, Integer)"</span>
<span class="hljs-comment"># implies "Parent[String] &lt;: Parent[T.any(String, Integer)]"</span>
x4 = T.let(x3, Parent[T.any(Integer, String)])
</code></pre>
<p>Given the above definitions, with <code>Parent::X</code> being covariant and <code>Child::X</code> being contravariant, each subsequent <code>T.let</code> checks out, with the reasons being specified.</p>
<p>But that’s a contradiction! We were able to make a conclusion that we know is false. If we had jumped straight from where we started to where we finished, Sorbet would report an error:</p>
<pre><code class="hljs css language-ruby">y1 = Child[T.any(String, Symbol)].new
T.let(y1, Parent[T.any(Integer, String)])
<span class="hljs-comment">#     ^^ error: Argument does not have asserted type</span>
</code></pre>
<p>This is because <code>T.any(Integer, String)</code> is neither a subtype nor a supertype of <code>T.any(Symbol, String)</code>, the types are completely incompatible.</p>
<p>To avoid introducing contradictions like this into the type system, Sorbet requires that the variance on parent and child classes matches.</p>
<p><a href="https://sorbet.run/#%23%20typed%3A%20true%0A%0Amodule%20Parent%0A%20%20extend%20T%3A%3AGeneric%0A%20%20X%20%3D%20type_member%28%3Aout%29%0Aend%0A%0Amodule%20Child%0A%20%20extend%20T%3A%3AGeneric%0A%20%20include%20Parent%0A%0A%20%20X%20%3D%20type_member%28%3Ain%29%0Aend%0A%0Ax1%20%3D%20Child%5BT.any%28String%2C%20Symbol%29%5D.new%0A%0A%23%20%60Child%3A%3AX%60%20is%20contravariant%2C%20so%20%22String%20%3C%3A%20T.any%28String%2C%20Symbol%29%22%0A%23%20implies%20%22Child%5BT.any%28String%2C%20Symbol%29%5D%20%3C%3A%20Child%5BString%5D%22%0Ax2%20%3D%20T.let%28x1%2C%20Child%5BString%5D%29%0A%0A%23%20%60String%60%20is%20equivalent%20to%20%60String%60%2C%20so%20Child%5BString%5D%20%3C%3A%20Parent%5BString%5D%0Ax3%20%3D%20T.let%28x2%2C%20Parent%5BString%5D%29%0A%0A%23%20%60Parent%3A%3AX%60%20is%20covariant%2C%20so%20%22String%20%3C%3A%20T.any%28String%2C%20Integer%29%22%0A%23%20implies%20%22Parent%5BString%5D%20%3C%3A%20Parent%5BT.any%28String%2C%20Integer%29%5D%22%0Ax4%20%3D%20T.let%28x3%2C%20Parent%5BT.any%28Integer%2C%20String%29%5D%29%0A%0Ay1%20%3D%20Child%5BT.any%28String%2C%20Symbol%29%5D.new%0AT.let%28y1%2C%20Parent%5BT.any%28Integer%2C%20String%29%5D%29">→ View full example on sorbet.run</a></p>
<h2><a class="anchor" aria-hidden="true" id="5016"></a><a href="#5016" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5016</h2>
<blockquote>
<p>Note: more recent versions of Sorbet have eliminated this error–it is now possible to define generic classes with covariant and contravariant type members.</p>
</blockquote>
<p>Sorbet does not allow classes to be covariant nor contravariant.</p>
<p><strong>Why?</strong> The design of generic classes and interfaces in Sorbet was heavily inspired by the design of C#. This exact question has been answered for C# by Eric Lippert, who worked on the design and implementation of C# for many years.</p>
<p>→ <a href="https://stackoverflow.com/questions/2733346/why-isnt-there-generic-variance-for-classes-in-c-sharp-4-0/2734070#2734070">Why isn’t there variance for generic classes?</a></p>
<p>The answer concludes that the main selling point of having covariant classes is to make immutable generic classes, at the cost of a more complex implementation of generics.</p>
<h2><a class="anchor" aria-hidden="true" id="5017"></a><a href="#5017" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5017</h2>
<p>The <code>type_member</code> and <code>type_template</code> declarations from a parent class must all be repeated in the same order in a child class (and before any newly-added type members belonging only to the child class).</p>
<p>One non-obvious way this error can manifest is via code generation tooling. If a tool attempts to generate <code>type_member</code> declarations using runtime reflection, but does them out of order, that will confuse Sorbet. Ask the owner of the code generator for help resolving the problem.</p>
<h2><a class="anchor" aria-hidden="true" id="5018"></a><a href="#5018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5018</h2>
<p>A child class defined a normal constant with a name that was already in use as a <code>type_member</code> in the parent class. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  extend T::Generic

  X = type_member
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent</span>
  X = <span class="hljs-number">0</span> <span class="hljs-comment"># error!</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, since <code>X</code> is declared as a <code>type_member</code> in the parent, it must also be declared as a <code>type_member</code> in the child, and cannot be changed to some other kind of constant in the child.</p>
<h2><a class="anchor" aria-hidden="true" id="5019"></a><a href="#5019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5019</h2>
<p>Abstract methods must not have bodies. For more information, see <a href="/docs/abstract">Abstract Classes and Interfaces</a>. Despite these methods not having a body, Sorbet’s <a href="/docs/runtime">runtime support</a> via the <code>sorbet-runtime</code> gem will convert these methods to raise. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">IService</span></span>
  extend T::Sig
  extend T::Helpers
  interface!

  sig { abstract.returns(String) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">port</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span></span>
  <span class="hljs-keyword">include</span> IService
  <span class="hljs-comment"># For sake of example, let's "forget" to implement `port`</span>
  <span class="hljs-comment"># (Sorbet would report a static error here)</span>
<span class="hljs-keyword">end</span>

MyService.new.port <span class="hljs-comment"># raises an exception at runtime:</span>

<span class="hljs-comment"># example.rb:16:</span>
<span class="hljs-comment">#   The method `port` on `IService` is declared as `abstract`.</span>
<span class="hljs-comment">#   It does not have an implementation.</span>
</code></pre>
<p>So you do not need to manually insert a <code>raise</code> inside the body of an abstract method.</p>
<p>If you would like to define a method in an abstract class or interface with a default implementation, use the <code>overridable</code> annotation on the signature:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractService</span></span>
  extend T::Sig

  <span class="hljs-comment"># Default port of 8080, but can be overridden in the child class.</span>
  sig { overridable.returns(String) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">port</span>;</span> <span class="hljs-string">'8080'</span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5020"></a><a href="#5020" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5020</h2>
<p>There are a few constraints around how methods like <code>include</code>, <code>extend</code>, <code>mixes_in_class_methods</code> <a href="/docs/abstract">(docs)</a>, and <code>requires_ancestor</code> <a href="/docs/requires-ancestor">(docs)</a> work.</p>
<ul>
<li><code>include</code> and <code>extend</code> must be given a constant that Sorbet can <em>statically</em> see resolve to a <code>module</code>. If a codebase is using metaprogramming to define constants that are later mixed with these methods, the codebase must either:
<ul>
<li>Ensure that all relevant <code>include</code> and <code>extend</code> targets are statically defined in <code>*.rb</code> or <code>*.rbi</code> files that are not being ignored, or</li>
<li>Hide the <code>include</code> or <code>extend</code> invocations from Sorbet by using <a href="/docs/static"><code># typed: ignore</code> sigils</a> to ignore the entire file, or</li>
<li>Hide only the individual call from Sorbet statically using something like <code>send(:include, ...)</code>.</li>
</ul></li>
<li><code>mixes_in_class_methods</code> and <code>requires_ancestor</code> must only be declared in a <code>module</code>, not a <code>class</code>. Classes are never mixed into other classes or modules, so these methods would have no meaning in a class.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5021"></a><a href="#5021" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5021</h2>
<p>Sorbet requires that classes or modules which define <code>abstract</code> methods are also marked as abstract using either <code>abstract!</code> or <code>interface!</code>.</p>
<p>For more information, see <a href="/docs/abstract">Abstract Classes and Interfaces</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5022"></a><a href="#5022" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5022</h2>
<p>Sorbet requires that modules marked <code>interface!</code> must only have abstract methods. To have a module with some abstract methods and some implemented methods, use <code>abstract!</code> in the module instead.</p>
<p>Apart from this error message, there is otherwise essentially no difference between abstract modules and interface modules. <code>interface!</code> is provided mostly as a way for the author of a piece of code to declare intent to the reader more than anything else.</p>
<h2><a class="anchor" aria-hidden="true" id="5023"></a><a href="#5023" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5023</h2>
<p>Some modules require specific functionality in the receiving class to work. For example <code>Enumerable</code> needs a <code>each</code> method in the target class.</p>
<p>Failing example in <a href="https://sorbet.run/#%23%20typed%3A%20true%0A%0Aclass%20Example%0A%20%20include%20Enumerable%0Aend">sorbet.run</a>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span></span>
  <span class="hljs-keyword">include</span> Enumerable
<span class="hljs-keyword">end</span>
</code></pre>
<p>To fix this, implement the required abstract methods in your class to provide the required functionality.</p>
<p>Passing example in <a href="https://sorbet.run/#%23%20typed%3A%20true%0A%0Aclass%20Example%0A%20%20include%20Enumerable%0A%0A%20%20def%20each%28%26blk%29%0A%0A%20%20end%0Aend">sorbet.run</a>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span></span>
  <span class="hljs-keyword">include</span> Enumerable

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">each</span><span class="hljs-params">(&amp;blk)</span></span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5024"></a><a href="#5024" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5024</h2>
<p>This error usually happens when attempting to define a cyclic type alias:</p>
<pre><code class="hljs css language-ruby">X = T.type_alias {X} <span class="hljs-comment"># error: Unable to resolve right hand side of type alias</span>
</code></pre>
<p>Note that Sorbet does not support making recursive type aliases. To make a recursively-defined data structure, see <a href="/docs/sealed#approximating-algebraic-data-types">Approximating algebraic data types</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5025"></a><a href="#5025" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5025</h2>
<blockquote>
<p><strong>Note</strong>: This error has been relaxed in newer Sorbet versions. It has been replaced by <a href="#5075">5075</a>.</p>
</blockquote>
<p>Sorbet does not currently support type aliases in generic classes.</p>
<p>This limitation was crafted early in the development of Sorbet to entirely sidestep problems that can arise in the design of a type system leading to unsoundness. (Sorbet users curious about type system design may wish to read <a href="https://lptk.github.io/programming/2019/09/13/type-projection.html">What is Type Projection in Scala, and Why is it Unsound?</a>.)</p>
<p>As a workaround, define type aliases somewhere else. Unfortunately this does mean it is not currently possible to define type aliases that reference type members defined by a generic class.</p>
<h2><a class="anchor" aria-hidden="true" id="5026"></a><a href="#5026" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5026</h2>
<p>Various classes in the standard library have been defined as generic classes retroactively, not via Sorbet’s built-in support for generics. Sorbet’s usual mechanism for defining custom generic classes is to define the <code>[]</code> method on the generic class’s singleton class, so that syntax like <code>MyGenericClass[Integer]</code> is valid code at runtime.</p>
<p>However for various stdlib generic classes, this syntax is already taken. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># BAD EXAMPLE</span>

Array[Integer]
<span class="hljs-comment"># =&gt; evaluates at runtime to `[Integer]`</span>
<span class="hljs-comment"># (i.e. a list with one element: the `Integer` class object)</span>
</code></pre>
<p>To use these standard library classes in type annotations, prefix the generic class’s name with <code>T::</code>, like this:</p>
<pre><code class="hljs css language-ruby">sig { returns(T::Array[Integer]) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> [<span class="hljs-number">0</span>]; <span class="hljs-keyword">end</span>
</code></pre>
<p>For more information, see <a href="/docs/stdlib-generics">Arrays, Hashes, and Generics in the Standard Library</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5027"></a><a href="#5027" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5027</h2>
<blockquote>
<p>This error is opt-in, behind the <code>--check-out-of-order-constant-references</code> flag.</p>
<p>Sorbet does not check this by default because certain codebases make clever usage of Ruby’s <code>autoload</code> mechanism to allow all constants to be referenced before their definitions.</p>
</blockquote>
<p>This error fires when a constant is referenced before it is defined.</p>
<pre><code class="hljs css language-ruby">puts X <span class="hljs-comment"># error: `X` referenced before it is defined</span>
X = <span class="hljs-number">1</span>
</code></pre>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Foo</span></span>
  A = X
    <span class="hljs-comment"># ^ error: `Foo::X` referenced before it is defined</span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">X</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Generally, Sorbet is not opinionated about definition-reference ordering. It assumes files are required in the correct order or at the correct times to ensure that definitions are available before they’re referenced.</p>
<p>However, if a constant is defined in a single file, Sorbet can detect when it’s been referenced in that file ahead of its definition (because in the single-file case, it doesn’t matter whether or in what order any require statements happen). There are some limitations:</p>
<h3><a class="anchor" aria-hidden="true" id="load-time-scope-must-be-established-definitively"></a><a href="#load-time-scope-must-be-established-definitively" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Load-time scope must be established definitively</h3>
<p>Sorbet has to prove definitively that a given constant is accessed out-of-order at load time. It cannot track accesses across function calls or blocks, meaning that the following code, while technically unloadable, will not throw a Sorbet error.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span><span class="hljs-params">(&amp;blk)</span></span>
    <span class="hljs-keyword">yield</span>
  <span class="hljs-keyword">end</span>

  bar <span class="hljs-keyword">do</span>
    A = X <span class="hljs-comment"># this will not report an error</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">X</span>;</span> <span class="hljs-keyword">end</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="symbols-have-to-be-guaranteed-to-exist-only-in-one-file"></a><a href="#symbols-have-to-be-guaranteed-to-exist-only-in-one-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Symbols have to be guaranteed to exist only in one file</h3>
<p>In the above example, if <code>Foo::X</code> is also declared in another file, the error will not fire. In such cases, the other file that defines <code>X</code> may get required first, so Sorbet cannot prove that there will be a problem referencing <code>X</code> in this file.</p>
<p>Ways to fix the error include:</p>
<ul>
<li>Re-ordering the constant access below the declaration.</li>
<li>In the case of classes, adding an empty pre-declaration before the access.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5028"></a><a href="#5028" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5028</h2>
<p>In <code># typed: strict</code> files, Sorbet requires that all constants are annotated with a <code>T.let</code>.</p>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>.</p>
<p>See also: <a href="#6002">6002</a>, <a href="#7017">7017</a>, <a href="#7027">7027</a>, <a href="#7043">7043</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5030"></a><a href="#5030" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5030</h2>
<p>A constant cannot store a reference to itself, like this:</p>
<pre><code class="hljs css language-ruby">X = X
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5031"></a><a href="#5031" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5031</h2>
<p>Constants are not allowed to resolve through type aliases. For example, this is an error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  X = <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>

AliasToA = T.type_alias {A}

AliasToA::X <span class="hljs-comment"># error: not allowed</span>
</code></pre>
<p><strong>Why</strong>? A number of reasons:</p>
<ul>
<li><p>Type aliases do not always store references to plain classes. For example, sometimes type aliases store references to types like <code>T.nilable(A)</code>. Sorbet doesn’t allow resolving constants through type aliases for the same reason that it doesn’t allow writing <code>T.nilable(A)::X</code>.</p></li>
<li><p>The runtime representation of type aliases do not behave like constants at runtime, so <code>AliasToA::X</code> would not actually resolve to <code>A::X</code> at runtime.</p></li>
</ul>
<p>If the type alias is merely an alternate name for an existing constant, use a class alias not a type alias:</p>
<pre><code class="hljs css language-ruby">AliasToA = A
AliasToA::A <span class="hljs-comment"># allowed</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5032"></a><a href="#5032" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5032</h2>
<p>See the docs for error code <a href="#5020">5020</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5033"></a><a href="#5033" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5033</h2>
<p>Final methods cannot be overridden by definition. See <a href="/docs/final">Final Methods, Classes, and Modules</a> for more information.</p>
<p>The error code 5033 is raised only statically, but it is worth noting that attempting to the override of a final method statically but still have the method overridden at runtime will not work—Sorbet’s runtime support for <code>final</code> methods prevents methods from being overridden at runtime as well. This is intentional. Final methods cannot even be overridden or redefined by mocks or stubs in a test suite.</p>
<h2><a class="anchor" aria-hidden="true" id="5034"></a><a href="#5034" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5034</h2>
<p>Sorbet does not support creating normal Ruby constant aliases to type aliases. Once a type alias is created, all subsequent aliases must also be type aliases.</p>
<p>Concretely, this is not allowed:</p>
<pre><code class="hljs css language-ruby">A = T.type_alias {Integer}
B = A <span class="hljs-comment"># error: Reassigning a type alias is not allowed</span>
</code></pre>
<p>while this is:</p>
<pre><code class="hljs css language-ruby">A = T.type_alias {Integer}
B = T.type_alias {A}
</code></pre>
<p>(Why? This is due to design tradeoffs to enforce stronger internal invariants. Basically, Sorbet can emit more reliable warnings when users declare their intent to create a new type alias.)</p>
<h2><a class="anchor" aria-hidden="true" id="5035"></a><a href="#5035" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5035</h2>
<p>There are two cases when Sorbet might produce this error code:</p>
<ol>
<li><p>A method was marked <code>override</code>, but sorbet was unable to find a method in the class’s ancestors that would be overridden. Ensure that the method being overridden exists in the ancestors of the class defining the <code>override</code> method, or remove <code>override</code> from the signature that’s raising the error.</p>
<p>If the parent method definitely exists at runtime, it might be hidden in a <a href="static#file-level-granularity-strictness-levels"><code># typed: ignore</code></a> file, or defined via metaprogramming. To fix, either raise the <code>typed</code> sigil of that file above <code>ignore</code>, or generate an <a href="rbi">RBI file</a> that contains signatures for the classes and methods that file defines.</p></li>
<li><p>Sorbet found the method that this method overrides, but the override method is not valid. An override method must accept at least as many arguments as the parent method, with types at least as wide as the parent’s types, and return a value that is at most as wide as the parent’s return type. This is in keeping with the <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov substitution principle</a>.</p></li>
</ol>
<p>See <a href="/docs/override-checking">Override Checking</a> for more.</p>
<h2><a class="anchor" aria-hidden="true" id="5036"></a><a href="#5036" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5036</h2>
<p>See <a href="#5014">5014</a>. 5036 is the same error as <a href="#5014">5014</a> but slightly modified to allow more common Ruby idioms to pass by in <code># typed: true</code> (5036 is only reported in <code># typed: strict</code>).</p>
<h2><a class="anchor" aria-hidden="true" id="5037"></a><a href="#5037" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5037</h2>
<p>Sorbet must be able to statically resolve a method to create an alias to it.</p>
<p>Here, the method is created through a DSL called <code>data_accessor</code> which defines methods at runtime through meta-programming:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">data_accessor</span><span class="hljs-params">(key)</span></span>
    define_method(key) <span class="hljs-keyword">do</span>
      data[key]
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> &lt; Base</span>
  data_accessor <span class="hljs-symbol">:foo</span>

  alias_method <span class="hljs-symbol">:bar</span>, <span class="hljs-symbol">:foo</span> <span class="hljs-comment"># error: Can't make method alias from `bar` to non existing method `foo`</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>One way to make those methods visible statically is to add a declaration for them in an <a href="https://sorbet.org/docs/rbi">RBI file</a>. For example, we can write our definitions as RBI under <code>sorbet/rbi/shims/foo.rbi</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># sorbet/rbi/shims/foo.rbi</span>
<span class="hljs-comment"># typed: true</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Sometimes, Sorbet will complain about an alias to a method coming from an included modules. For example, here <code>bar</code> is coming from the inclusion of <code>Bar</code> but Sorbet will complain about the method not existing anyway:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Bar</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-keyword">include</span> Bar

  alias_method <span class="hljs-symbol">:foo</span>, <span class="hljs-symbol">:bar</span> <span class="hljs-comment"># error: Can't make method alias from `foo` to non existing method `bar`</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>It’s because Sorbet resolves method aliases before it resolves includes. You can see an example of this behaviour <a href="https://sorbet.run/#%23%20typed%3A%20true%0A%0Amodule%20Bar%0A%20%20def%20bar%3B%20end%0Aend%0A%0Amodule%20Foo%0A%20%20include%20Bar%0A%0A%20%20alias_method%20%3Afoo%2C%20%3Abar%20%23%20aliases%20are%20resolved%20before%20includes%2C%20so%20%60bar%60%20is%20not%20found%20yet%0A%0A%20%20def%20baz%0A%20%20%20%20bar%20%23%20includes%20are%20resolved%20when%20we%20analyze%20this%20code%0A%20%20end%0Aend">here</a>. To workaround this limitation, we can replace the <code>alias_method</code> by a real method definition:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-keyword">include</span> Bar

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    bar
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5038"></a><a href="#5038" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5038</h2>
<p>When Sorbet detects that a file is using <code>sig</code> syntax for methods, it requires an explicit <code># typed:</code> sigil. The default <code># typed:</code> sigil in Sorbet is <code># typed: false</code>, so if you would like to add signatures in a method but change nothing else about how Sorbet checks your codebase, add <code># typed: false</code> to the top of the file.</p>
<p>However, note that Sorbet will not check the method body’s implementation against the signature at <code># typed: false</code>. When you see this error, it’s <strong>strongly recommended</strong> that you additionally upgrade the file to at least <code># typed: true</code>.</p>
<p>Regardless of whether the file where this error was reported is <code># typed: false</code> or <code># typed: true</code>, all other <code># typed: true</code> files in the codebase where Sorbet detects a call to this method will still be checked against this method’s signature.</p>
<p>To summarize:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- a.rb --</span>
<span class="hljs-comment"># typed: false</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Sig
  sig { params(<span class="hljs-symbol">x:</span> Integer).returns(String) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">int_to_string</span><span class="hljs-params">(x)</span></span>
    x <span class="hljs-comment"># no static error!</span>
      <span class="hljs-comment"># (this file is `# typed: false`)</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- b.rb --</span>
<span class="hljs-comment"># typed: true</span>

a = A.new
res = a.int_to_string(<span class="hljs-string">'not an int'</span>) <span class="hljs-comment"># error: Expected `Integer` but got `String`</span>

res + <span class="hljs-number">1</span> <span class="hljs-comment"># error: Expected `String` but found `Integer`</span>
</code></pre>
<p>For more information on these typedness levels, see <a href="/docs/static">Enabling Static Checks</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5039"></a><a href="#5039" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5039</h2>
<p>Sorbet relies on running inference in a method to be able to reveal the type of an expression with <code>T.reveal_type</code>. For performance reasons, Sorbet skips running inference in any file that is <code># typed: false</code>, because none of the other inference-related errors will be reported at that typedness level.</p>
<p>To use <code>T.reveal_type</code> in a file, upgrade the file to <code># typed: true</code> or above.</p>
<p>For more information on typedness levels, see <a href="/docs/static">Enabling Static Checks</a>.<br>
For more information on <code>T.reveal_type</code>, see <a href="/docs/troubleshooting">Troubleshooting</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5040"></a><a href="#5040" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5040</h2>
<p>Overloading a method (by providing multiple signatures for the method) is only allowed for methods defined in the Ruby standard library. The definitions for the Ruby standard library live inside Sorbet’s textual and binary payload, and cannot be updated by Sorbet end-users except by sending a pull request to Sorbet (see <a href="/docs/faq#it-looks-like-sorbets-types-for-the-stdlib-are-wrong">this FAQ entry for more</a>).</p>
<p>Note that even within the type definitions for the Ruby standard library, overloads in Sorbet come with substantial and somewhat fundamental limitations.</p>
<p>When attempting to define methods that would require overloading to properly type them, users are strongly recommended to instead define multiple separate methods. For example, instead of defining a method like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># BAD example, will not typecheck</span>

sig { params(<span class="hljs-symbol">idx:</span> Integer, <span class="hljs-symbol">raise_if_not_found:</span> TrueClass).returns(String) }
sig { params(<span class="hljs-symbol">idx:</span> Integer).returns(T.nilable(String)) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_element</span><span class="hljs-params">(idx, raise_if_not_found)</span></span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This attempts to define a <code>get_element</code> method that normally returns <code>T.nilable(String)</code> when called like <code>get_element(0)</code>, but will instead always return <code>String</code> or raise an exception if called like <code>get_element(0, true)</code>.</p>
<p>The idea is that these are conceptually two different methods, which is the suggestion for how to refactor the code:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">idx:</span> Integer).returns(T.nilable(String)) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_element</span><span class="hljs-params">(idx)</span></span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>

sig { params(idx).returns(String) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_element_or_raise</span><span class="hljs-params">(idx)</span></span>
  elem = get_element(idx)
  <span class="hljs-keyword">case</span> elem
  <span class="hljs-keyword">when</span> NilClass <span class="hljs-keyword">then</span> raise <span class="hljs-string">"No element found at index <span class="hljs-subst">#{idx}</span>"</span>
  <span class="hljs-keyword">else</span> elem
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>We recommend such a refactoring even when attempting to write sigs for methods defined in gems outside the standard library.</p>
<p>If this workaround will not work in your case, the final alternative is to either omit a signature for the method in question (or define an explicit signature where all parameters that cannot be typed accurately use <code>T.untyped</code>).</p>
<p>For more, see <a href="/docs/overloads">Methods with Overloaded Signatures</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5041"></a><a href="#5041" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5041</h2>
<p>See <a href="/docs/tstruct#structs-and-inheritance">T::Struct: Structs and inheritance</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="5042"></a><a href="#5042" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5042</h2>
<p>Sorbet does not allow defining a <code>private</code> method in an <code>interface!</code>. Note that this limitation is lifted if the <code>module</code> is declared <code>abstract!</code> not <code>interface</code>.</p>
<p>The justification for why this is an error has been lost to the sands of time. It seems reasonable to implement support for this.</p>
<p><a href="https://github.com/sorbet/sorbet/issues/5687">https://github.com/sorbet/sorbet/issues/5687</a></p>
<h2><a class="anchor" aria-hidden="true" id="5043"></a><a href="#5043" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5043</h2>
<p>The syntax for declaring type aliases has changed. What used to be written like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># BAD</span>
X = T.type_alias(Integer)
</code></pre>
<p>must now be written like this, with a block argument instead of a positional argument:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># GOOD</span>
X = T.type_alias {Integer}
</code></pre>
<p>The new syntax avoids incurring eagerly evaluating the right-hand side of the type alias, potentially forcing one or more constants to be autoloaded before they would otherwise be required. This improves load-time performance in lazily-loaded environments (usually: development environments) and also prevents certain Sorbet usage patterns from introducing load-time cyclic references.</p>
<h2><a class="anchor" aria-hidden="true" id="5044"></a><a href="#5044" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5044</h2>
<p>As background reading, you may first want to read more about <a href="/docs/generics#in-out-and-variance">variance</a>.</p>
<p>When a type member is declared normally, without any variance annotation, it is invariant. It can then appear either in the <code>params</code> list or the <code>returns</code> of a method’s signature, but then prevents using subtyping on that type member. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">IBox</span></span>
  extend T::Generic
  Elem = type_member
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">x:</span> IBox[Integer]).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  T.let(x, IBox[T.any(Integer, String)]) <span class="hljs-comment"># error: Argument does not have asserted type</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, even though <code>Integer</code> is a subtype of <code>T.any(Integer, String)</code>, <code>IBox[Integer]</code> is not a subtype of <code>IBox[T.any(Integer, String)]</code> because <code>Elem</code> has not been declared as <code>:out</code> nor <code>:in</code>, and is thus <strong>invariant</strong>.</p>
<p>To allow code like this, we can declare <code>Elem</code> using <code>:out</code>, but this comes at the restriction of only being able to use <code>Elem</code> in <strong>out positions</strong>. See <a href="/docs/generics#input-and-output-positions">Input and output positions</a> for more information.</p>
<p>The ways to fix this error include:</p>
<ul>
<li>Make the type invariant by removing the <code>:in</code> or <code>:out</code> annotation on the type. (This comes with the normal restrictions on invariant type members.)</li>
<li>Mark the method in question <code>private</code>. (This comes with the normal restrictions on <code>private</code> methods.)</li>
</ul>
<p>If neither of these works, you’ll have to reconsider whether it’s possible to statically type the code in question, and how best to rewrite the code so that it can be typed statically.</p>
<blockquote>
<p><strong>Note</strong> that <code>T.attached_class</code> is actually modeled as a covariant (<code>:out</code>) <code>type_template</code> defined automatically on all singleton classes, which means that <code>T.attached_class</code> can only be used in <code>:out</code> positions.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="5045"></a><a href="#5045" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5045</h2>
<p>This error regards misuse of user-defined generic classes. This error is reported even at <code># typed: true</code>. Otherwise, the error explanation is the same as for error code <a href="#5046">5046</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5046"></a><a href="#5046" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5046</h2>
<p>Generic classes must be passed all their generic type arguments when being used as types. For example:</p>
<pre><code class="hljs css language-ruby">T.let([], Array)              <span class="hljs-comment"># error</span>
T.let([], T::Array[Integer])  <span class="hljs-comment"># ok</span>
</code></pre>
<p>Many classes in the standard library are generic classes (<a href="/docs/stdlib-generics">see here</a>), and must be passed type arguments, including <code>Array</code> and <code>Hash</code>. Any user-defined generic classes must similarly be provided type arguments when used.</p>
<p>For legacy reasons relating to the initial rollout of Sorbet, misuse of generics defined in the standard library error are only reported at <code># typed: strict</code>, despite being reported at <code># typed: true</code> for all user-defined generic classes. (In an ideal world, it would have always been reported at <code># typed: true</code>, and we might change this in the future.)</p>
<h2><a class="anchor" aria-hidden="true" id="5047"></a><a href="#5047" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5047</h2>
<p>A class or module tried to inherit, include, or extend a final class or module.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Final</span></span>
  extend T::Helpers
  final!
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bad</span> &lt; Final;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5048"></a><a href="#5048" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5048</h2>
<p>A class or module was declared as final, but a method in the class or module was not explicitly declared as final with a final <code>sig</code>.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span></span>
  extend T::Helpers
  final!

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">no_sig</span>;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error</span>

  extend T::Sig

  sig { void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">non_final_sig</span>;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error</span>

  sig(<span class="hljs-symbol">:final</span>) {void}
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">final_sig</span>;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># good</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5049"></a><a href="#5049" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5049</h2>
<p>Parameters given type annotations in a method signature must be provided in the same order they appear in the method definition, even for keyword parameters for which order would not usually be required. This is for readability and consistency.</p>
<p>Also, all optional keyword parameters must come after all required keyword parameters.</p>
<h2><a class="anchor" aria-hidden="true" id="5050"></a><a href="#5050" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5050</h2>
<p>Sealed classes (or modules) can only be inherited (or included/extended) in the same file as the parent.</p>
<p>For more information, see <a href="/docs/sealed">Sealed Classes</a></p>
<h2><a class="anchor" aria-hidden="true" id="5051"></a><a href="#5051" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5051</h2>
<p>See <a href="/docs/override-checking">Override Checking</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5052"></a><a href="#5052" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5052</h2>
<p>When providing bounds for a type member with <code>lower</code> and <code>upper</code>, the lower type bound must be a subtype of (or equivalent to) the <code>upper</code> type bound.</p>
<p>Otherwise, it would never be possible to instantiate the generic type because the bounds would never be satisfiable.</p>
<h2><a class="anchor" aria-hidden="true" id="5053"></a><a href="#5053" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5053</h2>
<p>For classes that subclass generic classes, the child’s lower and upper bound must still be within the lower and upper bound range specified by the parent class.</p>
<p>This problem can come up from time to time when the parent class uses <code>fixed</code> when it meant to use <code>upper</code>. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntOrStringBox</span></span>
  extend T::Generic
  Elem = type_member {{<span class="hljs-symbol">fixed:</span> T.any(Integer, String)}}
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntBox</span> &lt; IntOrStringBox</span>
  Elem = type_member {{<span class="hljs-symbol">fixed:</span> Integer}} <span class="hljs-comment"># error, incompatible bound</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case we’d like <code>IntBox</code> to be a subclass of <code>IntOrString</code> box, but since we’re using <code>fixed</code> Sorbet prevents us.</p>
<p>A fix is to use only <code>upper</code> instead:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntOrStringBox</span></span>
  extend T::Generic
  Elem = type_member {{<span class="hljs-symbol">upper:</span> T.any(Integer, String)}}
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntBox</span> &lt; IntOrStringBox</span>
  Elem = type_member {{<span class="hljs-symbol">upper:</span> Integer}}
<span class="hljs-keyword">end</span>
</code></pre>
<p>But this does come at the slight cost that now all type annotations that used to be using <code>IntOrStringBox</code> without any generic type arguments must now provide one:</p>
<pre><code class="hljs css language-ruby">T.let(IntBox[Integer].new, IntOrStringBox) <span class="hljs-comment"># error: Generic class without type arguments</span>
</code></pre>
<p>The fix is to change all occurrences of <code>IntOrStringBox</code> without type arguments to specify <code>IntOrStringBox[T.any(Integer, String)]</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="5054"></a><a href="#5054" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5054</h2>
<p>Use of <code>implementation</code> has been replaced by <code>override</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="5055"></a><a href="#5055" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5055</h2>
<p>Sorbet does not consider a class “fully resolved” until all of its type members have also been fully resolved. Sorbet cannot fully resolve a type member in a class until all constants mentioned in its right-hand side have been fully resolved. So if any of those right-hand-side constants are themselves generic classes, Sorbet will detect a loop and report this error. Concretely:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Sig
  extend T::Generic

  X = type_member {{<span class="hljs-symbol">fixed:</span> B}} <span class="hljs-comment"># error: A::X is involved in a cycle</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span></span>
  extend T::Sig
  extend T::Generic

  X = type_member {{<span class="hljs-symbol">fixed:</span> A}} <span class="hljs-comment"># error: B::X is involved in a cycle</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5056"></a><a href="#5056" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5056</h2>
<p>The <code>T.experimental_attached_class</code> syntax has been stabilized and is now <code>T.attached_class</code>. Use the provided autocorrect to migrate.</p>
<h2><a class="anchor" aria-hidden="true" id="5057"></a><a href="#5057" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5057</h2>
<p>Static methods (like <code>self.foo</code>) can never be mixed into another class or module. Both <code>include</code> and <code>extend</code> only mix that module’s <em>instance</em> methods onto the target class or module. Classes can inherit static methods from their superclass, but only classes (not modules) can be superclasses.</p>
<p>Thus, a static, abstract method on a module is impossible to implement, and thus is a no-op.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyMixin</span></span>
  sig { abstract.void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>

  sig { abstract.void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">bar</span>;</span> <span class="hljs-keyword">end</span> <span class="hljs-comment"># error: Static methods in a module cannot be abstract</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Some alternatives:</p>
<ul>
<li><p>Use <code>mixes_in_class_methods</code>, which declares to Sorbet that when a module is included, some other module should be extended into the target class. <a href="/docs/abstract">Full documentation here</a>. This is the preferred option.</p></li>
<li><p>Separate the interface into two modules. Include one and extend the other in all the places where</p></li>
<li><p>Change the abstract module to an abstract class, and update all downstream references to inherit from this class instead of including the original module.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5058"></a><a href="#5058" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5058</h2>
<p>It’s an error to use <code>T.attached_class</code> to describe the type of method parameters. See the <a href="/docs/attached-class#tattached_class-as-an-argument">T.attached_class</a> documentation for a more thorough description of why this is.</p>
<h2><a class="anchor" aria-hidden="true" id="5059"></a><a href="#5059" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5059</h2>
<p>The syntax for the second argument to <code>T::NonForcingConstants.non_forcing_is_a?</code> is much more constrained than what Sorbet allows for when resolving arbitrary constant literals.</p>
<p>For more information, see <a href="/docs/non-forcing-constants">T::NonForcingConstants</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5060"></a><a href="#5060" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5060</h2>
<p>When applying a type argument to a generic class, the type argument must be between any <code>lower</code> and <code>upper</code> bound declared by the <code>type_member</code> (or <code>type_template</code>) declaration for that type parameter.</p>
<h2><a class="anchor" aria-hidden="true" id="5061"></a><a href="#5061" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5061</h2>
<p>A constant was marked private with Ruby’s <code>private_constant</code> method, which means it’s only valid to access that constant directly, with no constant literal prefix scope:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  X = <span class="hljs-number">0</span>
  private_constant <span class="hljs-symbol">:X</span>

  X <span class="hljs-comment"># ok</span>

  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Inner</span></span>
    X <span class="hljs-comment"># ok</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

A::X <span class="hljs-comment"># error</span>
</code></pre>
<p>If you must access the private constant, you will have to use <code>.const_get</code> to both hide the constant access from Sorbet and appease the Ruby VM:</p>
<pre><code class="hljs css language-ruby">A.const_get(<span class="hljs-symbol">:X</span>)
</code></pre>
<p>Note that this technique should be used very sparingly, and many codebases have lint rules or other coding conventions discouraging or even preventing the use of <code>const_get</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="5062"></a><a href="#5062" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5062</h2>
<p>Invalid syntax for <code>requires_ancestor</code>. See <a href="/docs/requires-ancestor">Requiring Ancestors</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="5063"></a><a href="#5063" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5063</h2>
<p>Useless <code>requires_ancestor</code>, because the given class or module is already an ancestor. See <a href="/docs/requires-ancestor">Requiring Ancestors</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="5064"></a><a href="#5064" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5064</h2>
<p>Using the <code>requires_ancestor</code> method, module <code>Bar</code> has indicated to Sorbet that it can only work properly if it is explicitly included along module <code>Foo</code>. In this example, we see that while module <code>Bar</code> is included in <code>MyClass</code>, <code>MyClass</code> does not include <code>Foo</code>.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Bar</span></span>
  extend T::Helpers

  requires_ancestor { Foo }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span></span>
    foo
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> <span class="hljs-comment"># error: `MyClass` must include `Foo` (required by `Bar`)</span></span>
  <span class="hljs-keyword">include</span> Bar
<span class="hljs-keyword">end</span>
</code></pre>
<p>The solution is to include <code>Foo</code> in <code>MyClass</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span></span>
  <span class="hljs-keyword">include</span> Foo
  <span class="hljs-keyword">include</span> Bar
<span class="hljs-keyword">end</span>
</code></pre>
<p>Other potential (albeit less common) sources of this error code are classes that are required to have some class as an ancestor:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Bar</span></span>
  extend T::Helpers

  requires_ancestor { Foo }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span></span>
    foo
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MySuperClass</span></span>
  extend T::Helpers
  <span class="hljs-keyword">include</span> Bar

  abstract!
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> &lt; MySuperClass <span class="hljs-comment"># error: `MyClass` must inherit `Foo` (required by `Bar`)</span></span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Ensuring <code>MyClass</code> inherits from <code>Foo</code> at some point will fix the error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MySuperClass</span> &lt; Foo</span>
  extend T::Helpers
  <span class="hljs-keyword">include</span> Bar

  abstract!
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> &lt; MySuperClass</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5065"></a><a href="#5065" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5065</h2>
<p>Unsatisfiable <code>requires_ancestor</code>. See <a href="/docs/requires-ancestor">Requiring Ancestors</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="5067"></a><a href="#5067" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5067</h2>
<p>A class’s superclass (the <code>Parent</code> in <code>class Child &lt; Parent</code>) must be statically resolvable to a class, not a module.</p>
<h2><a class="anchor" aria-hidden="true" id="5068"></a><a href="#5068" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5068</h2>
<p>Sorbet requires that class, module or constant definitions be namespaced unambiguously. For example, in this code:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">B</span></span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B::C</span></span>
   <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The definition <code>B::C</code> is ambiguous. In Ruby’s runtime, it resolves to <code>B::C</code> (and not <code>A::B::C</code>). However, things are different in the presence of a pre-declared filler namespace like below:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">B</span></span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">A</span></span>
  <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">B</span>;</span> <span class="hljs-keyword">end</span>

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B::C</span></span>
   <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case, the definition resolves to <code>A::B::C</code> in Ruby’s runtime.</p>
<p>By default, Sorbet assumes the presence of filler namespaces while typechecking, regardless of whether they are explicitly predeclared like in the second example. This means that in Sorbet’s view, the definition resolves to <code>A::B::C</code> in either case.</p>
<p>In Stripe’s codebase, this is generally not a problem at runtime, as we use Sorbet’s own autoloader generation to pre-declare filler namespaces, keeping the Ruby runtime’s behavior equivalent to Sorbet. However, the autoloader has some edge cases, which can often cause deviations between Ruby’s runtime and Sorbet. This error helps guard against these issues.</p>
<h2><a class="anchor" aria-hidden="true" id="5069"></a><a href="#5069" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5069</h2>
<p>There must be exactly one statement in a method signature (possibly a single chain of methods).</p>
<p>Sorbet used to allow syntax like</p>
<pre><code class="hljs css language-ruby">sig <span class="hljs-keyword">do</span>
  params(<span class="hljs-symbol">x:</span> Integer)
  returns(Integer)
<span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(x)</span></span>; x; <span class="hljs-keyword">end</span>
</code></pre>
<p>where the body of the <code>sig</code> block was allowed to have multiple methods not connected by a method call chain.</p>
<p>Use the provided autocorrect to convert the old syntax to the new syntax.</p>
<h2><a class="anchor" aria-hidden="true" id="5070"></a><a href="#5070" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5070</h2>
<p><code>T.nilable(T.untyped)</code> is just <code>T.untyped</code>, because <code>nil</code> is a valid value of type <code>T.untyped</code> (along with all other values).</p>
<h2><a class="anchor" aria-hidden="true" id="5071"></a><a href="#5071" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5071</h2>
<p>Providing a <code>.bind</code> when using <code>T.proc</code> is only valid on a method’s single block argument (<code>&amp;blk</code>), not on all arguments. The <code>.bind</code> is not actually a type annotation, but instead an instruction to the type inference algorithm about how to typecheck the body of the block. Type checking for the body of the block provided to a method call happens <strong>after</strong> type checking all other arguments, while type checking for lambda functions and procs passed as positional or keyword arguments happens <strong>before</strong> the proc value is checked against the <code>T.proc</code> type. For example:</p>
<pre><code class="hljs css language-ruby">sig <span class="hljs-keyword">do</span>
  params(
    <span class="hljs-symbol">f:</span> T.proc.returns(Integer),
    <span class="hljs-symbol">blk:</span> T.proc.returns(Integer),
  )
  .void
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(f, &amp;blk)</span></span>
<span class="hljs-keyword">end</span>

f = -&gt;() {<span class="hljs-number">0</span>} <span class="hljs-comment"># lambda is type checked here, before running type inference on</span>
             <span class="hljs-comment"># the `example` call below.</span>
example(f) <span class="hljs-keyword">do</span> <span class="hljs-comment"># call to `example` is typechecked next</span>
  <span class="hljs-number">1</span> <span class="hljs-comment"># block body is typechecked last</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Since the definition of the lambda <code>f</code> is typechecked entirely before the call to <code>example</code> is typechecked, no <code>.bind</code> annotation on any of <code>example</code>'s positional or keyword arguments would actually affect how the lambda is typechecked.</p>
<h2><a class="anchor" aria-hidden="true" id="5072"></a><a href="#5072" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5072</h2>
<p>See <a href="/docs/generics#type_member--type_template"><code>type_member</code> &amp; <code>type_template</code></a> in the generics docs for more.</p>
<p>There are two main cases where this error is reported:</p>
<ol>
<li>Using a <code>type_member</code> in a scope where only a <code>type_template</code> is allowed (and vice versa), but within the correct class.</li>
<li>Using either a <code>type_member</code> or <code>type_template</code> in a completely unrelated class.</li>
</ol>
<p>Neither is allowed, but in each case the solution is different.</p>
<h3><a class="anchor" aria-hidden="true" id="type_member--type_template-mismatch"></a><a href="#type_member--type_template-mismatch" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>type_member</code> / <code>type_template</code> mismatch</h3>
<p>A <code>type_member</code> is limited in scope to only appear in instance methods of the given class. A <code>type_template</code> is limited in scope to only appear in singleton class methods of the given class. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span></span>
  extend T::Sig
  extend T::Generic

  Elem = type_member

  sig { returns(Elem) } <span class="hljs-comment"># error</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">example</span></span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This example doesn’t make sense because <code>Elem</code> in this case is the element type of our generic <code>Box</code> type. For example, instances of <code>Box[Integer]</code> and <code>Box[String]</code> hold <code>Integer</code>'s and <code>String</code>'s respectively. Meanwhile, a call to the method <code>Box.example</code> wouldn’t have a meaning, because there is no instance of <code>Box</code> in this call to <code>Box.example</code> whose element type should be used.</p>
<p>Sometimes this error comes up when attempting to do something like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractSerializable</span></span>
  extend T::Sig
  extend T::Generic
  abstract!
  SerializeType = type_template

  sig { abstract.returns(SerializeType) } <span class="hljs-comment"># error</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">serialize</span>;</span> <span class="hljs-keyword">end</span>
  sig <span class="hljs-keyword">do</span>
    abstract
      .params(<span class="hljs-symbol">raw_input:</span> SerializeType)
      .returns(T.attached_class)
  <span class="hljs-keyword">end</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">deserialize</span><span class="hljs-params">(raw_input)</span></span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> &lt; AbstractSerializable</span>
  SerializeType = type_template {{<span class="hljs-symbol">fixed:</span> String}}

  <span class="hljs-comment"># ... implement abstract methods ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this case, the idea is that some subclasses may want to serialize to a <code>String</code>, some may want to serialize to an <code>Integer</code>, some may want to serialize to a <code>Symbol</code>, etc. and the child class should get to specify that, by using <code>fixed</code> on the <code>type_template</code>.</p>
<p>Even in these cases, Sorbet does not let the <code>type_template</code> be referenced from an instance method. The solution is to instead specify both <code>type_member</code> and a <code>type_template</code>, and have the child class fix both of them:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractSerializable</span></span>
  <span class="hljs-comment"># ...</span>
  SerializeTypeMember = type_member
  SerializeTypeTemplate = type_template
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> &lt; AbstractSerializable</span>
  SerializeTypeMember = type_member {{<span class="hljs-symbol">fixed:</span> String}}
  SerializeTypeTemplate = type_template {{<span class="hljs-symbol">fixed:</span> String}}
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="in-an-unrelated-class"></a><a href="#in-an-unrelated-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>In an unrelated class</h3>
<p>In this case, the error usually indicates a more fundamental problem with the design, which means that the way forward is more nuanced.</p>
<p>Consider a class like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span></span>
  extend T::Generic
  Elem = type_member

  sig { params(<span class="hljs-symbol">val:</span> Elem).void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(val)</span></span>; @val = val; <span class="hljs-keyword">end</span>

  sig { returns(Elem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val</span>;</span> @val; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>We might want to write a function which gets the element out of an arbitrary <code>Box</code>:</p>
<pre><code class="hljs css language-ruby">sig <span class="hljs-keyword">do</span>
  type_parameters(<span class="hljs-symbol">:Elem</span>)
    .params(<span class="hljs-symbol">box:</span> Box[T.type_parameter(<span class="hljs-symbol">:Elem</span>)])
    .returns(Box[T.type_parameter(<span class="hljs-symbol">:Elem</span>)]<span class="hljs-symbol">:</span><span class="hljs-symbol">:Elem</span>)
    <span class="hljs-comment">#                                    ^^^^^^ ❌</span>
<span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example_bad1</span><span class="hljs-params">(box)</span></span>
  box.val
<span class="hljs-keyword">end</span>
</code></pre>
<p>This code does not work, because we can’t access arbitrary type members inside a class. In this case, the fix is easy enough: just <code>returns(T.type_parameter(:Elem))</code>:</p>
<pre><code class="hljs css language-ruby">sig <span class="hljs-keyword">do</span>
  type_parameters(<span class="hljs-symbol">:Elem</span>)
    .params(<span class="hljs-symbol">box:</span> Box[T.type_parameter(<span class="hljs-symbol">:Elem</span>)])
    .returns(T.type_parameter(<span class="hljs-symbol">:Elem</span>)) <span class="hljs-comment"># ✅</span>
<span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example_good1</span><span class="hljs-params">(box)</span></span>
  box.val
<span class="hljs-keyword">end</span>
</code></pre>
<p>Another thing that might cause problems: we want to make the <code>type_member</code> fixed, and then access it like a type alias:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComplicatedBox</span> &lt; Box</span>
  Elem = type_member { {<span class="hljs-symbol">fixed:</span>  T.any(Integer, String, Float, Symbol)} }
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">box:</span> ComplicatedBox).returns(ComplicatedBox::Elem) }
<span class="hljs-comment">#                                         ^^^^^^^^^^^^^^^^^^^^ ❌</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example_bad2</span><span class="hljs-params">(box)</span></span>
  box.val
<span class="hljs-keyword">end</span>
</code></pre>
<p>Type members are not type aliases. If you want something that works like a type alias, make a type alias, and then use that both in the <code>fixed</code> annotation of the type member, and in any signature where you’d like to use that type:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComplicatedBox</span> &lt; Box</span>
  Type = T.type_alias { T.any(Integer, String, Float, Symbol) }
  Elem = type_member { {<span class="hljs-symbol">fixed:</span> Type} } <span class="hljs-comment"># ✅</span>
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">box:</span> ComplicatedBox).returns(ComplicatedBox::Type) }
<span class="hljs-comment">#                                         ^^^^^^^^^^^^^^^^^^^^ # ✅</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example_good2</span><span class="hljs-params">(box)</span></span>
  box.val
<span class="hljs-keyword">end</span>
</code></pre>
<p>For more information on why type members are not type aliases and vice versa, see <a href="#5075">5075</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5073"></a><a href="#5073" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5073</h2>
<p>Abstract classes cannot be instantiated by definition. See <a href="/docs/abstract">Abstract Classes and Interfaces</a> for more information.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Abstract</span></span>
  extend T::Sig
  extend T::Helpers
  abstract!

  sig { abstract.void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

Abstract.new <span class="hljs-comment"># error: Attempt to instantiate abstract class `Abstract`</span>
</code></pre>
<p>To fix this error, there are some options:</p>
<ul>
<li>If the class which is marked <code>abstract!</code> does not actually have any <code>abstract</code> methods, simply remove <code>abstract!</code> from the class definition to fix the error.</li>
<li>If the class <em>does</em> have <code>abstract</code> methods, find some concrete subclass to call <code>new</code> on instead. If the call to <code>new</code> is in a test file, you may wish to make a new, test-only subclass of the abstract class. (Depending on the specifics of the test, it may even be possible to simply define all the abstract methods to simply <code>raise</code>, so that other aspects of the parent class can be tested.)</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5074"></a><a href="#5074" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5074</h2>
<p>A module marked <code>has_attached_class!</code> can only be mixed into a class with <code>extend</code>, or a module with <code>include</code>. When mixing a <code>has_attached_class!</code> module into another module, both modules must declare <code>has_attached_class!</code>.</p>
<p>For more information, see the docs for <a href="/docs/attached-class"><code>T.attached_class</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5075"></a><a href="#5075" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5075</h2>
<p>Sorbet does not support type aliases that alias to generic type members (or type templates, which are just <a href="/docs/generics#type_member--type_template">type members owned by the singleton class</a>). At the moment, there is no perfect workaround, though in the future Sorbet will support this by allowing generic type members to be bounded by other generic type members. The current best option is simply to copy the contents of the type alias into all the places where you would like to use that type alias.</p>
<p>Here’s why Sorbet does not allow type <em>aliases</em> to alias to generic type members. Consider this motivating example, of a generic box type which can be possibly empty:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PossiblyEmptyBox</span></span>
  extend T::Generic

  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IsEmpty</span>;</span> <span class="hljs-keyword">end</span>

  Elem = type_member
  MaybeElem = T.type_alias { T.any(IsEmpty, Elem) } <span class="hljs-comment"># ❌ NOT allowed</span>

  <span class="hljs-comment"># ...</span>

  sig { returns(Elem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val!</span>;</span> <span class="hljs-keyword">end</span>

  sig { returns(MaybeElem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Our class is generic in <code>Elem</code>, so that this container can hold an arbitrary type. But we have a lot of methods that will return <a href="/docs/union-types">either</a> the <code>Elem</code> that this box contains, or an instance of some <code>IsEmpty</code> class if there is nothing currently in the box. (Presumably: there are a lot of methods where <code>MaybeElem</code> is used, and we don’t want to have to repeat ourselves by writing <code>T.any(IsEmpty, Elem)</code> all over the place.)</p>
<p>This is not allowed, because the restrictions on where type aliases can be used from are not the same as those that apply to type members:</p>
<ul>
<li><p>Type aliases can be used anywhere, regardless of where the type alias is defined.</p></li>
<li><p>Type members can only be used <strong>inside</strong> the enclosing class where they were defined (as if they were declared with <code>private_constant</code>) <strong>and</strong> can only be used inside methods and instance variables of the instance class (or for type templates: methods and instance variables of the singleton class).</p></li>
</ul>
<p>If Sorbet were to allow type members to appear in type aliases, that type alias would have to essentially copy all the rules of where that type alias is allowed to be used from the type members inside it.</p>
<p>But at that point, the type alias would be no different from defining a second, <a href="/docs/generics#bounds-on-type_members-and-type_templates-fixed-upper-lower"><code>fixed</code></a> type member on the same class:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PossiblyEmptyBox</span></span>
  <span class="hljs-comment"># ...</span>
  Elem = type_member
  MaybeElem = type_member {
    {<span class="hljs-symbol">fixed:</span> T.any(IsEmpty, Elem)}
    <span class="hljs-comment"># ^ should be allowed in the future</span>
  }

  sig { returns(Elem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val!</span>;</span> <span class="hljs-keyword">end</span>

  sig { returns(MaybeElem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>fixed</code> annotation makes <code>MaybeElem</code> exactly like a type alias with the same scope as <code>Elem</code>. This solution avoids having to solve the problem of “copying all the scoping rules of a type member onto a type alias.”</p>
<p>There is only one gotcha: at the moment Sorbet does not support using type members in <code>fixed</code>, <code>upper</code>, or <code>lower</code> bounds of a type member. We expect to relax this constraint in the future, which means that at the moment there is no way to define something that acts like a type alias to a generic type member.</p>
<p>The only way forward is to copy the contents of the type alias into all the places where you’d like to use that type alias, like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PossiblyEmptyBox</span></span>
  <span class="hljs-comment"># ...</span>
  Elem = type_member

  sig { returns(Elem) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val!</span>;</span> <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># Use `T.any` instead of `MaybeElem`</span>
  sig { returns(T.any(IsEmpty, Elem)) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">val</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="5076"></a><a href="#5076" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5076</h2>
<p><code>T.nilable</code> expects exactly one argument. A common typo is <code>T.nilable(X, Y)</code> to mean <code>T.nilable(T.any(X, Y))</code> (which would also be the same as <code>T.any(NilClass, X, Y)</code>).</p>
<p>See <a href="/docs/nilable-types">Nilable Types</a> and <a href="/docs/union-types">Union Types</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="5077"></a><a href="#5077" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5077</h2>
<p>Sorbet does not allow value literals in type syntax. None of these are allowed:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ❌NOT SUPPORTED ❌</span>
T.any(<span class="hljs-symbol">:left</span>, <span class="hljs-symbol">:right</span>)
T.any(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
T.any(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>)
</code></pre>
<p>There are two options:</p>
<ul>
<li><p>Widen the type to whatever type underlies the literal, like <code>Symbol</code> or <code>Integer</code> or <code>String</code>, and check the values at runtime (not statically in the type system).</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">direction:</span> Symbol).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span><span class="hljs-params">(direction)</span></span>
  <span class="hljs-keyword">if</span> ![<span class="hljs-symbol">:left</span>, <span class="hljs-symbol">:right</span>].<span class="hljs-keyword">include</span>?(direction)
    raise ArgumentError.new(<span class="hljs-string">"Bad direction: <span class="hljs-subst">#{direction}</span>"</span>)
  <span class="hljs-keyword">end</span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre></li>
<li><p>Define a <a href="/docs/tenum"><code>T::Enum</code></a> and use that instead, which requires converting to and from the literal type when calling the method:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Direction</span> &lt; T::Enum</span>
  enums <span class="hljs-keyword">do</span>
    Left = new(<span class="hljs-symbol">:left</span>)
    Right = new(<span class="hljs-symbol">:right</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">direction:</span> Direction).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span><span class="hljs-params">(direction)</span></span>
  <span class="hljs-comment"># ...</span>
  direction_symbol = direction.serialize
<span class="hljs-keyword">end</span>

direction_symbol = <span class="hljs-comment"># ...</span>
direction = Direction.deserialize(direction_symbol)
move(direction)
</code></pre></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="5078"></a><a href="#5078" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5078</h2>
<p>This error is functionally equivalent to error <a href="#7010">7010</a>. It is reported during the inference stage, while 5078 is reported during the resolver stage.</p>
<p>For detailed information and examples, please refer to the documentation for error <a href="#7010">7010</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5079"></a><a href="#5079" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5079</h2>
<p>This error is functionally equivalent to error <a href="#7032">7032</a>. It is reported during the inference stage, while 5079 is reported during the resolver stage.</p>
<p>For detailed information and examples, please refer to the documentation for error <a href="#7032">7032</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="5080"></a><a href="#5080" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5080</h2>
<p>The <code>has_attached_class!</code> annotation is only allowed in a Ruby <code>module</code>, not a Ruby <code>class</code>. For more, see the docs: <a href="/docs/attached-class"><code>T.attached_class</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="6001"></a><a href="#6001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6001</h2>
<p>Certain Ruby keywords like <code>break</code>, <code>next</code>, and <code>retry</code> can only be used inside a Ruby block.</p>
<h2><a class="anchor" aria-hidden="true" id="6002"></a><a href="#6002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6002</h2>
<p>In <code># typed: strict</code> files, Sorbet requires that all instance and class variables are annotated with a <code>T.let</code>.</p>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>.</p>
<p>See also: <a href="#5028">5028</a>, <a href="#7017">7017</a>, <a href="#7028">7028</a>, <a href="#7043">7043</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="6004"></a><a href="#6004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6004</h2>
<p>In order to statically check <a href="exhaustiveness">exhaustiveness</a>, Sorbet provides <code>T.absurd</code>, which lets people opt into exhaustiveness checks.</p>
<p><code>T.absurd</code> must be given a variable. If not, like in this example, it reports an error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- bad example --</span>

sig { returns(T.any(Integer, String)) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">returns_int_or_string</span>;</span> <span class="hljs-number">0</span>; <span class="hljs-keyword">end</span>

<span class="hljs-keyword">case</span> returns_int_or_string
<span class="hljs-keyword">when</span> Integer <span class="hljs-keyword">then</span> puts <span class="hljs-string">'got int'</span>
<span class="hljs-keyword">when</span> String <span class="hljs-keyword">then</span> puts <span class="hljs-string">'got string'</span>
<span class="hljs-comment"># error! `returns_int_or_string` is not a variable!</span>
<span class="hljs-keyword">else</span> T.absurd(returns_int_or_string)
<span class="hljs-keyword">end</span>
</code></pre>
<p>While it looks like <code>returns_int_or_string</code> is the name of a variable, it’s actually a method call (Ruby allows method calls to omit parentheses). To fix this error, store the result of calling <code>returns_int_or_string</code> in a variable, and use that variable with the <code>case</code> and <code>T.absurd</code>:</p>
<pre><code class="hljs css language-ruby">sig { returns(T.any(Integer, String)) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">returns_int_or_string</span>;</span> <span class="hljs-number">0</span>; <span class="hljs-keyword">end</span>

<span class="hljs-comment"># calls returns_int_or_string, stores result in x</span>
x = returns_int_or_string

<span class="hljs-keyword">case</span> x
<span class="hljs-keyword">when</span> Integer <span class="hljs-keyword">then</span> puts <span class="hljs-string">'got int'</span>
<span class="hljs-keyword">when</span> String <span class="hljs-keyword">then</span> puts <span class="hljs-string">'got string'</span>
<span class="hljs-keyword">else</span> T.absurd(x)
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="6005"></a><a href="#6005" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6005</h2>
<p><code>T.bind</code> can only be called on <code>self</code>, syntactically.</p>
<p>To perform type assertions on non-<code>self</code> things, use <code>T.let</code> or <code>T.cast</code>.</p>
<p>See <a href="/docs/type-assertions">Type Assertions</a> for more.</p>
<h2><a class="anchor" aria-hidden="true" id="6006"></a><a href="#6006" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6006</h2>
<p>The program attempted to use <code>T.type_parameter</code> in a method body, but there was no such <code>T.type_parameter</code> in scope.</p>
<p>For more information, see the docs for <a href="/docs/generics#generic-methods">Generic methods</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7001"></a><a href="#7001" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7001</h2>
<p>Sorbet does not allow reassigning a variable to a different type within a loop or block. (Note that we model blocks similarly to loops, as in general they may execute 0, 1, or more times). Due to implementation constraints, Sorbet does not permit this behavior.</p>
<p>A prototypical example of code that might trigger this is code that sets a variable to <code>nil</code>, and then updates it if some value is found inside a loop:</p>
<pre><code class="hljs css language-ruby">found = <span class="hljs-literal">nil</span>

list.each <span class="hljs-keyword">do</span> <span class="hljs-params">|elem|</span>
  found = elem <span class="hljs-keyword">if</span> want?(elem)
<span class="hljs-keyword">end</span>
</code></pre>
<p>In most cases, we can fix this error by declaring the type of the loop variable outside the loop using <code>T.let</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># This is a type annotation that explicitly widens the type:</span>
found = T.let(<span class="hljs-literal">nil</span>, T.nilable(String))

list.each <span class="hljs-keyword">do</span> <span class="hljs-params">|elem|</span>
  found = elem <span class="hljs-keyword">if</span> want?(elem)
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>But my variable does not change its type, it is always a <code>Boolean</code>!</strong></p>
<p>In Ruby, there is no <code>Boolean</code> type. Instead, there are <code>FalseClass</code> and <code>TrueClass</code> types, the union of which defines <a href="/docs/class-types#booleans"><code>T::Boolean</code> type as a union type</a>.</p>
<p>When Sorbet encounters a variable declaration like <code>x = true</code>, it infers the type of <code>x</code> as <code>TrueClass</code>. An assignment to <code>x</code> later on in the same block such as <code>x = false</code> would imply that the variable is reassigned to a different type (namely, to <code>FalseClass</code> in this case).</p>
<p>For this reason, a loop such as the following triggers an error:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># Declares `found_valid` with type `FalseClass`</span>
found_valid = <span class="hljs-literal">false</span>

list.each <span class="hljs-keyword">do</span> <span class="hljs-params">|elem|</span>
  <span class="hljs-comment"># Might change the type of `found_valid` to `TrueClass`</span>
  found_valid = <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> valid?(elem) <span class="hljs-comment"># error: Changing the type of a variable is not permitted</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The fix, again, is to use <code>T.let</code> to widen the type to <code>T::Boolean</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># Declare `found_valid` with type `T::Boolean`</span>
found_valid = T.let(<span class="hljs-literal">false</span>, T::Boolean)

list.each <span class="hljs-keyword">do</span> <span class="hljs-params">|elem|</span>
  <span class="hljs-comment"># Does not change the type of `found_valid`</span>
  found_valid = <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> valid?(elem) <span class="hljs-comment"># ok</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7002"></a><a href="#7002" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7002</h2>
<p>This is a standard type mismatch. A method’s <code>sig</code> declares one type, but the actual value didn’t match. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-string">'str'</span> + <span class="hljs-symbol">:sym</span>  <span class="hljs-comment"># error: Expected `String` but found `Symbol(:"sym")` for argument `arg0`</span>
</code></pre>
<p>Even still, sometimes these errors can be rather confusing. Consider using <a href="/docs/troubleshooting"><code>T.reveal_type</code></a> to pin down the origin of why Sorbet thinks the types are what it says.</p>
<p><strong>Why does Sorbet think this is <code>nil</code>? I just checked that it’s not!</strong></p>
<p>That’s a <a href="flow-sensitive#limitations-of-flow-sensitivity">great question</a>, and probably the most common question people have when using Sorbet!</p>
<p>It’s answered here: <a href="flow-sensitive#limitations-of-flow-sensitivity">Limitations of flow-sensitivity</a></p>
<h2><a class="anchor" aria-hidden="true" id="7003"></a><a href="#7003" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7003</h2>
<p>This error indicates a call to a method we believe does not exist (a la Ruby’s <code>NoMethodError</code> exception). Some steps to debug:</p>
<ol>
<li><p>Double check that the code actually runs, either in the REPL, in CI, or with manual tests. If the method doesn’t actually exist when run, Sorbet caught a bug!</p></li>
<li><p>Even if the method exists when run, Sorbet still might report an error because the method won’t <strong>always</strong> be there. For example, maybe the value is <a href="/docs/nilable-types">nilable</a>, or we have a <a href="/docs/union-types">union</a> of a handful of different types.</p></li>
<li><p>Many times, methods are defined dynamically in Ruby. Sorbet cannot see methods defined with <code>define_method</code>. Sorbet also can’t see methods defined using Ruby’s <code>included</code> + <code>other.extend(self)</code> pattern. For such dynamically defined methods, Sorbet requires <code>*.rbi</code> files which define the method statically.</p>
<p>See the <a href="/docs/rbi">RBI</a> docs for how to regenerate the <code>*.rbi</code> files.</p></li>
<li><p><a class="anchor" aria-hidden="true" id="include-kernel"></a>Sorbet will complain about this code:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyModule</span>;</span> <span class="hljs-keyword">end</span>

sig { params(<span class="hljs-symbol">x:</span> MyModule).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(x)</span></span>
  x.<span class="hljs-literal">nil</span>? <span class="hljs-comment"># error: Method `nil?` does not exist on `MyModule`</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>nil?</code> method is defined on <code>Kernel</code> in Ruby. <code>Kernel</code> is included in <code>Object</code> (which classes default to inheriting from), but not on <code>BasicObject</code> (which classes can optionally inherit from).</p>
<p>The solution is to <code>include Kernel</code> in our module:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyModule</span></span>
  <span class="hljs-keyword">include</span> Kernel
<span class="hljs-keyword">end</span>
</code></pre></li>
<li><p>Sorbet will complain about this code:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyModule</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> puts <span class="hljs-string">'hello'</span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The issue is similar to the above: <code>puts</code> is defined on <code>Kernel</code>, which is not necessarily included in our module. For this situation, there are actually two fixes:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># Option 1: include Kernel</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyModule</span></span>
  <span class="hljs-keyword">include</span> Kernel

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> puts <span class="hljs-string">'hello'</span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># Option 2: Kernel.puts</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">MyModule</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> Kernel.puts <span class="hljs-string">'hello'</span>; <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="7004"></a><a href="#7004" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7004</h2>
<p>This error indicates that a method has been called with incorrect parameters. There are a few cases where this can occur:</p>
<ul>
<li>Too many parameters</li>
<li>Not enough parameters</li>
<li>Trying to pass parameters that don’t exist</li>
<li>Missing required parameters</li>
<li>Positional parameters used when the method expects named parameters, and vice versa</li>
</ul>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-symbol">x:</span> <span class="hljs-literal">nil</span>)</span></span>; <span class="hljs-keyword">end</span>

foo(<span class="hljs-number">1</span>) <span class="hljs-comment"># error</span>
foo(<span class="hljs-symbol">y:</span> <span class="hljs-number">1</span>) <span class="hljs-comment"># error</span>
foo(<span class="hljs-symbol">x:</span> <span class="hljs-number">1</span>) <span class="hljs-comment"># ok</span>
foo() <span class="hljs-comment"># ok</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span><span class="hljs-params">(<span class="hljs-symbol">x:</span>)</span></span>; <span class="hljs-keyword">end</span>

bar() <span class="hljs-comment"># error</span>
bar(<span class="hljs-number">1</span>) <span class="hljs-comment"># error</span>
bar(<span class="hljs-symbol">x:</span> <span class="hljs-number">1</span>) <span class="hljs-comment"># ok</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7005"></a><a href="#7005" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7005</h2>
<p>Sorbet detected a mismatch between the declared return type for the method and the type of the returned value:</p>
<pre><code class="hljs css language-rb">sig { returns(Integer) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">answer</span></span>
  <span class="hljs-string">"42"</span> <span class="hljs-comment"># error: Expected `Integer` but found `String("42")` for method result type</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Here we specified in the signature that <code>find</code> returns an instance of <code>Configuration</code>, yet the returned value might be <code>nil</code>:</p>
<pre><code class="hljs css language-rb">sig { params(<span class="hljs-symbol">name:</span> String).returns(Configuration) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(name)</span></span>
  @lookup[name] <span class="hljs-comment"># error: Expected `Configuration` but found `T.nilable(Configuration)` for method result type</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>A possible solution, if we are <em>certain</em> that <code>name</code> is in the <code>@lookup</code> hash, is to use <code>T.must</code> when returning the value:</p>
<pre><code class="hljs css language-rb">sig { params(<span class="hljs-symbol">name:</span> String).returns(Configuration) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(name)</span></span>
  T.must(@lookup[name])
<span class="hljs-keyword">end</span>
</code></pre>
<p>In some cases, we’re already being cautious and perform some checks before returning yet Sorbet still complains about the return type:</p>
<pre><code class="hljs css language-rb">sig { params(<span class="hljs-symbol">name:</span> String).returns(Configuration) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(name)</span></span>
  raise ArgumentError, <span class="hljs-string">"Configuration <span class="hljs-subst">#{name}</span> not found"</span> <span class="hljs-keyword">unless</span> @lookup.key?(name)
  @lookup[name] <span class="hljs-comment"># error: Expected `Configuration` but found `T.nilable(Configuration)` for method result type</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>While this code is correct, Sorbet cannot assume the state of <code>@lookup</code> didn’t change between the <code>key?</code> check and the <code>[]</code> read. To fix this, we can take advantage of flow-typing to make the whole method work without inline type annotations:</p>
<pre><code class="hljs css language-rb">sig { params(<span class="hljs-symbol">name:</span> String).returns(Configuration) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find</span><span class="hljs-params">(name)</span></span>
  config = @lookup[name]
  raise ArgumentError, <span class="hljs-string">"Configuration <span class="hljs-subst">#{name}</span> not found"</span> <span class="hljs-keyword">unless</span> config
  config
<span class="hljs-keyword">end</span>
</code></pre>
<p>By using a local variable, we allow Sorbet to assert that <code>config</code> is never nilable past the <code>raise</code> instruction.</p>
<h2><a class="anchor" aria-hidden="true" id="7006"></a><a href="#7006" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7006</h2>
<p>In Sorbet, it is an error to have provably unreachable code. Because Sorbet is <a href="/docs/flow-sensitive">sensitive to control flow</a> in a program, Sorbet can not only track what types each variable has within all the branches of a conditional, but also whether any given branch could be executed at all.</p>
<p>Erroring for dead or unreachable code is generally a way to prevent bugs. People don’t usually expect that some branch of code is never taken; usually dead code errors come from simple typos or misunderstandings about how Ruby works. In particular: the only two “falsy” values in Ruby are <code>nil</code> and <code>false</code>.</p>
<p>Note if you intend for code to be dead because you’ve exhausted all the cases and are trying to raise in the default case, use <code>T.absurd</code> to assert that a case analysis is exhaustive. See <a href="/docs/exhaustiveness">Exhaustiveness Checking</a> for more information.</p>
<p>Sometimes, dead code errors can be hard to track down. The best way to pinpoint the cause of a dead code error is to wrap variables or expressions in <code>T.reveal_type(...)</code> to validate the assumptions that a piece of code is making. For more troubleshooting tips, see <a href="/docs/troubleshooting">Troubleshooting</a>.</p>
<p>If for whatever reason it’s too hard to track down the cause of a dead code error, it’s possible to silence it by making a variable or expression “unanalyzable,” aka untyped. (When something is untyped, Sorbet will do very limited flow-sensitivity analysis compared to if Sorbet knows the type. To make something unanalyzable, we can wrap it in <code>T.unsafe(...)</code>:</p>
<pre><code class="hljs css language-ruby">x = <span class="hljs-literal">false</span>

<span class="hljs-keyword">if</span> x
  puts <span class="hljs-string">'hello!'</span> <span class="hljs-comment"># error: This code is unreachable</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> T.unsafe(x)
  puts <span class="hljs-string">'hello!'</span> <span class="hljs-comment"># ok</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this (contrived) example, Sorbet knows statically that <code>x</code> is always <code>false</code> and so our <code>puts</code> within the first <code>if</code> is never reachable. On the other hand, Sorbet allows the second <code>if</code> because we’ve explicitly made <code>x</code> unanalyzable with <code>T.unsafe(...)</code>. T.unsafe is one of a handful of <a href="/docs/troubleshooting#escape-hatches">escape hatches</a> built into Sorbet.</p>
<h2><a class="anchor" aria-hidden="true" id="7007"></a><a href="#7007" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7007</h2>
<p>Sorbet can statically assert that the value passed into a <code>T.let</code> does not match the expected type:</p>
<pre><code class="hljs css language-rb">x = T.let(<span class="hljs-number">1</span>, String) <span class="hljs-comment"># error: Argument does not have asserted type `String`</span>
</code></pre>
<p>Because of the way default values are desugared by Sorbet, this error also occurs when Sorbet finds a mismatch between the type specified for a parameter in the signature and the default value provided in the method.</p>
<p>In this case, the signature states that <code>category</code> type is a <code>Category</code>, yet we try to use <code>nil</code> as default value:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">name:</span> String, <span class="hljs-symbol">category:</span> Category).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">publish_item</span><span class="hljs-params">(name, category = <span class="hljs-literal">nil</span>)</span></span> <span class="hljs-comment"># error: Argument does not have asserted type `Category`</span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If <code>category</code> value is <code>nil</code> by default, maybe we should make it so its type is nilable:</p>
<pre><code class="hljs css language-ruby">sig { params(<span class="hljs-symbol">name:</span> String, <span class="hljs-symbol">category:</span> T.nilable(Category)).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">publish_item</span><span class="hljs-params">(name, category = <span class="hljs-literal">nil</span>)</span></span>
  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7009"></a><a href="#7009" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7009</h2>
<p>This error occurs when a value is used in place of a type. There are many different situations where this can happen; one example is given below:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span></span>
  extend T::Generic

  E = type_member
<span class="hljs-keyword">end</span>

Box[<span class="hljs-literal">true</span>].new <span class="hljs-comment"># error: Unexpected bare `TrueClass` value found in type position</span>
</code></pre>
<p>More generally, Sorbet draws a distinction between places in a program where Ruby values are allowed, and places where Sorbet type syntax is allowed. For example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ----- Arbitrary type syntax allowed -----</span>
T.let(<span class="hljs-number">0</span>, T.any(Integer, String))
<span class="hljs-comment">#        ^^^^^^^^^^^^^^^^^^^^^^</span>
sig { returns(T.any(Integer, String)) }
<span class="hljs-comment">#             ^^^^^^^^^^^^^^^^^^^^^^</span>
T::Array[T.any(Integer, String)].new
<span class="hljs-comment">#        ^^^^^^^^^^^^^^^^^^^^^^</span>


<span class="hljs-comment"># ----- Arbitrary type syntax NOT allowed -----</span>

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">when</span> T.any(Integer, String)
<span class="hljs-comment">#    ^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="hljs-keyword">end</span>

x.is_a?(T.any(Integer, String))
<span class="hljs-comment">#       ^^^^^^^^^^^^^^^^^^^^^^</span>
</code></pre>
<p>Only valid Sorbet types are allowed in type positions. Arbitrary Sorbet types are not allowed in most places where Ruby expects a normal value.</p>
<blockquote>
<p><strong>Note</strong>: Historically this error message has been one of the more confusing Sorbet errors, and over time we have added special cases to detect common points of confusion. If you’re reading this because you found the error message confusing, please consider sharing your example with the Sorbet team so we can further improve the error message.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="7010"></a><a href="#7010" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7010</h2>
<p>Sorbet found a reference to a generic type with the wrong number of type arguments.</p>
<p>Here we defined <code>MyMap</code> as a generic class expecting two type parameters <code>KeyType</code> and <code>ValueType</code> but we try to instantiate it with only one type argument:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMap</span></span>
  extend T::Generic

  KeyType = type_member
  ValueType = type_member

  <span class="hljs-comment"># ...</span>
<span class="hljs-keyword">end</span>

MyMap[String].new <span class="hljs-comment"># error: Wrong number of type parameters for `MyMap`. Expected: `2`, got: `1`</span>
</code></pre>
<p>Unless a type member was <code>fixed</code>, it is always required to pass the correct amount of type arguments. <code>T.untyped</code> can also be used if the type is not relevant at this point:</p>
<pre><code class="hljs css language-rb">MyMap[String, Integer].new
MyMap[String, String].new
MyMap[String, T.untyped].new
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7011"></a><a href="#7011" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7011</h2>
<p>Historically, users seeing this error has represented finding a bug in Sorbet (or at least finding a test case for which there could be a better error message). Consider searching for similar bugs at <a href="https://github.com/sorbet/sorbet/issues">https://github.com/sorbet/sorbet/issues</a> or reporting a new one.</p>
<h2><a class="anchor" aria-hidden="true" id="7013"></a><a href="#7013" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7013</h2>
<p>Sorbet detected that an instance variable was reassigned with different types:</p>
<pre><code class="hljs css language-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  extend T::Sig

  sig { void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span></span>
    @x = T.let(<span class="hljs-number">0</span>, Integer)
  <span class="hljs-keyword">end</span>

  sig { void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    @x = <span class="hljs-string">'not an integer'</span> <span class="hljs-comment"># error: Expected `Integer` but found `String("not an integer")` for field</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If the instance variable can hold both an <code>Integer</code> and a <code>String</code>, maybe the type specified with <code>T.let</code> should be enlarged:</p>
<pre><code class="hljs css language-ruby">@x = T.let(<span class="hljs-number">0</span>, T.any(Integer, String))
</code></pre>
<p>Similarly, Sorbet will reject constants reassigned with different types:</p>
<pre><code class="hljs css language-rb">FOO = <span class="hljs-number">42</span> <span class="hljs-comment"># error: Expected `String("Hello, world!")` but found `Integer(42)` for field</span>
FOO = <span class="hljs-string">"Hello, world!"</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7014"></a><a href="#7014" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7014</h2>
<p>Sorbet has a special method called <code>T.reveal_type</code> which can be useful for debugging. <code>T.reveal_type(expr)</code> will report an error in the output of <code>srb tc</code> that shows what the static component of Sorbet thinks the result type of <code>expr</code> is.</p>
<p>Making this an error is nice for two reasons:</p>
<ul>
<li><p>It makes our internal implementation easier 😅 We don’t have some special-case messages and then error messages. The only thing Sorbet prints under normal circumstances are error messages.</p></li>
<li><p>It serves as a reminder to remove <code>T.reveal_type</code> before committing a change. Since it’s a proper error, Sorbet will exit with non-zero status until it’s removed.</p></li>
</ul>
<p>For more information, see <a href="/docs/troubleshooting">Troubleshooting</a>.</p>
<blockquote>
<p>Looking for how to assert that an expression has a certain type? Check out <a href="/docs/type-assertions">Type Assertions</a>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="7015"></a><a href="#7015" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7015</h2>
<p>Certain forms of <code>T.let</code>, <code>T.cast</code>, and <code>T.must</code> calls are redundant. Follow the suggestion in the error message to fix—these errors should have an autocorrect you can apply to automatically fix the error.</p>
<h2><a class="anchor" aria-hidden="true" id="7016"></a><a href="#7016" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7016</h2>
<p>Sorbet has special handling for certain methods in the standard library, like <code>Array#flatten</code>. This method takes an optional <code>depth</code> argument, and will only flatten nested arrays that deep if passed:</p>
<pre><code class="hljs css language-ruby">[[[[<span class="hljs-number">1</span>]]]].flatten(<span class="hljs-number">2</span>)

<span class="hljs-comment"># ERROR</span>
depth = T.let(<span class="hljs-number">2</span>, Integer)
[[[[<span class="hljs-number">1</span>]]]].flatten(depth)
</code></pre>
<p>Unfortunately, Sorbet can only perform this analysis when the depth is static. If Sorbet cannot see the exact value of the depth and instead only sees a type of <code>Integer</code> for the depth argument, it reports an error.</p>
<p>Either:</p>
<ol>
<li>Refactor the code so that Sorbet can see the exact depth value, or</li>
<li>Use <code>T.unsafe</code> to hide the method call from Sorbet.</li>
</ol>
<pre><code class="hljs css language-ruby">depth = T.let(<span class="hljs-number">2</span>, Integer)
<span class="hljs-comment"># `T.unsafe` disables static type checking for this call site,</span>
<span class="hljs-comment"># including the flatten depth check</span>
T.unsafe([[[[<span class="hljs-number">1</span>]]]]).flatten(depth)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7017"></a><a href="#7017" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7017</h2>
<p>In typed: strict files, Sorbet requires that all methods are annotated with a <code>sig</code>. In a <code># typed: true</code> file Sorbet implicitly assumes that definitions without types are <code>T.untyped</code>, but in a <code># typed: strict</code> file, Sorbet will no longer make this implicit assumption.</p>
<p>You can still add a <code>sig</code> which declares the arguments or return as <code>T.untyped</code>, so <code># typed: strict</code> does not outright ban <code>T.untyped</code>. The upside is that usage of <code>T.untyped</code> is more explicit, which makes it easier to drive the number of occurrences down. If you’re seeing this warning, there’s no time like the present to add proper types to your public-facing API (i.e., your top-level constant and method definitions)!</p>
<p>For how to fix, see <a href="/docs/sigs">Method Signatures</a>.</p>
<p>See also: <a href="#5028">5028</a>, <a href="#6002">6002</a>, <a href="#7028">7028</a>, <a href="#7043">7043</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7018"></a><a href="#7018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7018</h2>
<p>At <code># typed: strong</code>, Sorbet no longer allows using <code>T.untyped</code> values. To fix errors of this class, add type annotations to the code until Sorbet has enough context to know the static type of a value. Usually this means adding <a href="/docs/sigs">method signatures</a> or <a href="/docs/type-assertions">type assertions</a> to declare types to Sorbet that it couldn’t infer.</p>
<p><strong>Note</strong>: this strictness level should be considered a beta feature: the errors at this level are still being developed. Most Ruby files that actually do interesting things will have errors in <code># typed: strong</code>. As such, an alternative solution to fixing these errors is simply to downgrade the file to <code># typed: strict</code> or below, which will silence all these <code>T.untyped</code> errors.</p>
<p>For more information on <code># typed: strong</code>, strategies for dealing with errors that arise from using <code>T.untyped</code>, and current known limitations, see the docs for <a href="/docs/strong"><code># typed: strong</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7019"></a><a href="#7019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7019</h2>
<p>Sorbet does not have great support for splats right now.</p>
<p>In general, when considering taking a variable number of arguments, consider instead taking a single argument that’s an array instead of a “rest” arg:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ----- AVOID THIS ----------------------------</span>
sig { params(<span class="hljs-symbol">xs:</span> Integer).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(*xs)</span></span>; <span class="hljs-keyword">end</span>

xs = Array.new(<span class="hljs-number">3</span>) {<span class="hljs-params">|i|</span> i}
foo(*xs)
<span class="hljs-comment"># ---------------------------------------------</span>

<span class="hljs-comment"># ----- Do this instead -----------------------</span>

sig { params(<span class="hljs-symbol">ys:</span> T::Array[Integer]).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span><span class="hljs-params">(ys)</span></span>; <span class="hljs-keyword">end</span>

ys = Array.new(<span class="hljs-number">3</span>) {<span class="hljs-params">|i|</span> i}
bar(ys)
<span class="hljs-comment"># ---------------------------------------------</span>
</code></pre>
<p>If it is not possible to refactor the code, the current work around is to use <code>T.unsafe</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ----- WORST CASE ----------------------------</span>
<span class="hljs-comment"># Prefer the solution described above</span>

sig { params(<span class="hljs-symbol">xs:</span> Integer).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(*xs)</span></span>; <span class="hljs-keyword">end</span>

xs = Array.new(<span class="hljs-number">3</span>) {<span class="hljs-params">|i|</span> i}
T.unsafe(<span class="hljs-keyword">self</span>).foo(*xs)
<span class="hljs-comment"># ---------------------------------------------</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7020"></a><a href="#7020" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7020</h2>
<p>Note that method-level generics (i.e., those declared by using <code>type_parameters</code> inside a <code>sig</code>) are a somewhat unstable feature. If you encounter this error and believe it to represent a bug in Sorbet, first check the <a href="https://github.com/sorbet/sorbet/issues">Sorbet bug tracker</a> to see if a similar-looking error has already been reported. If no such bug exists, feel free to open an issue.</p>
<h2><a class="anchor" aria-hidden="true" id="7021"></a><a href="#7021" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7021</h2>
<p>The called method declares a block parameter that is not <code>T.nilable</code> (making the block argument required), but a block was not passed when it was called.</p>
<p>This can be fixed by either passing a block to the method, or changing the method’s signature for the block parameter from <code>T.proc...</code> to <code>T.nilable(T.proc...)</code> (and then changing the method to deal with a nilable block parameter).</p>
<h2><a class="anchor" aria-hidden="true" id="7022"></a><a href="#7022" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7022</h2>
<p>When run with the <code>--suggest-typed</code> command line argument, Sorbet will suggest upgrading or downgrading <code># typed:</code> sigils in all files in the project to the highest level possible that would still have no errors. If the project starts off with no errors initially, this should have the effect of only upgrading sigils.</p>
<p>Accept the provided autocorrect suggestion to commit the upgrades (using the <code>--autocorrect</code> flag).</p>
<h2><a class="anchor" aria-hidden="true" id="7023"></a><a href="#7023" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7023</h2>
<p>This error occurs when a method is passed in a <code>Proc</code> object that Sorbet does not know the arity for statically.</p>
<p>One instance where this can happen is when using <code>method</code>, since the arity of method corresponding to the symbol is unknown. This can be fixed by passing in a block with the correct arity:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: strict</span>

extend T::Sig

sig { params(<span class="hljs-symbol">blk:</span> T.proc.params(<span class="hljs-symbol">arg0:</span> String).void).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(&amp;blk)</span></span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># ----- AVOID THIS ----------------------------</span>
foo(&amp;method(<span class="hljs-symbol">:puts</span>))
<span class="hljs-comment"># ---------------------------------------------</span>

<span class="hljs-comment"># ----- Do this instead -----------------------</span>
foo <span class="hljs-keyword">do</span> <span class="hljs-params">|arg0|</span>
    method(<span class="hljs-symbol">:puts</span>).call(arg<span class="hljs-number">0</span>)
<span class="hljs-keyword">end</span>
<span class="hljs-comment"># ---------------------------------------------</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7024"></a><a href="#7024" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7024</h2>
<p>This error occurs when a generic argument is passed in as a block parameter.</p>
<p>In <code># typed: strict</code> files, using a parameter from a method that does not have a signature will cause this issue to be reported. Adding a signature to the method will fix the issue.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: strict</span>

extend T::Sig

<span class="hljs-comment"># ----- This will error -----------------------</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(&amp;blk)</span></span>
    proc(&amp;blk)
<span class="hljs-keyword">end</span>
<span class="hljs-comment"># ---------------------------------------------</span>

<span class="hljs-comment"># ----- This will not error -------------------</span>
sig { params(<span class="hljs-symbol">blk:</span> T.untyped).returns(T.untyped) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span><span class="hljs-params">(&amp;blk)</span></span>
    proc(&amp;blk)
<span class="hljs-keyword">end</span>
<span class="hljs-comment"># ---------------------------------------------</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7026"></a><a href="#7026" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7026</h2>
<p>Sorbet detected that it was possible for <code>T.absurd</code> to be reached. This usually means that something that was meant to cover all possible cases of a union type did not cover all the cases.</p>
<p>See <a href="/docs/exhaustiveness">Exhaustiveness Checking</a> for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="7027"></a><a href="#7027" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7027</h2>
<p>In <code># typed: strict</code> files, Sorbet requires that all constants are annotated with a <code>T.let</code>.</p>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>, or accept the autocorrect suggestion associated with this error.</p>
<p>See also: <a href="#5028">5028</a>, <a href="#6002">6002</a>, <a href="#7017">7017</a>, <a href="#7043">7043</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7030"></a><a href="#7030" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7030</h2>
<p>This error is consistently used when the user is trying (implicitly or explicitly) to call some method on a Sorbet type (e.g. <code>T::Array[Integer]</code>) which would actually return a Sorbet-runtime representation of a type.</p>
<p>This error generally occurs when generic types are used in pattern matching:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_value</span><span class="hljs-params">(input)</span></span>
  <span class="hljs-keyword">case</span> input
  <span class="hljs-keyword">when</span> Integer
    input
  <span class="hljs-keyword">when</span> T::Array[Integer] <span class="hljs-comment"># error: Call to method `===` on `T::Array[Integer]` mistakes a type for a value</span>
    input.first
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Since <a href="/docs/generics#generics-and-runtime-checks">generic types are erased</a> at runtime, this construct would never work when the program executed. Replace the generic type <code>T::Array[Integer]</code> by the erased type <code>Array</code> so the runtime behavior is correct:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_value</span><span class="hljs-params">(input)</span></span>
  <span class="hljs-keyword">case</span> input
  <span class="hljs-keyword">when</span> Integer
    input
  <span class="hljs-keyword">when</span> Array
    input.first
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7031"></a><a href="#7031" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7031</h2>
<p>Private methods in Ruby behave somewhat differently from private methods in other statically typed languages. You may want to read more about <a href="https://www.rubyguides.com/2018/10/method-visibility/">method visibility in Ruby</a> first. The tl;dr is that private methods can only be called when the receiver is <strong>syntactically</strong> <code>self</code> (or omitted):</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>
  private <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">in_parent</span></span>
    foo      <span class="hljs-comment"># OK</span>
    <span class="hljs-keyword">self</span>.foo <span class="hljs-comment"># OK</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> &lt; Parent</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">in_child</span></span>
    foo      <span class="hljs-comment"># OK</span>
    <span class="hljs-keyword">self</span>.foo <span class="hljs-comment"># OK</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

Parent.new.foo <span class="hljs-comment"># error!</span>
Child.new.foo  <span class="hljs-comment"># error!</span>
</code></pre>
<p>This makes private methods in Ruby behave more like protected methods in other object-oriented languages.</p>
<p>To fix this error, either:</p>
<ol>
<li>Avoid calling the private method entirely, or</li>
<li>Update the method definition to not be private, or</li>
<li>Use <code>.send(:foo, ...)</code> to ask Ruby to call the method ignoring visibility checks.</li>
</ol>
<blockquote>
<p><strong>Note</strong>: It’s not possible to silence this error using <code>T.unsafe</code>. Wrapping the receiver in <code>T.unsafe</code> will in fact hide the method call from Sorbet statically, but because method visibility is checked <strong>syntactically</strong>, even using <code>T.unsafe(self).foo</code> will cause a call to a private method <code>foo</code> to be rejected by the Ruby VM at runtime.</p>
<p>If you must call a private method and also silence any type errors from calling it, you must use <code>self.send(:foo)</code> instead.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="7032"></a><a href="#7032" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7032</h2>
<p>When passing type arguments to generic classes, to use <a href="/docs/shapes">shape types</a>, use curly brackets around the keys and values of the shape type:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># CORRECT</span>
T::Array[{<span class="hljs-symbol">key:</span> Integer}].new

<span class="hljs-comment"># BAD</span>
T::Array[<span class="hljs-symbol">key:</span> Integer].new
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7033"></a><a href="#7033" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7033</h2>
<p><strong>Note</strong>: this error is only reported when Sorbet is passed the <code>--ruby3-keyword-args</code> command line flag. For further information about Ruby 3 and keyword args, see the <a href="https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/">official blog post</a>.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>
extend T::Sig

sig { params(<span class="hljs-symbol">x:</span> Integer, <span class="hljs-symbol">y:</span>Integer).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">takes_kwargs</span><span class="hljs-params">(x, <span class="hljs-symbol">y:</span>)</span></span>
<span class="hljs-keyword">end</span>

arghash = {<span class="hljs-symbol">y:</span> <span class="hljs-number">42</span>}

<span class="hljs-comment"># GOOD EXAMPLE</span>
takes_kwargs(<span class="hljs-number">99</span>, **arghash)

<span class="hljs-comment"># BAD EXAMPLE</span>
takes_kwargs(<span class="hljs-number">99</span>, arghash)
<span class="hljs-comment">#                ^^^^^^^ error: Keyword argument hash without `**`</span>
</code></pre>
<p><a href="https://sorbet.run/?arg=--ruby3-keyword-args#%23%20typed%3A%20true%0Aextend%20T%3A%3ASig%0A%0Asig%20%7Bparams%28x%3A%20Integer%2C%20y%3AInteger%29.void%7D%0Adef%20takes_kwargs%28x%2C%20y%3A%29%0Aend%0A%0Aarghash%20%3D%20%7By%3A%2042%7D%0Atakes_kwargs%2899%2C%20arghash%29">→ View on sorbet.run</a></p>
<p>In Ruby 2.7 and earlier, Ruby allowed a positional <code>Hash</code> argument at the end of a method call’s list of arguments to implicitly splat into the keyword parameters of the method. In Ruby 3.0 and later, a positional <code>Hash</code> argument is always treated as a positional argument. To avoid this error, prefix the <code>Hash</code> argument with <code>**</code>, explicitly requesting to treat it as keyword arguments.</p>
<h2><a class="anchor" aria-hidden="true" id="7034"></a><a href="#7034" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7034</h2>
<p>Sorbet detected that the safe navigation operator (<code>&amp;.</code>) was being used on a receiver that can never be nil. Replace the offending occurrence of <code>&amp;.</code> with a normal method call (<code>.</code>).</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: true</span>

extend T::Sig

sig { params(<span class="hljs-symbol">x:</span> Integer, <span class="hljs-symbol">y:</span> T.nilable(Integer)).void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span><span class="hljs-params">(x, y)</span></span>
  puts x&amp;.to_s  <span class="hljs-comment"># error: x can never be nil</span>
  puts x.to_s   <span class="hljs-comment"># no error</span>

  puts y&amp;.to_s  <span class="hljs-comment"># no error: y may be nil</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7035"></a><a href="#7035" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7035</h2>
<p>Sorbet can sometimes detect when a method is passed a block despite not accepting a block.</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># typed: strict</span>
extend T::Sig

sig { void }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">takes_no_block</span>;</span> <span class="hljs-keyword">end</span>

<span class="hljs-comment"># BAD EXAMPLE</span>
takes_no_block {} <span class="hljs-comment"># error: does not take a block</span>
</code></pre>
<p>Why only sometimes? Technically all methods in Ruby are allowed to accept blocks. (Unlike positional arguments, if a method does not declare that it accepts a block argument but a caller passes one anyways the Ruby VM does not raise an exception.)</p>
<p>For historical reasons, Sorbet did not require that a <code>sig</code> mention the <code>blk</code> parameter if its method used <code>yield</code> from the beginning of Sorbet adoption. It later required this, but for reasons of backwards compatibility, it’s only checked in <code># typed: strict</code> or higher files.</p>
<p>Therefore, error 7035 is somewhat special in that it can be reported in <code># typed: true</code> files, but <strong>only</strong> if the method being passed a block is itself defined in a <code># typed: strict</code> file.</p>
<p>Regardless, to fix this error, either:</p>
<ol>
<li>Remove the block from this call site (using the autocorrect), or</li>
<li>Update the called method’s definition to mention block argument, or</li>
<li>Drop the strictness level of file containing the called method’s definition to <code># typed: true</code> or lower (<strong>only</strong> as a <strong>last resort</strong>).</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="7036"></a><a href="#7036" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7036</h2>
<p>Sorbet supports declaring package-private methods. These methods can only be called from within the package where they are declared</p>
<p>To fix this error, either remove the <code>package_private</code> (or <code>package_private_class_method</code>) annotation from the method definition, or rewrite the code in question to not call the private method.</p>
<p>As a <strong>last</strong> resort, you can use <code>T.unsafe</code> to hide the method call from Sorbet, silencing the error.</p>
<h2><a class="anchor" aria-hidden="true" id="7037"></a><a href="#7037" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7037</h2>
<p>See <a href="/docs/flow-sensitive#limitations-of-flow-sensitivity">this doc for more information</a>.</p>
<p>In general, Sorbet can’t know that two calls to identical methods return identical things, because in general methods are not pure.</p>
<p>Consider this example</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> &lt; T::Struct</span>
  const <span class="hljs-symbol">:foo</span>, T.nilable(Integer)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> a.foo &amp;&amp; a.foo.even?
  <span class="hljs-comment">#         ^^^^^^^^^^^ error</span>
  puts a.foo
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, the call to <code>a.foo.even?</code> results in an error, even though we checked that <code>a.foo</code> was not <code>nil</code> with the <code>&amp;&amp;</code>, because Sorbet does not assume any methods are pure, not even methods defined with the <code>T::Struct</code> class’s <code>const</code> DSL. (There are a number of technical and philosophical reasons why Sorbet behaves this way, and we do not foresee these reasons changing.)</p>
<p>There is always a simple solution, which is to either factor out the method call’s result into a variable, or to use Ruby’s conditional method call operator (<code>&amp;.</code>):</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># -- solution 1 (preferred) --</span>
x = a.foo
<span class="hljs-keyword">if</span> x &amp;&amp; x.even?
  puts x
<span class="hljs-keyword">end</span>

<span class="hljs-comment"># -- solution 2 --</span>
<span class="hljs-keyword">if</span> a.foo&amp;.even?
  puts a.foo
<span class="hljs-keyword">end</span>
</code></pre>
<p>Of the two, the first solution is preferred because not only will the program type check as written, but Sorbet will know that the <code>x</code> variable is not <code>nil</code> throughout the body of the <code>if</code> statement.</p>
<h2><a class="anchor" aria-hidden="true" id="7038"></a><a href="#7038" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7038</h2>
<p>For more information, see the docs on <a href="/docs/generics#generic-methods">generic methods</a>.</p>
<p>Consider this example:</p>
<pre><code class="hljs css language-ruby">sig <span class="hljs-keyword">do</span>
  type_parameters(<span class="hljs-symbol">:U</span>)
    .params(<span class="hljs-symbol">x:</span> T.type_parameter(<span class="hljs-symbol">:U</span>))
    .void
<span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  x.foo <span class="hljs-comment"># ❌ error!</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This snippet declares a method <code>example</code> with a signature that says it can be passed any input, but then attempts to call a specific method <code>.foo</code>.</p>
<p>Since this method can be given any type of value, Sorbet rejects the call to <code>x.foo</code>.</p>
<p>To allow code like this, use <a href="/docs/abstract">interfaces</a> with <a href="/docs/intersection-types">intersection types</a>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># (1) Declare an interface</span>
<span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">IFoo</span></span>
  extend T::Sig
  extend T::Helpers
  interface!

  sig { abstract.void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

sig <span class="hljs-keyword">do</span>
  type_parameters(<span class="hljs-symbol">:U</span>)
    <span class="hljs-comment"># (2) Use the interface with an intersection type</span>
    .params(<span class="hljs-symbol">x:</span> T.all(IFoo, T.type_parameter(<span class="hljs-symbol">:U</span>)))
    .void
<span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  x.foo <span class="hljs-comment"># ✅ no error</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Remember that in Sorbet, <a href="/docs/abstract">interfaces</a> must be explicitly implemented in a given class.</p>
<p>Sometimes this error happens due to a call to <code>is_a?</code> on a type parameter. To sidestep this error, rewrite the program to use <code>case</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ...</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-keyword">if</span> x.is_a?(Integer) <span class="hljs-comment"># error</span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">case</span> x
  <span class="hljs-keyword">when</span> Integer <span class="hljs-comment"># OK</span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Or if it’s imperative to continue using <code>is_a?</code>, change the type to <code>T.all(Kernel, T.type_parameter(:U))</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="7039"></a><a href="#7039" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7039</h2>
<p>For more information, see how to place <a href="/docs/generics#bounds-on-type_members-and-type_templates-fixed-upper-lower">bounds on type members</a>.</p>
<p>Consider this example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">only_on_a</span>;</span> <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span></span>
  extend T::Sig
  extend T::Generic
  Elem = type_member

  sig { params(<span class="hljs-symbol">x:</span> Elem).void }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(x)</span></span>
    x.only_on_a <span class="hljs-comment"># error, see below for fix</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>In this example, we’re trying to to call the method <code>only_on_a</code>, but we haven’t specified any type bounds on the <code>Elem</code> type parameter, which means we can’t make any assumption about what methods it might have.</p>
<p>If we want to always be able to call the method <code>only_on_a</code>, we can place a upper bound on <code>Elem</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ...</span>
  Elem = type_member {{<span class="hljs-symbol">upper:</span> A}}
<span class="hljs-comment"># ...</span>
</code></pre>
<p>This will guarantee that <code>Elem</code> is always at least <code>A</code>, which will let Sorbet allow the call to <code>x.only_on_a</code>.</p>
<p>Sometimes this error happens due to a call to <code>is_a?</code> on a type member. To sidestep this error, rewrite the program to use <code>case</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-comment"># ...</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span><span class="hljs-params">(x)</span></span>
  <span class="hljs-keyword">if</span> x.is_a?(Integer) <span class="hljs-comment"># error</span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">case</span> x
  <span class="hljs-keyword">when</span> Integer <span class="hljs-comment"># OK</span>
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Or if it’s imperative to continue using <code>is_a?</code>, change the type to <code>T.all(Kernel, Elem)</code> and/or add an upper bound of <code>Kernel</code> to the type member.</p>
<h2><a class="anchor" aria-hidden="true" id="7040"></a><a href="#7040" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7040</h2>
<p><code>T.attached_class</code> is a type annotation that refers to instances of the current singleton class. For example, a method like this makes sense, because it uses <code>T.attached_class</code> on a singleton class method (the <code>self.</code> prefix):</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  sig { returns(T.attached_class) }
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">make</span></span>
    x = T.let(new, T.attached_class)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Meanwhile, this snippet doesn’t make sense, because <code>foo</code> is already an instance method—there is no attached class to speak of for non-singleton classes:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>
  sig { returns(T.attached_class) } <span class="hljs-comment"># error!</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>
    x = T.let(new, T.attached_class) <span class="hljs-comment"># error!</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>For more information see the <a href="/docs/attached-class"><code>T.attached_class</code></a> docs.</p>
<p>It may also be interesting to compare and contrast <a href="/docs/self-type"><code>T.self_type</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7043"></a><a href="#7043" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7043</h2>
<p>In <code># typed: strict</code> files, Sorbet requires that all instance and class variables are annotated with a <code>T.let</code>.</p>
<p>For how to fix, see <a href="/docs/type-annotations">Type Annotations</a>.</p>
<p>See also: <a href="#5028">5028</a>, <a href="#6002">6002</a>, <a href="#7017">7017</a>, <a href="#7027">7027</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7044"></a><a href="#7044" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7044</h2>
<p>Sorbet has built-in support for the <code>dig</code> method on <code>Array</code> and <code>Hash</code>. In certain cases, Sorbet can detect that there have been too many arguments provided to a <code>dig</code> call. For example:</p>
<pre><code class="hljs css language-ruby">arr = T::Array[NilClass].new
arr.dig(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre>
<p>This tries to get the 0<sup>th</sup> element of the 0<sup>th</sup> element of the array, if it exists.</p>
<p>However, Sorbet can know that the 0<sup>th</sup> element of the first array is always <code>nil</code> if it exists, so the second 0<sup>th</sup> element will never be accessed, and is thus redundant.</p>
<p>To fix this, either delete the redundant arguments, or use an <a href="/docs/troubleshooting#escape-hatches">Escape Hatch</a> to hide the call to <code>dig</code> from Sorbet:</p>
<pre><code class="hljs css language-ruby">arr = T::Array[NilClass].new
T.unsafe(arr).dig(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="7045"></a><a href="#7045" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7045</h2>
<p>Sorbet sometimes assumes an expression has a certain type—even when it has no guarantee whether that’s the case—because the assumption will be correct almost all the time and assuming the type means not having to given an explicit type annotation.</p>
<p>This error is reported when those assumptions are wrong. Rather than go back and attempt to invalidate the assumption by redoing work it already did (but this time under the correct assumptions), it reports an error asking the user to provide an explicit type annotation so that no assumption is necessary in the first place. This enables Sorbet to finish type checking quickly on large codebases.</p>
<p>To fix this error, provide an explicit annotation (or simply accept the <a href="/docs/cli#accepting-autocorrect-suggestions">autocorrect suggestion</a>).</p>
<p>For more information, read <a href="/docs/why-type-annotations">Why does Sorbet sometimes need type annotations?</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="7046"></a><a href="#7046" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7046</h2>
<p>For a limited number of types, Sorbet checks whether it looks like a call to <code>==</code> is out of place. Currently, Sorbet only does these checks when the left operand of <code>==</code> is:</p>
<ul>
<li><code>Symbol</code></li>
<li><code>String</code></li>
</ul>
<p>Sorbet is unable to apply these checks for all types, because <code>==</code> can be overridden in arbitrary ways, including to allow for implicit conversion between unrelated types. This means that Sorbet will sometimes miss reporting this error in places where we would like it to, and can’t be changed to report an error without breaking valid code.</p>
<p>To fix this error, ensure that the left and right operands’ types match before doing the comparison. For example, try converting <code>String</code>s to <code>Symbol</code>s with <code>to_sym</code> (or vice versa with <code>to_s</code>).</p>
<h2><a class="anchor" aria-hidden="true" id="7047"></a><a href="#7047" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7047</h2>
<p>This error code is an implementation detail of Sorbet’s “highlight untyped in editor” mode. It indicates that the given piece of code has type <a href="/docs/untyped"><code>T.untyped</code></a>. Untyped code can be dangerous, because it circumvents the guarantees of the type system.</p>
<p>This feature is opt-in. See <a href="/docs/vscode">VS Code</a> for instructions on how to turn it on.</p>
<h2><a class="anchor" aria-hidden="true" id="7048"></a><a href="#7048" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7048</h2>
<p>This error is like <a href="#7003">7003</a>, but for calls using <code>super</code>.</p>
<p>That is, the difference is that Sorbet checks whether a method with the same name as the enclosing method exists on any ancestor of the current method.</p>
<p>This error is caused by most of the same reasons that cause <a href="#7003">7003</a>, so it’s best to read the docs for that code as well.</p>
<p>See also:</p>
<ul>
<li><a href="/docs/faq#why-is-super-untyped-even-when-the-parent-method-has-a-sig">Why is <code>super</code> untyped, even when the parent method has a <code>sig</code>?</a></li>
<li><a href="/docs/faq#how-can-i-fix-type-errors-that-arise-from-super">How can I fix type errors that arise from <code>super</code>?</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="7049"></a><a href="#7049" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7049</h2>
<p>See <a href="/docs/overloads">Methods with Overloaded Signatures</a> for complete docs on how to declare overloaded methods correctly.</p>
<h2><a class="anchor" aria-hidden="true" id="7050"></a><a href="#7050" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7050</h2>
<p>Calling <code>T.must</code> when the argument is <code>T.untyped</code>, <code>T.anything</code>, <code>Object</code>, or <code>BasicObject</code> is redundant. This indicates that either:</p>
<ul>
<li>a previously-typed argument became untyped, indicating a regression in type safety somewhere, or</li>
<li>the code does not benefit from <code>T.must</code>, because the type before and after the call is the same.</li>
</ul>
<p>If raising an exception for <code>nil</code> values is the desired runtime behavior, do so explicitly:</p>
<pre><code class="hljs css language-ruby">raise <span class="hljs-keyword">if</span> x == <span class="hljs-literal">nil</span>
</code></pre>
<p>This was separated from <a href="#7015">7015</a> allow it to be autocorrected independently from invalid usages of <code>T.let</code> and <code>T.cast</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="7051"></a><a href="#7051" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7051</h2>
<p>When a method’s signature is marked <code>.void</code>, Sorbet replaces the result value of the method with a special singleton value, so that callers downstream of the method cannot depend on whatever value the method happens to return.</p>
<p>(See <a href="/docs/sigs#returns--void-annotating-return-types"><code>returns</code> &amp; <code>void</code>: Annotating return types</a>)</p>
<p>One thing to be aware of is that this special singleton value is truthy (because the only two values that are falsy in the Ruby VM are <code>nil</code> and <code>false</code>).</p>
<p>Thus, branching on this special void singleton value is virtually always a bug.</p>
<p>If a method <strong>must be able to return anything</strong> in its body, while still branching on the resulting value, use <code>.returns(T.anything)</code> instead:</p>
<pre><code class="hljs css language-ruby">sig { returns(T.anything) }
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span></span>
  <span class="hljs-keyword">if</span> [<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>].sample
    <span class="hljs-string">''</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-literal">false</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>See the docs for <a href="/docs/anything">T.anything</a> for more.</p>
<p>This error happens if <em>any</em> component of the type includes <code>void</code>. For example:</p>
<pre><code class="hljs css language-ruby">result =
  <span class="hljs-keyword">if</span> [<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>].sample
    returns_void
  <span class="hljs-keyword">else</span>
    <span class="hljs-literal">false</span>
  <span class="hljs-keyword">end</span>

T.reveal_type(result) <span class="hljs-comment"># =&gt; T.any(Sorbet::Private::Static::Void, FalseClass)</span>

<span class="hljs-keyword">if</span> result
<span class="hljs-comment">#  ^^^^^^ error</span>
  puts
<span class="hljs-keyword">end</span>
</code></pre>
<p>This is expected, and the way to fix it is again either to change <code>returns_void</code> to <code>returns(T.anything)</code>, or update the <code>if</code> branch to explicitly produce a value:</p>
<pre><code class="hljs css language-ruby">result =
  <span class="hljs-keyword">if</span> [<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>].sample
    returns_void
    <span class="hljs-literal">true</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-literal">false</span>
  <span class="hljs-keyword">end</span>

T.reveal_type(result) <span class="hljs-comment"># =&gt; T::Boolean</span>
</code></pre>
<!-- -->
<script src="/js/error-reference.js"></script>
<!-- vim:tw=0
-->
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/faq"><span class="arrow-prev">← </span><span>FAQ</span></a><a class="docs-next button" href="/docs/unsupported"><span>Unsupported Ruby Features</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#1001">1001</a></li><li><a href="#1003">1003</a></li><li><a href="#1004">1004</a></li><li><a href="#2001">2001</a></li><li><a href="#2002">2002</a></li><li><a href="#2003">2003</a></li><li><a href="#2004">2004</a></li><li><a href="#3001">3001</a></li><li><a href="#3002">3002</a></li><li><a href="#3003">3003</a></li><li><a href="#3004">3004</a></li><li><a href="#3005">3005</a></li><li><a href="#3007">3007</a></li><li><a href="#3008">3008</a></li><li><a href="#3009">3009</a></li><li><a href="#3010">3010</a></li><li><a href="#3011">3011</a></li><li><a href="#3012">3012</a></li><li><a href="#3501">3501</a></li><li><a href="#3502">3502</a></li><li><a href="#3503">3503</a></li><li><a href="#3504">3504</a></li><li><a href="#3505">3505</a></li><li><a href="#3506">3506</a></li><li><a href="#3507">3507</a></li><li><a href="#3508">3508</a></li><li><a href="#3509">3509</a></li><li><a href="#3510">3510</a></li><li><a href="#3511">3511</a></li><li><a href="#3512">3512</a></li><li><a href="#3513">3513</a></li><li><a href="#3514">3514</a></li><li><a href="#3515">3515</a></li><li><a href="#3516">3516</a></li><li><a href="#3517">3517</a></li><li><a href="#3550">3550</a></li><li><a href="#3551">3551</a></li><li><a href="#3552">3552</a></li><li><a href="#3553">3553</a></li><li><a href="#3554">3554</a></li><li><a href="#3555">3555</a></li><li><a href="#3556">3556</a></li><li><a href="#3557">3557</a></li><li><a href="#3558">3558</a></li><li><a href="#3702">3702</a></li><li><a href="#3703">3703</a></li><li><a href="#3704">3704</a></li><li><a href="#3705">3705</a></li><li><a href="#3706">3706</a></li><li><a href="#3707">3707</a></li><li><a href="#3709">3709</a></li><li><a href="#3710">3710</a></li><li><a href="#3711">3711</a></li><li><a href="#3712">3712</a></li><li><a href="#3713">3713</a></li><li><a href="#3714">3714</a></li><li><a href="#3715">3715</a></li><li><a href="#3716">3716</a></li><li><a href="#3717">3717</a></li><li><a href="#3718">3718</a></li><li><a href="#3720">3720</a></li><li><a href="#3721">3721</a></li><li><a href="#3722">3722</a></li><li><a href="#3723">3723</a></li><li><a href="#3724">3724</a></li><li><a href="#3725">3725</a></li><li><a href="#3726">3726</a></li><li><a href="#3727">3727</a></li><li><a href="#3728">3728</a></li><li><a href="#3729">3729</a></li><li><a href="#3731">3731</a></li><li><a href="#4001">4001</a></li><li><a href="#4002">4002</a></li><li><a href="#4003">4003</a></li><li><a href="#4006">4006</a></li><li><a href="#4010">4010</a></li><li><a href="#4011">4011</a></li><li><a href="#4012">4012</a></li><li><a href="#4013">4013</a></li><li><a href="#4014">4014</a></li><li><a href="#4015">4015</a></li><li><a href="#4016">4016</a></li><li><a href="#4019">4019</a></li><li><a href="#4021">4021</a></li><li><a href="#4022">4022</a></li><li><a href="#4023">4023</a></li><li><a href="#4024">4024</a></li><li><a href="#4025">4025</a></li><li><a href="#4026">4026</a></li><li><a href="#5001">5001</a></li><li><a href="#5002">5002</a></li><li><a href="#5003">5003</a></li><li><a href="#5004">5004</a></li><li><a href="#5005">5005</a></li><li><a href="#5006">5006</a></li><li><a href="#5008">5008</a></li><li><a href="#5011">5011</a></li><li><a href="#5012">5012</a></li><li><a href="#5013">5013</a></li><li><a href="#5014">5014</a></li><li><a href="#5015">5015</a></li><li><a href="#5016">5016</a></li><li><a href="#5017">5017</a></li><li><a href="#5018">5018</a></li><li><a href="#5019">5019</a></li><li><a href="#5020">5020</a></li><li><a href="#5021">5021</a></li><li><a href="#5022">5022</a></li><li><a href="#5023">5023</a></li><li><a href="#5024">5024</a></li><li><a href="#5025">5025</a></li><li><a href="#5026">5026</a></li><li><a href="#5027">5027</a><ul class="toc-headings"><li><a href="#load-time-scope-must-be-established-definitively">Load-time scope must be established definitively</a></li><li><a href="#symbols-have-to-be-guaranteed-to-exist-only-in-one-file">Symbols have to be guaranteed to exist only in one file</a></li></ul></li><li><a href="#5028">5028</a></li><li><a href="#5030">5030</a></li><li><a href="#5031">5031</a></li><li><a href="#5032">5032</a></li><li><a href="#5033">5033</a></li><li><a href="#5034">5034</a></li><li><a href="#5035">5035</a></li><li><a href="#5036">5036</a></li><li><a href="#5037">5037</a></li><li><a href="#5038">5038</a></li><li><a href="#5039">5039</a></li><li><a href="#5040">5040</a></li><li><a href="#5041">5041</a></li><li><a href="#5042">5042</a></li><li><a href="#5043">5043</a></li><li><a href="#5044">5044</a></li><li><a href="#5045">5045</a></li><li><a href="#5046">5046</a></li><li><a href="#5047">5047</a></li><li><a href="#5048">5048</a></li><li><a href="#5049">5049</a></li><li><a href="#5050">5050</a></li><li><a href="#5051">5051</a></li><li><a href="#5052">5052</a></li><li><a href="#5053">5053</a></li><li><a href="#5054">5054</a></li><li><a href="#5055">5055</a></li><li><a href="#5056">5056</a></li><li><a href="#5057">5057</a></li><li><a href="#5058">5058</a></li><li><a href="#5059">5059</a></li><li><a href="#5060">5060</a></li><li><a href="#5061">5061</a></li><li><a href="#5062">5062</a></li><li><a href="#5063">5063</a></li><li><a href="#5064">5064</a></li><li><a href="#5065">5065</a></li><li><a href="#5067">5067</a></li><li><a href="#5068">5068</a></li><li><a href="#5069">5069</a></li><li><a href="#5070">5070</a></li><li><a href="#5071">5071</a></li><li><a href="#5072">5072</a><ul class="toc-headings"><li><a href="#type_member--type_template-mismatch"><code>type_member</code> / <code>type_template</code> mismatch</a></li><li><a href="#in-an-unrelated-class">In an unrelated class</a></li></ul></li><li><a href="#5073">5073</a></li><li><a href="#5074">5074</a></li><li><a href="#5075">5075</a></li><li><a href="#5076">5076</a></li><li><a href="#5077">5077</a></li><li><a href="#5078">5078</a></li><li><a href="#5079">5079</a></li><li><a href="#5080">5080</a></li><li><a href="#6001">6001</a></li><li><a href="#6002">6002</a></li><li><a href="#6004">6004</a></li><li><a href="#6005">6005</a></li><li><a href="#6006">6006</a></li><li><a href="#7001">7001</a></li><li><a href="#7002">7002</a></li><li><a href="#7003">7003</a></li><li><a href="#7004">7004</a></li><li><a href="#7005">7005</a></li><li><a href="#7006">7006</a></li><li><a href="#7007">7007</a></li><li><a href="#7009">7009</a></li><li><a href="#7010">7010</a></li><li><a href="#7011">7011</a></li><li><a href="#7013">7013</a></li><li><a href="#7014">7014</a></li><li><a href="#7015">7015</a></li><li><a href="#7016">7016</a></li><li><a href="#7017">7017</a></li><li><a href="#7018">7018</a></li><li><a href="#7019">7019</a></li><li><a href="#7020">7020</a></li><li><a href="#7021">7021</a></li><li><a href="#7022">7022</a></li><li><a href="#7023">7023</a></li><li><a href="#7024">7024</a></li><li><a href="#7026">7026</a></li><li><a href="#7027">7027</a></li><li><a href="#7030">7030</a></li><li><a href="#7031">7031</a></li><li><a href="#7032">7032</a></li><li><a href="#7033">7033</a></li><li><a href="#7034">7034</a></li><li><a href="#7035">7035</a></li><li><a href="#7036">7036</a></li><li><a href="#7037">7037</a></li><li><a href="#7038">7038</a></li><li><a href="#7039">7039</a></li><li><a href="#7040">7040</a></li><li><a href="#7043">7043</a></li><li><a href="#7044">7044</a></li><li><a href="#7045">7045</a></li><li><a href="#7046">7046</a></li><li><a href="#7047">7047</a></li><li><a href="#7048">7048</a></li><li><a href="#7049">7049</a></li><li><a href="#7050">7050</a></li><li><a href="#7051">7051</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="wrapper"><p class="footer"><svg width="99" height="28" viewBox="0 0 99 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.98432 20H6.27432C8.44932 20 9.81432 18.905 9.81432 17.03C9.81432 15.665 9.00432 14.72 7.78932 14.39C8.61432 14.105 9.45432 13.415 9.45432 12.035C9.45432 10.235 8.23932 9.23 5.95932 9.23H1.98432V20ZM3.37932 13.85V10.445H5.83932C7.27932 10.445 8.07432 11 8.07432 12.155C8.07432 13.295 7.27932 13.85 5.83932 13.85H3.37932ZM3.37932 15.08H6.21432C7.65432 15.08 8.43432 15.83 8.43432 16.925C8.43432 18.035 7.65432 18.785 6.21432 18.785H3.37932V15.08ZM18.0294 12.155H16.6794V16.88C16.6794 18.185 15.6894 18.92 14.7144 18.92C13.5594 18.92 13.0794 18.17 13.0794 17.06V12.155H11.7294V17.345C11.7294 19.01 12.6744 20.165 14.3544 20.165C15.4644 20.165 16.2294 19.58 16.6794 18.92V20H18.0294V12.155ZM20.5112 10.79H21.9812V9.23H20.5112V10.79ZM21.9212 12.155H20.5712V20H21.9212V12.155ZM25.8247 9.23H24.4747V20H25.8247V9.23ZM28.5882 18.125C28.5882 19.625 29.3532 20.075 30.6882 20.075C31.1382 20.075 31.5282 20.03 31.8732 19.955V18.8C31.5582 18.875 31.3332 18.89 31.0182 18.89C30.3282 18.89 29.9232 18.74 29.9232 17.915V13.31H31.7082V12.155H29.9232V9.86H28.5882V12.155H27.3732V13.31H28.5882V18.125ZM41.0199 20.165C43.1949 20.165 44.4399 18.305 44.4399 16.085C44.4399 13.85 43.1949 12.005 41.0199 12.005C39.9249 12.005 39.0549 12.53 38.5899 13.295V9.23H37.2399V20H38.5899V18.86C39.0549 19.64 39.9249 20.165 41.0199 20.165ZM38.5599 15.815C38.5599 13.985 39.6699 13.19 40.7799 13.19C42.2499 13.19 43.0749 14.39 43.0749 16.085C43.0749 17.765 42.2499 18.98 40.7799 18.98C39.6699 18.98 38.5599 18.17 38.5599 16.37V15.815ZM49.1804 20.855L52.5554 12.155H51.1454L48.9704 18.155L46.7654 12.155H45.3404L48.2504 19.715L47.8754 20.645C47.5604 21.425 47.2454 21.635 46.6604 21.635C46.4354 21.635 46.2704 21.62 46.0154 21.56V22.73C46.2554 22.775 46.4204 22.79 46.7504 22.79C48.1154 22.79 48.7304 22.04 49.1804 20.855Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M98.7993 15.7838C98.7993 12.8786 97.3871 10.5862 94.688 10.5862C91.9774 10.5862 90.3374 12.8786 90.3374 15.7611C90.3374 19.177 92.2735 20.9019 95.0524 20.9019C96.4077 20.9019 97.4327 20.5955 98.2071 20.1643V17.8946C97.4327 18.2804 96.5443 18.5188 95.4168 18.5188C94.3121 18.5188 93.3327 18.1329 93.2074 16.7938H98.7766C98.7766 16.6463 98.7993 16.0561 98.7993 15.7838ZM93.1732 14.7057C93.1732 13.4233 93.9591 12.8899 94.6766 12.8899C95.3713 12.8899 96.1116 13.4233 96.1116 14.7057H93.1732Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M85.9413 10.5862C84.8251 10.5862 84.1076 11.1082 83.709 11.4714L83.561 10.7678H81.0554V24.0001L83.9026 23.3986L83.914 20.187C84.324 20.482 84.9276 20.9019 85.9299 20.9019C87.9685 20.9019 89.8249 19.2678 89.8249 15.6703C89.8135 12.3792 87.9343 10.5862 85.9413 10.5862ZM85.2579 18.4053C84.586 18.4053 84.1874 18.167 83.914 17.8719L83.9026 13.6616C84.1988 13.3325 84.6088 13.1055 85.2579 13.1055C86.2943 13.1055 87.0118 14.2631 87.0118 15.7497C87.0118 17.2704 86.3057 18.4053 85.2579 18.4053Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M77.1377 9.91656L79.9963 9.30374V7L77.1377 7.60147V9.91656Z" fill="white"></path><path d="M79.9963 10.7791H77.1377V20.709H79.9963V10.7791Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M74.074 11.6187L73.8918 10.7789H71.4318V20.7088H74.279V13.9792C74.9509 13.1054 76.0898 13.2642 76.4429 13.3891V10.7789C76.0784 10.6427 74.7459 10.3931 74.074 11.6187Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M68.3796 8.31641L65.6007 8.90653L65.5894 17.9966C65.5894 19.6762 66.8535 20.9132 68.5391 20.9132C69.473 20.9132 70.1563 20.743 70.5321 20.5387V18.235C70.1677 18.3825 68.3682 18.9045 68.3682 17.225V13.1962H70.5321V10.779H68.3682L68.3796 8.31641Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M60.6807 13.6616C60.6807 13.219 61.0452 13.0488 61.6488 13.0488C62.5143 13.0488 63.6076 13.3098 64.4732 13.7751V11.1082C63.5279 10.7337 62.594 10.5862 61.6488 10.5862C59.3368 10.5862 57.7993 11.7891 57.7993 13.7978C57.7993 16.93 62.1271 16.4306 62.1271 17.7811C62.1271 18.3031 61.6715 18.4734 61.0338 18.4734C60.0885 18.4734 58.8813 18.0875 57.9246 17.5655V20.2664C58.9838 20.7204 60.0543 20.9133 61.0338 20.9133C63.4026 20.9133 65.0313 19.7444 65.0313 17.713C65.0199 14.3312 60.6807 14.9326 60.6807 13.6616Z" fill="white"></path></svg><a href="/docs/adopting">Get started</a> · <a href="/docs/overview">Docs</a> · <a href="https://sorbet.run">Try</a> · <a href="/en/community">Community</a> · <a href="/blog">Blog</a> · <a href="https://twitter.com/sorbet_ruby">Twitter</a></p></div><div id="csat-extension-config" data-notify="#sorbet-team"></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'ZYWC6Z01G8',
                apiKey: 'b05a65e9f8d9f50dc4ec3241db8836c4',
                indexName: 'stripe_sorbet',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>